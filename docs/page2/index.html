<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>M.C. Shih &middot; BLOG</title>  
  

  <!-- CSS -->
  <link rel="stylesheet" href="/blog/public/css/poole.css">
  <link rel="stylesheet" href="/blog/public/css/syntax.css">
  <link rel="stylesheet" href="/blog/public/css/hyde.css">
  <link rel="stylesheet" href="/blog/public/css/custom.css">
  <link rel="stylesheet" href="/blog/public/css/fontawesome-all.css">
  <link rel="stylesheet" href="/blog/public/css/fontawesome-all.min.css">
  <!-- <link href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" rel="stylesheet"> -->


  <!--<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface"> -->

  <!-- Icons -->
  <link rel="apple-touch-icon" sizes="16x16" href="/blog/public/apple-touch-icon-16-precomposed.png">
  <link rel="apple-touch-icon" sizes="24x24" href="/blog/public/apple-touch-icon-24-precomposed.png">
  <link rel="apple-touch-icon" sizes="32x32" href="/blog/public/apple-touch-icon-32-precomposed.png">
  <link rel="apple-touch-icon" sizes="48x48" href="/blog/public/apple-touch-icon-48-precomposed.png">
  <link rel="apple-touch-icon" sizes="57x57" href="/blog/public/apple-touch-icon-57-precomposed.png">
  <link rel="apple-touch-icon" sizes="64x64" href="/blog/public/apple-touch-icon-64-precomposed.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/blog/public/apple-touch-icon-72-precomposed.png"> 
  <link rel="apple-touch-icon" sizes="114x114" href="/blog/public/apple-touch-icon-114-precomposed.png"> 
  <link rel="apple-touch-icon" sizes="120x120" href="/blog/public/apple-touch-icon-120-precomposed.png"> 
  <link rel="apple-touch-icon" sizes="144x144" href="/blog/public/apple-touch-icon-144-precomposed.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/blog/public/apple-touch-icon-152-precomposed.png">
  <link rel="apple-touch-icon" sizes="512x512" href="/blog/public/apple-touch-icon-512-precomposed.png">
  <link rel="shortcut icon" href="/blog/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/blog/blog/atom.xml">
  <!-- 數學符號 -->
  <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
</head>


  <body>
  	
    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/blog/">
          M.C. Shih
        </a>
        <img src="/blog/img/headshot.png" alt="Author Image" class="headshot">
      </h1>
      <p class="lead">Just for learning.</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/blog/">Blog</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/blog/about">About</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/blog/archive">Archives</a>
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/blog/category">Category</a>
          
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/blog/search">Search</a>
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

    </nav>
    <div class="links">
      <ul>
        <li><a href="https://shihs.github.io" class="homepage" target="_blank"><img src="/blog/img/link%20icon/iconmonstr-home-6-240.png"></a></li>
        <li><a href="https://github.com/shihs" class="github" target="_blank"><img src="/blog/img/link%20icon/iconmonstr-github-3-240.png"></a></li>
        <li><a href="https://www.linkedin.com/in/min-chun-shih-6647779a/" class="linkedin" target="_blank"><img src="/blog/img/link%20icon/iconmonstr-linkedin-3-240.png"></a></li>
        <li><a href="https://www.instagram.com/itakephotos_tw/" class="instagram" target="_blank"><img src="/blog/img/link%20icon/iconmonstr-instagram-8-240.png"></a></li>
        <li><a href="https://www.flickr.com/photos/mcshihs/" class="flickr" target="_blank"><img src="/blog/img/link%20icon/iconmonstr-flickr-3-240.png"></a></li>
      </ul>
    </div>
    

    <p class = "rights">&copy; 2023. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="posts" id="begin">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/blog/2021/08/Web-MVC-%E6%9E%B6%E6%A7%8B.html">
        [Web]MVC 架構
      </a>
    </h1>

    <div class="post-info">
      <!-- <span class="post-date">Posted by Shihs on August 22, 2021</span> -->
      <i class="fas fa-calendar-alt"></i>
      <span class="post-date">August 22, 2021</span>
      <span class="post-categories">
      <!-- <i class="fas fa-tag"></i> -->
      <!-- <i class="far fa-book"></i> -->
      <i class="fas fa-box"></i>
      
      
        <a target="_blank" href="/blog//category/#Web">Web</a>
        
      
    </span>

    </div>
    <!-- <p>這篇簡單地介紹 MVC 架構，若是有任何錯誤觀念，歡迎留言。</p>

<p>之前用 node.js 的 express 加上 MVC 架構寫了一個 <a href="https://github.com/shihs/to-do-list-app">TO DO LIST</a>，也許有這個例子可以更容易理解。</p>

<hr />

<h2 id="what-is-mvc">What is MVC?</h2>

<p>MVC 的三個字母分別表示 Model、View 和 Controller，是一種在軟體開發時的軟體架構 (architectural pattern) ，由 Trygve Reenskaug 在 1978 年提出，是為了 Smalltalk （一種程式語言）所發明的一種軟體架構（<a href="https://zh.wikipedia.org/wiki/MVC">wiki</a>）。</p>

<p>它的設計原則是「<strong>關注點分離</strong> (separation of concerns, SOC) 」，把不同作用的程式碼放在不同的檔案裡，讓大家各司其職。</p>

<hr />

<h2 id="圖解-mvc">圖解 MVC</h2>

<p>下圖簡單的說明了，MVC 的流程。</p>

<p><img src="https://i.imgur.com/bVwaxlv.jpg" alt="" width="90%" heigh="90%" />
<a href="https://www.hellosanta.com.tw/blog/Graphical-MVC-architecture">圖片來源</a></p>

<p>使用者操作網站與網站互動，當使用者點選網頁發出 request（可能登入、點進連結、加入購物車…..等等）後，<strong>Controller</strong> 會去接收這個 User 傳來的 request，並根據請求和 <strong>Model</strong> 要資料，當 <strong>Model</strong> 吐出資料給 <strong>Controller</strong> 後，<strong>Controller</strong> 再把資料丟給 <strong>View</strong> 讓前端去顯示，這時候 User 就會看到前端顯示出剛剛送出 request 後產生的畫面。</p>

<p>從上面的說明可以發現，<strong>Controller</strong> 扮演了重要的角色，它除了接收使用者的要求，也負責協調工作給 <strong>Model</strong> 與 <strong>View</strong>，讓每個部分都獨立專注在自己的工作，彼此之前不會直接的溝通，都是靠 <strong>Controller</strong> 傳話。</p>

<p>我覺得可以想像成 <strong>View</strong> 和 <strong>Model</strong> 各是一個部門，兩個部門有各自負責的工作且彼此之間不會直接對話與干預彼此，而使用者就是老闆，<strong>Controller</strong> 負責把老闆的任務分配給各部門，並作為各個部門之間溝通與傳遞消息的角色，讓 <strong>View</strong> 和 <strong>Model</strong> 不用知道對方在幹嘛也能讓每個任務順利完成。</p>

<p>舉一個例子，有一個使用者輸入帳號和密碼要登入一個網站，當使用者點選登入後會送出 request 到 <strong>Controller</strong>，這時候 <strong>Controller</strong> 將這個消息告訴 <strong>Model</strong>，並請 <strong>Model</strong> 檢查使用者輸入的帳號密碼是否正確，<strong>Model</strong> 收到指令後會去和 DB 確認，確認完之後會將結果傳回給 <strong>Controller</strong>（可能是帳號密碼正確或錯誤），<strong>Controller</strong> 再把這個結果給 <strong>View</strong>，<strong>View</strong> 就能根據結果顯示在網頁上，如果成功就順利登入，如果帳號密碼錯誤就顯示失敗。</p>

<p>下面這個圖，加上了前端和後端，<strong>View</strong> 負責的內容會是使用者看到的畫面（前端），而 <strong>Controller</strong> 和 <strong>Model</strong> 是使用者不會注意到背後運作的東西，而與 DB 拿資料就是 <strong>Model</strong> 的任務。</p>

<p><img src="https://dotblogsfile.blob.core.windows.net/user/%E5%B7%A5%E7%A8%8B%E8%89%AF%E7%94%B0/ec9b5c12-03c6-4658-a3f2-85f4bdeaf371/1538274044_80461.png" alt="" width="90%" heigh="90%" />
<a href="https://dotblogs.com.tw/armycoding/2018/09/29/164045">圖片來源</a></p>

<hr />

<h2 id="model-view-controller">Model, View, Controller</h2>

<p>下面再來詳細的介紹一下 MVC 它們的工作內容。</p>

<h3 id="controller">Controller</h3>

<p>從上面的圖例我們知道 Controller 是負責接收使用者的 request 並將資料分配給 Model 和 View 的重要角色。它將使用者的 request 傳給 Model，請 Model 去拿取資料，之後再將 Model 給的資料送給 View，讓 View 將資料呈現在前端讓使用者可以看到。</p>

<p>因此 Controller 決定了整個任務的工作流程，並決定最後如何呈現。下面幾個來自「<a href="https://tw.alphacamp.co/blog/mvc-model-view-controller">MVC 架構是什麼？認識 Model-View-Controller 軟體設計模式</a>」的例子</p>

<ul>
  <li>使用者是否需要先登入 (認證) 才可以看到網頁內容？</li>
  <li>使用者是否只能閱讀資料，但不能修改或刪除？</li>
  <li>使用者新增了資料之後，會重新導向至哪個頁面？</li>
</ul>

<h3 id="model">Model</h3>

<p>Model 主要負責和資料庫溝通以及商業邏輯有關的任務。Model 可以直接對資料庫做存取，但它並不關心資料之後如何被顯示或操作。而所謂的商業邏輯可以這樣理解，假設今天有一個滿千折打九折的折扣，像這樣的「商業邏輯」就可以使用一個 model 去處理使用者的訂單；又或者今天在寫一個部落格的網站，就可以有 <em>post</em> 和 <em>comment</em> 這兩個 model 去對資料庫寫進新的文章和留言的功能。</p>

<h3 id="view">View</h3>

<p>網頁的前端，使用者看到的部分，也就是 HTML 的部分。</p>

<hr />

<h2 id="mvc-優點">MVC 優點</h2>

<ul>
  <li>不管是誰寫，檔案存放的邏輯不會差太多</li>
  <li>程式碼可以重複利用（reusable）</li>
  <li>更容易維護程式碼</li>
  <li>方便團隊合作：團隊各在開發時可以各自負責不同部分，不會互相影響</li>
</ul>

<hr />

<h2 id="route-與-mvc-框架">Route 與 MVC 框架</h2>

<p>前面介紹的 MVC 架構當使用者送出 request 後是直接由 <strong>Controller</strong> 去接收做處理，但如果網頁的 request 是由 <strong>Route</strong> 去處理，這樣 <strong>Controller</strong> 接收的訊息就會是由 <strong>Route</strong> 傳送過來的，但其他的工作內容基本上和前面介紹的 MVC 是一樣的。</p>

<p>如果想要具體的了解可以看這篇「<a href="https://ithelp.ithome.com.tw/articles/10194968">Node.js-Backend 見聞錄(10)：關於後端觀念(六)-關於 MVC </a>」，比較具體地介紹 node.js route 的 MVC 架構。</p>

<p><img src="https://2.bp.blogspot.com/-gX62WAgkWWs/VIXBRs6w6SI/AAAAAAAAAvM/hmx8361at9k/s1600/laravel-mvc-components.png" alt="" width="90%" heigh="90%" />
<a href="https://tutorial-4-php.blogspot.com/2014/12/model-view-controller-mvc.html">圖片來源</a></p>

<p>*上圖 Routing 上面的「Laravel」是 PHP 的一個 web framwork，因為圖片來源的文章是在講解 PHP。</p>

<hr />

<ul>
  <li><a href="https://tutorial-4-php.blogspot.com/2014/12/model-view-controller-mvc.html">Model-View-Controller (MVC) </a></li>
  <li><a href="https://tw.alphacamp.co/blog/mvc-model-view-controller">MVC 架構是什麼？認識 Model-View-Controller 軟體設計模式</a></li>
  <li><a href="https://ithelp.ithome.com.tw/articles/10191216">[Day 01] 什麼是 MVC？能吃嗎？ </a></li>
  <li><a href="https://www.ibest.tw/mvc-website.php">什麼是 MVC 網頁設計? 做網站一定需要 MVC 嗎?</a></li>
  <li><a href="https://www.youtube.com/watch?v=zW_tZR0Ir3Q">Node.js Crash Course Tutorial #11 - Express Router &amp; MVC</a></li>
</ul>
 -->
    
    <div class="post-excerpt"><p>這篇簡單地介紹 MVC 架構，若是有任何錯誤觀念，歡迎留言。</p>
</div>

    <div class="bookmark">
      <!-- <i class="far fa-comments"></i> -->
      <i class="fas fa-comments"></i>
      <span>
        


<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
var disqus_config = function () {
        // this.page.url = '/blog///2021/08/Web-MVC-%E6%9E%B6%E6%A7%8B.html#disqus_thread';
        this.page.identifier = '/2021/08/Web-MVC-%E6%9E%B6%E6%A7%8B.html';
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://mcshihs.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>



        <a href="/blog///2021/08/Web-MVC-%E6%9E%B6%E6%A7%8B.html#disqus_thread" data-disqus-identifier="/2021/08/Web-MVC-%E6%9E%B6%E6%A7%8B.html">0 Comments</a>
      </span>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/blog/2021/08/%E5%9C%A8-Mac-%E6%9C%AC%E6%A9%9F%E5%AE%89%E8%A3%9D-MySQL-&-phpmyadmin.html">
        [SQL]在 Mac 本機安裝 MySQL & phpmyadmin
      </a>
    </h1>

    <div class="post-info">
      <!-- <span class="post-date">Posted by Shihs on August 16, 2021</span> -->
      <i class="fas fa-calendar-alt"></i>
      <span class="post-date">August 16, 2021</span>
      <span class="post-categories">
      <!-- <i class="fas fa-tag"></i> -->
      <!-- <i class="far fa-book"></i> -->
      <i class="fas fa-box"></i>
      
      
        <a target="_blank" href="/blog//category/#SQL">SQL</a>
        
      
    </span>

    </div>
    <!-- <h4 id="1-啟動-apache">1. 啟動 Apache</h4>

<ul>
  <li><code class="language-plaintext highlighter-rouge">sudo apachectl start</code></li>
  <li>打開瀏覽器 <a href="http://localhost/">http://localhost/</a> 可以看到 <strong>It works!</strong></li>
</ul>

<h4 id="2-下載-mysql">2. 下載 MySQL</h4>

<ul>
  <li><a href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a></li>
  <li>選擇下載 <code class="language-plaintext highlighter-rouge">.dmg</code> 檔</li>
  <li>下載完後安裝，安裝過程需要<strong>設定 root 的密碼</strong></li>
  <li>打開系統偏好設定會看到出現 MySQL 的圖示，點選後啟動 MySQL
<img src="https://i.imgur.com/tusQ0GN.png" alt="" width="70%" heigh="70%" />
<img src="https://i.imgur.com/rpAQ8yJ.png" alt="" width="70%" heigh="70%" /></li>
</ul>

<h4 id="3-使用-terminal-開啟-mysql">3. 使用 terminal 開啟 MySQL</h4>

<ul>
  <li><code class="language-plaintext highlighter-rouge">mysql -u root -p</code>（<code class="language-plaintext highlighter-rouge">-u</code>: user, <code class="language-plaintext highlighter-rouge">-p</code>: password）</li>
  <li>出現 <code class="language-plaintext highlighter-rouge">Enter password:</code> 後輸入剛剛安裝時設定的 root 密碼
<img src="https://i.imgur.com/dsXdFmP.png" alt="" width="90%" heigh="90%" /></li>
</ul>

<h4 id="4-下載-phpmyadmin">4. 下載 phpmyadmin</h4>

<p>這個步驟不是必須，下載 phpmyadmin 是為了可以使用操作介面查看 MySQL。</p>

<ul>
  <li>下載 phpmyadmin：<a href="https://www.phpmyadmin.net/downloads/">https://www.phpmyadmin.net/downloads/</a></li>
  <li>瀏覽器打開 <a href="http://localhost/phpmyadmin/index.php">http://localhost/phpmyadmin/index.php</a>
<img src="https://i.imgur.com/orDEaCz.png" alt="" /></li>
</ul>

<h4 id="5-設定-phpmyadmin-登入密碼">5. 設定 phpmyadmin 登入密碼</h4>

<p>因為 phpmyadmin 的密碼身份驗證是 <code class="language-plaintext highlighter-rouge">caching_sha2_password</code> 所以會無法使用一開始設定的 root 與密碼登入，這時候需要先修改 db 的資料。</p>

<ul>
  <li>terminal 登入 MySQL（<a href="https://hackmd.io/xwgJ-FoRSsSVk6WCrgRXlA?view#3-%E4%BD%BF%E7%94%A8-terminal-%E9%96%8B%E5%95%9F-MySQL">step 3</a>）</li>
  <li>將 root 的密碼身份驗證由 <code class="language-plaintext highlighter-rouge">caching_sha2_password</code> 改成 <code class="language-plaintext highlighter-rouge">mysql_native_password</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">use mysql；</code>（使用 <code class="language-plaintext highlighter-rouge">mysql</code> 這個 db）</li>
      <li><code class="language-plaintext highlighter-rouge">ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '你的密碼';</code></li>
      <li><code class="language-plaintext highlighter-rouge">FLUSH PRIVILEGES;</code></li>
    </ul>
  </li>
  <li>這時候 phpmyadmin 就可以使用設定好的 root 的密碼登入了</li>
</ul>

<hr />

<h3 id="新增新的-mysql-user">新增新的 MySQL User</h3>

<p>通常不會讓所有人都使用 root 權限操作 db，這時候就需要增加新的 user 讓其他人使用。</p>

<ul>
  <li>terminal 登入 MySQL（<a href="https://hackmd.io/xwgJ-FoRSsSVk6WCrgRXlA?view#3-%E4%BD%BF%E7%94%A8-terminal-%E9%96%8B%E5%95%9F-MySQL">step 3</a>）</li>
  <li>新增 User
    <ul>
      <li><code class="language-plaintext highlighter-rouge">use mysql；</code></li>
      <li><code class="language-plaintext highlighter-rouge">CREATE USER 'USERNAME'@'localhost' IDENTIFIED BY 'PASSWORD';</code></li>
      <li><code class="language-plaintext highlighter-rouge">ALTER USER 'username'@'localhost' IDENTIFIED WITH mysql_native_password BY 'password';</code></li>
      <li><code class="language-plaintext highlighter-rouge">FLUSH PRIVILEGES;</code></li>
    </ul>
  </li>
  <li>設定完成後 phpmyadmin 和 terminal 都可以使用設定好的帳號密碼登入
    <ul>
      <li><code class="language-plaintext highlighter-rouge">mysql -u USERNAME -p</code> / <code class="language-plaintext highlighter-rouge">PASSWORD</code></li>
    </ul>
  </li>
</ul>

<h4 id="設定新增-user-的權限">設定新增 User 的權限</h4>

<ul>
  <li>查看某 user 的權限：
<code class="language-plaintext highlighter-rouge">SHOW GRANTS FOR 'username'@'localhost';</code></li>
  <li>GRANT 權限：
<code class="language-plaintext highlighter-rouge">GRANT type_of_permission ON database_name.table_name TO 'username'@'localhost';</code></li>
  <li>REVOKE 權限：
<code class="language-plaintext highlighter-rouge">REVOKE type_of_permission ON database_name.table_name FROM 'username'@'localhost';</code></li>
  <li>reload all the privileges：<code class="language-plaintext highlighter-rouge">FLUSH PRIVILEGES;</code></li>
</ul>

<hr />

<p><strong>Reference</strong></p>

<ul>
  <li><a href="https://jqnets.com/blog/mac-%E9%9B%BB%E8%85%A6%E5%9F%B7%E8%A1%8C-php-mysql-phpmyadmin/">Mac 電腦執行 PHP &amp; MySQL &amp; phpMyadmin</a></li>
  <li><a href="https://www.itread01.com/content/1546243084.html">phpmyadmin 連線 MySQL8.0 報錯#2054 - The server requested authentication method unknown to the client</a></li>
  <li><a href="https://phoenixnap.com/kb/how-to-create-new-mysql-user-account-grant-privileges">How To Create New MySQL User and Grant Privileges</a></li>
  <li><a href="https://www.digitalocean.com/community/tutorials/how-to-create-a-new-user-and-grant-permissions-in-mysql">How To Create a New User and Grant Permissions in MySQL</a></li>
</ul>
 -->
    
    <div class="post-excerpt"><h4 id="1-啟動-apache">1. 啟動 Apache</h4>
</div>

    <div class="bookmark">
      <!-- <i class="far fa-comments"></i> -->
      <i class="fas fa-comments"></i>
      <span>
        


<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
var disqus_config = function () {
        // this.page.url = '/blog///2021/08/%E5%9C%A8-Mac-%E6%9C%AC%E6%A9%9F%E5%AE%89%E8%A3%9D-MySQL-&-phpmyadmin.html#disqus_thread';
        this.page.identifier = '/2021/08/%E5%9C%A8-Mac-%E6%9C%AC%E6%A9%9F%E5%AE%89%E8%A3%9D-MySQL-&-phpmyadmin.html';
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://mcshihs.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>



        <a href="/blog///2021/08/%E5%9C%A8-Mac-%E6%9C%AC%E6%A9%9F%E5%AE%89%E8%A3%9D-MySQL-&-phpmyadmin.html#disqus_thread" data-disqus-identifier="/2021/08/%E5%9C%A8-Mac-%E6%9C%AC%E6%A9%9F%E5%AE%89%E8%A3%9D-MySQL-&-phpmyadmin.html">0 Comments</a>
      </span>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/blog/2021/08/Github-%E6%96%B0%E7%9A%84-authentication-%E8%A8%AD%E5%AE%9A.html">
        [Git]Github 新的 authentication 設定
      </a>
    </h1>

    <div class="post-info">
      <!-- <span class="post-date">Posted by Shihs on August 15, 2021</span> -->
      <i class="fas fa-calendar-alt"></i>
      <span class="post-date">August 15, 2021</span>
      <span class="post-categories">
      <!-- <i class="fas fa-tag"></i> -->
      <!-- <i class="far fa-book"></i> -->
      <i class="fas fa-box"></i>
      
      
        <a target="_blank" href="/blog//category/#Git">Git</a>
        
      
    </span>

    </div>
    <!-- <p>Github 從 8/13 開始將以前的 password 認證方式刪除了，這裡記錄我解決的方法。</p>

<ul>
  <li><a href="https://shihs.github.io/blog/2021/08/15/Github-%E6%96%B0%E7%9A%84-authentication-%E8%A8%AD%E5%AE%9A/#1-%E4%BD%BF%E7%94%A8-ssh">使用 ssh</a></li>
  <li><a href="https://shihs.github.io/blog/2021/08/15/Github-%E6%96%B0%E7%9A%84-authentication-%E8%A8%AD%E5%AE%9A/#2-%E4%BD%BF%E7%94%A8-personal-access-token">使用 personal access token</a></li>
</ul>

<hr />

<h3 id="1-使用-ssh">1. 使用 ssh</h3>

<p>情況：</p>

<p><img src="http://localhost:4000/blog/img/posts/git%20push.png" alt="" /></p>

<ul>
  <li>之前已 clone 下來的 repo</li>
  <li>修改後要 push 碰到下面的錯誤訊息</li>
</ul>

<pre><code class="language-bash=">remote: Support for password authentication was removed on August 13, 2021. Please use a personal access token instead.
remote: Please see https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/ for more information.
fatal: unable to access 'https://github.com/shihs/to-do-list-app.git/': The requested URL returned error: 403
</code></pre>

<p><strong>Step 1:</strong> Enabling two-factor authentication</p>

<ul>
  <li>根據錯誤訊息提供的<a href="https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/">網址</a>，先去 <strong>Enabling two-factor authentication</strong>，照著 <a href="https://docs.github.com/en/github/authenticating-to-github/securing-your-account-with-two-factor-authentication-2fa/configuring-two-factor-authentication-recovery-methods">Configuring two-factor authentication recovery methods</a> 的步驟做（裡面提到的 TOTP app 我是用 <a href="https://www.salesforce.com/solutions/mobile/app-suite/security/">Salesforce Authenticator</a>）。</li>
</ul>

<p><strong>Step 2:</strong> 加 ssh key</p>

<ul>
  <li>確認 github 是否已經加了 ssh key <code class="language-plaintext highlighter-rouge">ssh -t git@github.com</code>，如果沒加會出現像這樣的訊息<img src="http://localhost:4000/blog/img/posts/ssh%20test.png" alt="" /></li>
  <li>在本機 gen ssh key，並在 github 頁面新增 ssh key。我主要是參考下面兩個網址：
    <ul>
      <li><a href="https://blog.jaycetyle.com/2018/02/github-ssh/">Git 版本控制筆記 - 使用 github 及 ssh 金鑰設定</a></li>
      <li><a href="https://docs.github.com/cn/github/authenticating-to-github/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent#adding-your-ssh-key-to-the-ssh-agent">生成新 SSH 密钥并添加到 ssh-agent</a></li>
    </ul>
  </li>
  <li>完成之後在 terminal 打上 <code class="language-plaintext highlighter-rouge">ssh -t git@github.com</code> 會是
<img src="http://localhost:4000/blog/img/posts/ssh%20success.png" alt="" /></li>
</ul>

<p><strong>Step 3:</strong> 重新 push</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">git remote set-url origin git@github.com:[your-github-name]/[repo-name].git</code></li>
  <li>重新 add 和 commit 修改，就可以 push 了</li>
</ul>

<p>但這樣的方法還是很麻煩……每一支 reop 都要重新 <code class="language-plaintext highlighter-rouge">git remote set-url origin ...</code> 所以另一個方法是使用 <strong>personal access token</strong>。</p>

<p><strong>Reference</strong>:
<a href="https://www.youtube.com/watch?v=5Jz0wVmYUUE">GitHub Support for password authentication was removed (August 13, 2021) - Solution</a></p>

<hr />

<h2 id="2-使用-personal-access-token">2. 使用 personal access token</h2>

<p>這裡的方法是在 Mac 的操作。</p>

<p><strong>Step 1:</strong></p>

<ul>
  <li>參照 github 提供的方法，<a href="https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token">Creating a personal access token</a>。
    <ul>
      <li><strong>Settings</strong> -&gt; <strong>Developer settings</strong> -&gt; <strong>Personal access tokens</strong> -&gt; <strong>Generate new token</strong></li>
    </ul>
  </li>
</ul>

<p><strong>Step 2:</strong> 將 create 出來的 token 加到「鑰匙圈」裡</p>

<ul>
  <li>使用 spotlight 搜尋「keychain」</li>
  <li>在 keychain 上搜尋「github」，找到 github
<img src="http://localhost:4000/blog/img/posts/keychain.png" alt="" width="70%" heigh="70%" /></li>
  <li>點選下方「顯示密碼」，並將密碼改成剛剛在 github 上 create 的 token
<img src="http://localhost:4000/blog/img/posts/add%20token.png" alt="" width="70%" heigh="70%" /></li>
</ul>

<p>現在可以任意地使用之前 clone 下來的 repo 了，不過如果剛剛 create token 有時間限制，之後必須要再重新建立新的密碼並修改。</p>

<p><strong>Reference</strong>:
<a href="https://www.youtube.com/watch?v=aKaYpl-ZpGg">Solved - Support for password authentication was removed - Github - Mac and Windows</a></p>
 -->
    
    <div class="post-excerpt"><p>Github 從 8/13 開始將以前的 password 認證方式刪除了，這裡記錄我解決的方法。</p>
</div>

    <div class="bookmark">
      <!-- <i class="far fa-comments"></i> -->
      <i class="fas fa-comments"></i>
      <span>
        


<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
var disqus_config = function () {
        // this.page.url = '/blog///2021/08/Github-%E6%96%B0%E7%9A%84-authentication-%E8%A8%AD%E5%AE%9A.html#disqus_thread';
        this.page.identifier = '/2021/08/Github-%E6%96%B0%E7%9A%84-authentication-%E8%A8%AD%E5%AE%9A.html';
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://mcshihs.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>



        <a href="/blog///2021/08/Github-%E6%96%B0%E7%9A%84-authentication-%E8%A8%AD%E5%AE%9A.html#disqus_thread" data-disqus-identifier="/2021/08/Github-%E6%96%B0%E7%9A%84-authentication-%E8%A8%AD%E5%AE%9A.html">0 Comments</a>
      </span>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/blog/2021/03/%E5%89%8D%E7%AB%AF-Cookie-&-Session.html">
        [前端]Cookie & Session
      </a>
    </h1>

    <div class="post-info">
      <!-- <span class="post-date">Posted by Shihs on March 7, 2021</span> -->
      <i class="fas fa-calendar-alt"></i>
      <span class="post-date">March 7, 2021</span>
      <span class="post-categories">
      <!-- <i class="fas fa-tag"></i> -->
      <!-- <i class="far fa-book"></i> -->
      <i class="fas fa-box"></i>
      
      
        <a target="_blank" href="/blog//category/#前端">前端</a>
        
      
    </span>

    </div>
    <!-- <p>在邊閱讀網路資訊的時候，我對於 cookie 和 session 從覺得理解到感到困惑，到後來又覺得好像懂了，但也許不是百分之百正確。我盡量把理解的東西寫下來，但如果有任何錯誤，歡迎指正。</p>

<hr />

<h3 id="重點">重點</h3>

<p>Session 和 Cookie 的目的是用來讓 Sever 知道 Client 的狀態，而 Cookie 是將狀態資料存在 Client 端（Browser），而 Session 則是將資料存在 Server 端（e.g Redis）</p>

<hr />

<h3 id="http-的-stateless無狀態">HTTP 的 stateless（無狀態）</h3>

<p>前面說到「Session 和 Cookie 的目的是用來讓 Sever 知道 Client 的狀態」，但</p>

<ol>
  <li>為什麼 Server 不知道 Client 的狀態呢？</li>
  <li>為什麼需要讓 Sever 知道 Client 的狀態呢？</li>
</ol>

<p><img src="http://wiki.hashphp.org/images/6/67/HTTP_Model.jpg" alt="HTTP Model" width="50%" heigh="50%" /></p>

<p>要回答第一個問題，就要先知道「<strong>HTTP 是 stateless（無狀態）</strong>」，而 stateless（無狀態）的定義是</p>

<ul>
  <li>Server 和 Client 不會記住（retain）之前的連線</li>
  <li>每個 Client 送出的 request 都被視為是唯一且獨立的 connection</li>
</ul>

<p>舉個例子，</p>

<p><a href="https://dotblogs.com.tw/jimmyyu/2010/10/16/difference-between-stateful-and-stateless">https://dotblogs.com.tw/jimmyyu/2010/10/16/difference-between-stateful-and-stateless</a></p>

<p>上面這個網址是我在搜尋「無狀態」時找到覺得解釋得不錯的部落格，而我從我的瀏覽器打開這個網頁，和你從你的瀏覽器輸入這個網址打開，基本是上一樣的，並不需要先連到其他網頁，像這樣子的情況就稱為 stateless（無狀態）。</p>

<p>解決第一個問題後，那 stateless 就 stateless 啊，為什麼要讓 Server 知道 Client 的狀態呢？</p>

<p>想想看，我們在使用 facebook 或是 instagram 等等很多網站都必須要先登入後才能觀看到想看到的頁面；或是，在網拍網站上如果我們把東西加到購物車，當下次登入時打開，還能夠看到上次加入的商品。但以剛剛 stateless（無狀態）的邏輯來思考，這件事情是不可能可以達成的，因為假如每次的 request 都是獨立且唯一的，那這樣每一次重新點選網頁都會是一個新的事件，Server 就像是失憶一樣，根本不會記得曾經發生過什麼事情，所以當 Client 端做了改變（ex. 登入、商品加入購物車…等等），Sever 端並不會知道，當我們想要做任何事情，每一次都必須要重新來一遍才行。</p>

<p>這就是為什麼我們會想要讓 Server 知道 Client 的狀態了（Stateful）。</p>

<hr />

<h3 id="cookie-是什麼">Cookie 是什麼？</h3>

<p>Cookie 是用來記錄 Client 與 Server 目前的溝通狀態，會以 name-value 的形式呈現，並且存在 Client 端。</p>

<p><img src="http://localhost:4000/blog/img/posts/cookie.png" alt="進入 googlec.com 後得到的 cookie" width="80%" heigh="80%" /></p>

<p>而這個 cookie 在 Client 端第一次發送 request 後，Server 會以 <code class="language-plaintext highlighter-rouge">Set-Cookie</code> 的方式寫在 response header，回應給 Client，而 Client 瀏覽器就會將這個 Cookie 存在本機端，下一次要再次送 request 時，會把這個已儲存的 Cookie 已 <code class="language-plaintext highlighter-rouge">Cookie</code> 的方式存在 resquest header 和 request 一起送出，讓 Sever 知道這個 Client 目前的狀態。（可以用 Chrome 的開法者模式看 network 中網頁的 Response Headers 和 Request Headers 找到 <code class="language-plaintext highlighter-rouge">Set-Cookie</code> 和 <code class="language-plaintext highlighter-rouge">Cookie</code>）</p>

<p>但這樣儲存 Cookie 又會有什麼問題呢？</p>

<ol>
  <li>
    <p>Cookie size 的限制：根據 RFC-2965 的規定，一個 Cookie 最大只能是 4096 bytes。</p>
  </li>
  <li>
    <p>佔據網路流量：由於每次 request 都會傳送 Cookie 資料，所以當 Cookie 資料越來越大，request 傳輸的資訊也會更著變大，這樣就會影響網路傳輸的速度。</p>
  </li>
  <li>
    <p>Cookie 可能被 Client 竄改：由於 Cookie 存在 Client 端，所以 Client 是可以完整的看到 Cookie 資料的，那如果 Cookie 竄改或者是外洩，這樣就存在著資安的風險。</p>
  </li>
</ol>

<p>根據以上的問題，我們可以知道，Cookie 中不能存放有資安疑慮的資料，也不能存放太大的資訊量。所以為了彌補這些不足，就有了 Session 的出現。</p>

<hr />

<h3 id="session-是什麼">Session 是什麼？</h3>

<p>Session 是一種比 Cookie 更安全的狀態管理機制。</p>

<p>既然 Session 是為了彌補 Cookie 的不足，它就必須要解決上面提到的 Cookie 可能會有的問題。所以 Session 會將狀態資訊存在 Sever 端，以避免 Client 端可以任意修改資訊，此方法也能避免儲存與傳輸的資料過大的問題。</p>

<p>而為了要讓 Client 端知道 Session 儲存的資訊，Server 端會在 response 的 Cookie 中回傳一組 SessionID 讓 Client 儲存在 Cookie 裡，當下次 Client 送出 request 時，就在 Cookie 裡一起送出這組 SessionID，而 Server 就可以透過這組 SessionID 去驗證這個 Client 身份，並知道上一次儲存的狀態，然後回傳內容。</p>

<hr />

<p><strong>Reference:</strong>
<br />
<a href="https://hulitw.medium.com/session-and-cookie-15e47ed838bc">前端三十｜27. [WEB] Cookie &amp; Session 是什麼？</a>
<br />
<a href="https://dotblogs.com.tw/jimmyyu/2010/10/16/difference-between-stateful-and-stateless">[ASP.NET]Stateful與Stateless</a>
<br />
<a href="https://hulitw.medium.com/session-and-cookie-15e47ed838bc">白話 Session 與 Cookie：從經營雜貨店開始</a>
<br />
<a href="https://medium.com/@vicxu/authentication-那些小事上集-cookie-與-session-介紹-1da2d413afa2">淺談 Authentication 上集：Cookie 與 Session 介紹</a></p>

 -->
    
    <div class="post-excerpt"><p>在邊閱讀網路資訊的時候，我對於 cookie 和 session 從覺得理解到感到困惑，到後來又覺得好像懂了，但也許不是百分之百正確。我盡量把理解的東西寫下來，但如果有任何錯誤，歡迎指正。</p>
</div>

    <div class="bookmark">
      <!-- <i class="far fa-comments"></i> -->
      <i class="fas fa-comments"></i>
      <span>
        


<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
var disqus_config = function () {
        // this.page.url = '/blog///2021/03/%E5%89%8D%E7%AB%AF-Cookie-&-Session.html#disqus_thread';
        this.page.identifier = '/2021/03/%E5%89%8D%E7%AB%AF-Cookie-&-Session.html';
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://mcshihs.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>



        <a href="/blog///2021/03/%E5%89%8D%E7%AB%AF-Cookie-&-Session.html#disqus_thread" data-disqus-identifier="/2021/03/%E5%89%8D%E7%AB%AF-Cookie-&-Session.html">0 Comments</a>
      </span>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/blog/2021/01/Python-asyncio-%E5%92%8C-await.html">
        [Python]asyncio 和 await
      </a>
    </h1>

    <div class="post-info">
      <!-- <span class="post-date">Posted by Shihs on January 22, 2021</span> -->
      <i class="fas fa-calendar-alt"></i>
      <span class="post-date">January 22, 2021</span>
      <span class="post-categories">
      <!-- <i class="fas fa-tag"></i> -->
      <!-- <i class="far fa-book"></i> -->
      <i class="fas fa-box"></i>
      
      
        <a target="_blank" href="/blog//category/#Python">Python</a>
        
      
    </span>

    </div>
    <!-- <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">asyncio</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://www.google.com.tw/'</span>
<span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">()</span>

<span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">send_req</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Send a request at"</span><span class="p">,</span><span class="n">t</span><span class="o">-</span><span class="n">start_time</span><span class="p">,</span><span class="s">"seconds."</span><span class="p">)</span>

    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loop</span><span class="p">.</span><span class="n">run_in_executor</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">,</span><span class="n">url</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Receive a response at"</span><span class="p">,</span><span class="n">t</span><span class="o">-</span><span class="n">start_time</span><span class="p">,</span><span class="s">"seconds."</span><span class="p">)</span>

<span class="n">tasks</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">task</span> <span class="o">=</span> <span class="n">loop</span><span class="p">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">send_req</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
    <span class="n">tasks</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

<span class="n">loop</span><span class="p">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">asyncio</span><span class="p">.</span><span class="n">wait</span><span class="p">(</span><span class="n">tasks</span><span class="p">))</span>
</code></pre></div></div>

<hr />

<p><strong>Reference:</strong>
<br />
<a href="https://ithelp.ithome.com.tw/articles/10199385">python的asyncio模組(一)：異步執行的好處</a>
<br /></p>
 -->
    
    <div class="post-excerpt"><p>```python
import requests
import time
import asyncio</p>
</div>

    <div class="bookmark">
      <!-- <i class="far fa-comments"></i> -->
      <i class="fas fa-comments"></i>
      <span>
        


<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
var disqus_config = function () {
        // this.page.url = '/blog///2021/01/Python-asyncio-%E5%92%8C-await.html#disqus_thread';
        this.page.identifier = '/2021/01/Python-asyncio-%E5%92%8C-await.html';
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://mcshihs.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>



        <a href="/blog///2021/01/Python-asyncio-%E5%92%8C-await.html#disqus_thread" data-disqus-identifier="/2021/01/Python-asyncio-%E5%92%8C-await.html">0 Comments</a>
      </span>
    </div>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/blog/page3">Older</a>
  
  
    <!--  -->
      <a class="pagination-item newer" href="/blog/page1">Newer</a>
    <!--  -->
  
</div>

    </div>
    <script id="dsq-count-scr" src="//mcshihs.disqus.com/count.js" async></script>
  </body>
</html>
