<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

 <title>M.C. Shih</title>
 <link href="http://localhost:4000blog/atom.xml" rel="self"/>
 <link href="http://localhost:4000blog/"/>
 <updated>2022-04-05T18:57:30+08:00</updated>
 <id>http://localhost:4000</id>
 <author>
   <name>Min-Chun Shih</name>
   <email></email>
 </author>

 
 <entry>
   <title>Test</title>
   <link href="http://localhost:4000blog//2022/04/05/Test/"/>
   <updated>2022-04-05T18:57:00+08:00</updated>
   <id>http://localhost:4000/2022/04/05/Test</id>
   <content type="html">&lt;p&gt;Test&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Python]在 Mac 下載與安裝 Miniconda</title>
   <link href="http://localhost:4000blog//python/2022/04/05/Python-%E5%9C%A8-Mac-%E4%B8%8B%E8%BC%89%E8%88%87%E5%AE%89%E8%A3%9D-Miniconda/"/>
   <updated>2022-04-05T17:41:00+08:00</updated>
   <id>http://localhost:4000/python/2022/04/05/[Python]在 Mac 下載與安裝 Miniconda</id>
   <content type="html">&lt;p&gt;Conda 除了能夠管理套件也能夠管理工作環境，是個好用的工具。
之前是下載 Anaconda 來使用 Conda，但 Anaconda 在最一開始下載時就會下載很多套件，可是大多數的套件其實都用不到，卻又佔用了大量的空間（Anaconda 在刪除前在我的電腦佔用了十幾 GB），因此決定轉換使用 Miniconda 來使用 conda。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;刪除-anaconda&quot;&gt;刪除 Anaconda&lt;/h2&gt;

&lt;p&gt;參考官網的 &lt;a href=&quot;https://docs.anaconda.com/anaconda/install/uninstall/&quot;&gt;uninstall Anaconda&lt;/a&gt; 的方法。&lt;/p&gt;

&lt;p&gt;原本想使用第二種方法 &lt;code class=&quot;highlighter-rouge&quot;&gt;conda install anaconda-clean&lt;/code&gt;，但在下載 &lt;code class=&quot;highlighter-rouge&quot;&gt;anaconda-clean&lt;/code&gt; 時一直碰到問題，所以最後決定使用第一種方法。&lt;/p&gt;

&lt;p&gt;直接刪除整個 &lt;code class=&quot;highlighter-rouge&quot;&gt;rm -rf ~/anaconda3&lt;/code&gt; 資料夾，為避免這種刪法沒有刪乾淨，再手動搜尋 &lt;code class=&quot;highlighter-rouge&quot;&gt;anaconda&lt;/code&gt; 刪除所有相關的檔案。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;下載與安裝-miniconda&quot;&gt;下載與安裝 Miniconda&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;到官網下載 &lt;a href=&quot;https://docs.conda.io/en/latest/miniconda.html&quot;&gt;Miniconda&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;根據步驟一直點選下一步就好&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;安裝完成後，Miniconda 會自動在 &lt;code class=&quot;highlighter-rouge&quot;&gt;.zchrc&lt;/code&gt; 和 &lt;code class=&quot;highlighter-rouge&quot;&gt;.bash_profile&lt;/code&gt; 加上路徑
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;c&quot;&gt;# &amp;gt;&amp;gt;&amp;gt; conda initialize &amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;c&quot;&gt;# !! Contents within this block are managed by 'conda init' !!&lt;/span&gt;
 &lt;span class=&quot;nv&quot;&gt;__conda_setup&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/Users/your_user_name/opt/miniconda3/bin/conda'&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'shell.bash'&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'hook'&lt;/span&gt; 2&amp;gt; /dev/null&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$?&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-eq&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
     &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$__conda_setup&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;else
     if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/Users/your_user_name/opt/miniconda3/etc/profile.d/conda.sh&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then&lt;/span&gt;
         &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/Users/your_user_name/opt/miniconda3/etc/profile.d/conda.sh&quot;&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;else
         &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/Users/your_user_name/opt/miniconda3/bin:&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PATH&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;fi
 fi
 &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;unset &lt;/span&gt;__conda_setup
 &lt;span class=&quot;c&quot;&gt;# &amp;lt;&amp;lt;&amp;lt; conda initialize &amp;lt;&amp;lt;&amp;lt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;確認是否安裝成功
    &lt;ul&gt;
      &lt;li&gt;打開 terminal，&lt;code class=&quot;highlighter-rouge&quot;&gt;conda --version&lt;/code&gt; 如果能正確顯示 conda 版本，就表示 conda 順利安裝完成！&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;conda-常用指令&quot;&gt;conda 常用指令&lt;/h2&gt;

&lt;h3 id=&quot;cheatsheet&quot;&gt;Cheatsheet&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.conda.io/projects/conda/en/4.6.0/_downloads/52a95608c49671267e40c689e0bc00ca/conda-cheatsheet.pdf&quot;&gt;Document&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;conda 的資訊&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda --version&lt;/code&gt;：檢視 conda 版本&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda update conda&lt;/code&gt;：更新 conda 版本&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda env list&lt;/code&gt;：conda 所有的環境&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;conda basic&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda install PACKAGENAME&lt;/code&gt;：Install a package included in Anaconda&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda update PACKAGENAME&lt;/code&gt;：Update any installed program&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;環境&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda create --name ENV_NAME python=VERSION&lt;/code&gt;：建立特定版本，名稱為&lt;code class=&quot;highlighter-rouge&quot;&gt;ENV_NAME&lt;/code&gt;的環境
    &lt;ul&gt;
      &lt;li&gt;Ex. &lt;code class=&quot;highlighter-rouge&quot;&gt;conda create --name myenv python=3.6&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda activate ENVIRONMENT&lt;/code&gt;：切換至指定工作環境&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda deactivate&lt;/code&gt;：回到 base 工作環境&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda list&lt;/code&gt;：active 環境中的所有套件
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/62412898/what-does-pypi-in-the-channel-column-of-conda-list-output-imply&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Build Channel&lt;/code&gt;&lt;/a&gt;的&lt;code class=&quot;highlighter-rouge&quot;&gt;pypi&lt;/code&gt;表示是用&lt;code class=&quot;highlighter-rouge&quot;&gt;pip install PACKAGENAME&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;pip freeze&lt;/code&gt;可以看到所有用&lt;code class=&quot;highlighter-rouge&quot;&gt;pip install&lt;/code&gt;下載的套件&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda env remove --name ENV_NAME&lt;/code&gt;：刪除名稱為&lt;code class=&quot;highlighter-rouge&quot;&gt;ENV_NAME&lt;/code&gt;的環境&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>[Python]Python 虛擬環境 (virtual environment) - conda create 與 virtualenv 比較</title>
   <link href="http://localhost:4000blog//python/2022/04/05/Python-%E8%99%9B%E6%93%AC%E7%92%B0%E5%A2%83-(virtual-environment)-conda-create-%E8%88%87-virtualenv-%E6%AF%94%E8%BC%83/"/>
   <updated>2022-04-05T13:44:00+08:00</updated>
   <id>http://localhost:4000/python/2022/04/05/Python 虛擬環境 (virtual environment) - conda create 與 virtualenv 比較</id>
   <content type="html">&lt;h2 id=&quot;virtualenv&quot;&gt;Virtualenv&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;virtualenv&lt;/code&gt;是用來建立一個獨立的&lt;code class=&quot;highlighter-rouge&quot;&gt;Python&lt;/code&gt;環境的工具，支援 Python2 和 Python3。&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;安裝 virtualenv：&lt;code class=&quot;highlighter-rouge&quot;&gt;pip install virtualenv&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;建立虛擬環境：
    &lt;ul&gt;
      &lt;li&gt;先建立一個資料夾：&lt;code class=&quot;highlighter-rouge&quot;&gt;mkdir myenv&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;路徑移到該資料夾：&lt;code class=&quot;highlighter-rouge&quot;&gt;cd myenv&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;建立虛擬環境：&lt;code class=&quot;highlighter-rouge&quot;&gt;virtualenv venv&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;啟動虛擬環境：&lt;code class=&quot;highlighter-rouge&quot;&gt;source env/bin/activate&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;在該環境下載套件：&lt;code class=&quot;highlighter-rouge&quot;&gt;pip install PACKAGE_NAME&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;停用虛擬環境：&lt;code class=&quot;highlighter-rouge&quot;&gt;deactivate&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;conda&quot;&gt;Conda&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;Conda is an open source package management system and environment management system that runs on Windows, macOS and Linux. It was created for Python programs, but it can package and distribute software for any language.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Conda 是一個開源的跨平台工具軟體，它被設計作為 Python、R、Lua、Scala 與 Java 等任何程式語言的套件、依賴性以及工作環境管理員。傳統 Python 使用者以 pip 作為套件管理員（package manager）、以 venv 作為工作環境管理員（environment manager），而 conda 則達成了「兩個願望、一次滿足」既可以管理套件亦能夠管理工作環境。&lt;/p&gt;

&lt;h3 id=&quot;在-python-使用-conda&quot;&gt;在 Python 使用 conda&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;可以下載 &lt;code class=&quot;highlighter-rouge&quot;&gt;Anaconda&lt;/code&gt;（3 GB 以上）或 &lt;code class=&quot;highlighter-rouge&quot;&gt;Miniconda&lt;/code&gt;（400 MB 左右）
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Miniconda&lt;/code&gt; installer = Python + conda&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Anaconda&lt;/code&gt; installer = Python + conda + meta package anaconda = &lt;code class=&quot;highlighter-rouge&quot;&gt;Miniconda&lt;/code&gt; installer + conda install anaconda&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://stackoverflow.com/questions/30034840/what-are-the-differences-between-conda-and-anaconda/30057885#30057885&quot;&gt;What are the differences between Conda and Anaconda?&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda&lt;/code&gt; is the package manager. &lt;code class=&quot;highlighter-rouge&quot;&gt;Anaconda&lt;/code&gt; is a set of about a hundred packages including conda, numpy, scipy, ipython notebook, and so on.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Miniconda&lt;/code&gt; is a smaller alternative to Anaconda that is just conda and its dependencies, not those listed above.&lt;/li&gt;
  &lt;li&gt;Once you have Miniconda, you can easily install Anaconda into it with &lt;code class=&quot;highlighter-rouge&quot;&gt;conda install anaconda&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;下載&quot;&gt;下載&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;下載 &lt;a href=&quot;https://docs.conda.io/en/latest/miniconda.html&quot;&gt;Miniconda&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;下載 &lt;a href=&quot;https://www.anaconda.com/products/individual&quot;&gt;Anaconda&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;cheatsheet&quot;&gt;Cheatsheet&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.conda.io/projects/conda/en/4.6.0/_downloads/52a95608c49671267e40c689e0bc00ca/conda-cheatsheet.pdf&quot;&gt;Document&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;conda 的資訊&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda --version&lt;/code&gt;：檢視 conda 版本&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda update conda&lt;/code&gt;：更新 conda 版本&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda env list&lt;/code&gt;：conda 所有的環境&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;conda basic&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda install PACKAGENAME&lt;/code&gt;：Install a package included in Anaconda&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda update PACKAGENAME&lt;/code&gt;：Update any installed program&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;環境&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda create --name ENV_NAME python=VERSION&lt;/code&gt;：建立特定版本，名稱為&lt;code class=&quot;highlighter-rouge&quot;&gt;ENV_NAME&lt;/code&gt;的環境
    &lt;ul&gt;
      &lt;li&gt;Ex. &lt;code class=&quot;highlighter-rouge&quot;&gt;conda create --name myenv python=3.6&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda activate ENVIRONMENT&lt;/code&gt;：切換至指定工作環境&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda deactivate&lt;/code&gt;：回到 base 工作環境&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda list&lt;/code&gt;：active 環境中的所有套件
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/62412898/what-does-pypi-in-the-channel-column-of-conda-list-output-imply&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Build Channel&lt;/code&gt;&lt;/a&gt;的&lt;code class=&quot;highlighter-rouge&quot;&gt;pypi&lt;/code&gt;表示是用&lt;code class=&quot;highlighter-rouge&quot;&gt;pip install PACKAGENAME&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;pip freeze&lt;/code&gt;可以看到所有用&lt;code class=&quot;highlighter-rouge&quot;&gt;pip install&lt;/code&gt;下載的套件
&lt;img src=&quot;https://i.imgur.com/yvuy4kT.png&quot; alt=&quot;&quot; width=&quot;50%&quot; heigh=&quot;50%&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;conda env remove --name ENV_NAME&lt;/code&gt;：刪除名稱為&lt;code class=&quot;highlighter-rouge&quot;&gt;ENV_NAME&lt;/code&gt;的環境&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/datainpoint/python-essentials-conda-quickstart-1f1e9ecd1025&quot;&gt;輕鬆學習 Python：conda 的核心功能&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/python4u/python-virtualenv虛擬環境安裝-9d6be2d45db9&quot;&gt;Python — Virtualenv虛擬環境安裝&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>[Web]MVC 架構</title>
   <link href="http://localhost:4000blog//web/2021/08/22/Web-MVC-%E6%9E%B6%E6%A7%8B/"/>
   <updated>2021-08-22T15:23:00+08:00</updated>
   <id>http://localhost:4000/web/2021/08/22/[Web]MVC 架構</id>
   <content type="html">&lt;p&gt;這篇簡單地介紹 MVC 架構，若是有任何錯誤觀念，歡迎留言。&lt;/p&gt;

&lt;p&gt;之前用 node.js 的 express 加上 MVC 架構寫了一個 &lt;a href=&quot;https://github.com/shihs/to-do-list-app&quot;&gt;TO DO LIST&lt;/a&gt;，也許有這個例子可以更容易理解。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;what-is-mvc&quot;&gt;What is MVC?&lt;/h2&gt;

&lt;p&gt;MVC 的三個字母分別表示 Model、View 和 Controller，是一種在軟體開發時的軟體架構 (architectural pattern) ，由 Trygve Reenskaug 在 1978 年提出，是為了 Smalltalk （一種程式語言）所發明的一種軟體架構（&lt;a href=&quot;https://zh.wikipedia.org/wiki/MVC&quot;&gt;wiki&lt;/a&gt;）。&lt;/p&gt;

&lt;p&gt;它的設計原則是「&lt;strong&gt;關注點分離&lt;/strong&gt; (separation of concerns, SOC) 」，把不同作用的程式碼放在不同的檔案裡，讓大家各司其職。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;圖解-mvc&quot;&gt;圖解 MVC&lt;/h2&gt;

&lt;p&gt;下圖簡單的說明了，MVC 的流程。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/bVwaxlv.jpg&quot; alt=&quot;&quot; width=&quot;90%&quot; heigh=&quot;90%&quot; /&gt;
&lt;a href=&quot;https://www.hellosanta.com.tw/blog/Graphical-MVC-architecture&quot;&gt;圖片來源&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;使用者操作網站與網站互動，當使用者點選網頁發出 request（可能登入、點進連結、加入購物車…..等等）後，&lt;strong&gt;Controller&lt;/strong&gt; 會去接收這個 User 傳來的 request，並根據請求和 &lt;strong&gt;Model&lt;/strong&gt; 要資料，當 &lt;strong&gt;Model&lt;/strong&gt; 吐出資料給 &lt;strong&gt;Controller&lt;/strong&gt; 後，&lt;strong&gt;Controller&lt;/strong&gt; 再把資料丟給 &lt;strong&gt;View&lt;/strong&gt; 讓前端去顯示，這時候 User 就會看到前端顯示出剛剛送出 request 後產生的畫面。&lt;/p&gt;

&lt;p&gt;從上面的說明可以發現，&lt;strong&gt;Controller&lt;/strong&gt; 扮演了重要的角色，它除了接收使用者的要求，也負責協調工作給 &lt;strong&gt;Model&lt;/strong&gt; 與 &lt;strong&gt;View&lt;/strong&gt;，讓每個部分都獨立專注在自己的工作，彼此之前不會直接的溝通，都是靠 &lt;strong&gt;Controller&lt;/strong&gt; 傳話。&lt;/p&gt;

&lt;p&gt;我覺得可以想像成 &lt;strong&gt;View&lt;/strong&gt; 和 &lt;strong&gt;Model&lt;/strong&gt; 各是一個部門，兩個部門有各自負責的工作且彼此之間不會直接對話與干預彼此，而使用者就是老闆，&lt;strong&gt;Controller&lt;/strong&gt; 負責把老闆的任務分配給各部門，並作為各個部門之間溝通與傳遞消息的角色，讓 &lt;strong&gt;View&lt;/strong&gt; 和 &lt;strong&gt;Model&lt;/strong&gt; 不用知道對方在幹嘛也能讓每個任務順利完成。&lt;/p&gt;

&lt;p&gt;舉一個例子，有一個使用者輸入帳號和密碼要登入一個網站，當使用者點選登入後會送出 request 到 &lt;strong&gt;Controller&lt;/strong&gt;，這時候 &lt;strong&gt;Controller&lt;/strong&gt; 將這個消息告訴 &lt;strong&gt;Model&lt;/strong&gt;，並請 &lt;strong&gt;Model&lt;/strong&gt; 檢查使用者輸入的帳號密碼是否正確，&lt;strong&gt;Model&lt;/strong&gt; 收到指令後會去和 DB 確認，確認完之後會將結果傳回給 &lt;strong&gt;Controller&lt;/strong&gt;（可能是帳號密碼正確或錯誤），&lt;strong&gt;Controller&lt;/strong&gt; 再把這個結果給 &lt;strong&gt;View&lt;/strong&gt;，&lt;strong&gt;View&lt;/strong&gt; 就能根據結果顯示在網頁上，如果成功就順利登入，如果帳號密碼錯誤就顯示失敗。&lt;/p&gt;

&lt;p&gt;下面這個圖，加上了前端和後端，&lt;strong&gt;View&lt;/strong&gt; 負責的內容會是使用者看到的畫面（前端），而 &lt;strong&gt;Controller&lt;/strong&gt; 和 &lt;strong&gt;Model&lt;/strong&gt; 是使用者不會注意到背後運作的東西，而與 DB 拿資料就是 &lt;strong&gt;Model&lt;/strong&gt; 的任務。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://dotblogsfile.blob.core.windows.net/user/%E5%B7%A5%E7%A8%8B%E8%89%AF%E7%94%B0/ec9b5c12-03c6-4658-a3f2-85f4bdeaf371/1538274044_80461.png&quot; alt=&quot;&quot; width=&quot;90%&quot; heigh=&quot;90%&quot; /&gt;
&lt;a href=&quot;https://dotblogs.com.tw/armycoding/2018/09/29/164045&quot;&gt;圖片來源&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;model-view-controller&quot;&gt;Model, View, Controller&lt;/h2&gt;

&lt;p&gt;下面再來詳細的介紹一下 MVC 它們的工作內容。&lt;/p&gt;

&lt;h3 id=&quot;controller&quot;&gt;Controller&lt;/h3&gt;

&lt;p&gt;從上面的圖例我們知道 Controller 是負責接收使用者的 request 並將資料分配給 Model 和 View 的重要角色。它將使用者的 request 傳給 Model，請 Model 去拿取資料，之後再將 Model 給的資料送給 View，讓 View 將資料呈現在前端讓使用者可以看到。&lt;/p&gt;

&lt;p&gt;因此 Controller 決定了整個任務的工作流程，並決定最後如何呈現。下面幾個來自「&lt;a href=&quot;https://tw.alphacamp.co/blog/mvc-model-view-controller&quot;&gt;MVC 架構是什麼？認識 Model-View-Controller 軟體設計模式&lt;/a&gt;」的例子&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;使用者是否需要先登入 (認證) 才可以看到網頁內容？&lt;/li&gt;
  &lt;li&gt;使用者是否只能閱讀資料，但不能修改或刪除？&lt;/li&gt;
  &lt;li&gt;使用者新增了資料之後，會重新導向至哪個頁面？&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;model&quot;&gt;Model&lt;/h3&gt;

&lt;p&gt;Model 主要負責和資料庫溝通以及商業邏輯有關的任務。Model 可以直接對資料庫做存取，但它並不關心資料之後如何被顯示或操作。而所謂的商業邏輯可以這樣理解，假設今天有一個滿千折打九折的折扣，像這樣的「商業邏輯」就可以使用一個 model 去處理使用者的訂單；又或者今天在寫一個部落格的網站，就可以有 &lt;em&gt;post&lt;/em&gt; 和 &lt;em&gt;comment&lt;/em&gt; 這兩個 model 去對資料庫寫進新的文章和留言的功能。&lt;/p&gt;

&lt;h3 id=&quot;view&quot;&gt;View&lt;/h3&gt;

&lt;p&gt;網頁的前端，使用者看到的部分，也就是 HTML 的部分。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;mvc-優點&quot;&gt;MVC 優點&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;不管是誰寫，檔案存放的邏輯不會差太多&lt;/li&gt;
  &lt;li&gt;程式碼可以重複利用（reusable）&lt;/li&gt;
  &lt;li&gt;更容易維護程式碼&lt;/li&gt;
  &lt;li&gt;方便團隊合作：團隊各在開發時可以各自負責不同部分，不會互相影響&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;route-與-mvc-框架&quot;&gt;Route 與 MVC 框架&lt;/h2&gt;

&lt;p&gt;前面介紹的 MVC 架構當使用者送出 request 後是直接由 &lt;strong&gt;Controller&lt;/strong&gt; 去接收做處理，但如果網頁的 request 是由 &lt;strong&gt;Route&lt;/strong&gt; 去處理，這樣 &lt;strong&gt;Controller&lt;/strong&gt; 接收的訊息就會是由 &lt;strong&gt;Route&lt;/strong&gt; 傳送過來的，但其他的工作內容基本上和前面介紹的 MVC 是一樣的。&lt;/p&gt;

&lt;p&gt;如果想要具體的了解可以看這篇「&lt;a href=&quot;https://ithelp.ithome.com.tw/articles/10194968&quot;&gt;Node.js-Backend 見聞錄(10)：關於後端觀念(六)-關於 MVC &lt;/a&gt;」，比較具體地介紹 node.js route 的 MVC 架構。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://2.bp.blogspot.com/-gX62WAgkWWs/VIXBRs6w6SI/AAAAAAAAAvM/hmx8361at9k/s1600/laravel-mvc-components.png&quot; alt=&quot;&quot; width=&quot;90%&quot; heigh=&quot;90%&quot; /&gt;
&lt;a href=&quot;https://tutorial-4-php.blogspot.com/2014/12/model-view-controller-mvc.html&quot;&gt;圖片來源&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;*上圖 Routing 上面的「Laravel」是 PHP 的一個 web framwork，因為圖片來源的文章是在講解 PHP。&lt;/p&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://tutorial-4-php.blogspot.com/2014/12/model-view-controller-mvc.html&quot;&gt;Model-View-Controller (MVC) &lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://tw.alphacamp.co/blog/mvc-model-view-controller&quot;&gt;MVC 架構是什麼？認識 Model-View-Controller 軟體設計模式&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ithelp.ithome.com.tw/articles/10191216&quot;&gt;[Day 01] 什麼是 MVC？能吃嗎？ &lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.ibest.tw/mvc-website.php&quot;&gt;什麼是 MVC 網頁設計? 做網站一定需要 MVC 嗎?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=zW_tZR0Ir3Q&quot;&gt;Node.js Crash Course Tutorial #11 - Express Router &amp;amp; MVC&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>[SQL]在 Mac 本機安裝 MySQL & phpmyadmin</title>
   <link href="http://localhost:4000blog//sql/2021/08/16/%E5%9C%A8-Mac-%E6%9C%AC%E6%A9%9F%E5%AE%89%E8%A3%9D-MySQL-&-phpmyadmin/"/>
   <updated>2021-08-16T01:34:00+08:00</updated>
   <id>http://localhost:4000/sql/2021/08/16/在 Mac 本機安裝 MySQL & phpmyadmin</id>
   <content type="html">&lt;h4 id=&quot;1-啟動-apache&quot;&gt;1. 啟動 Apache&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;sudo apachectl start&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;打開瀏覽器 &lt;a href=&quot;http://localhost/&quot;&gt;http://localhost/&lt;/a&gt; 可以看到 &lt;strong&gt;It works!&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;2-下載-mysql&quot;&gt;2. 下載 MySQL&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://dev.mysql.com/downloads/mysql/&quot;&gt;https://dev.mysql.com/downloads/mysql/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;選擇下載 &lt;code class=&quot;highlighter-rouge&quot;&gt;.dmg&lt;/code&gt; 檔&lt;/li&gt;
  &lt;li&gt;下載完後安裝，安裝過程需要&lt;strong&gt;設定 root 的密碼&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;打開系統偏好設定會看到出現 MySQL 的圖示，點選後啟動 MySQL
&lt;img src=&quot;https://i.imgur.com/tusQ0GN.png&quot; alt=&quot;&quot; width=&quot;70%&quot; heigh=&quot;70%&quot; /&gt;
&lt;img src=&quot;https://i.imgur.com/rpAQ8yJ.png&quot; alt=&quot;&quot; width=&quot;70%&quot; heigh=&quot;70%&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;3-使用-terminal-開啟-mysql&quot;&gt;3. 使用 terminal 開啟 MySQL&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;mysql -u root -p&lt;/code&gt;（&lt;code class=&quot;highlighter-rouge&quot;&gt;-u&lt;/code&gt;: user, &lt;code class=&quot;highlighter-rouge&quot;&gt;-p&lt;/code&gt;: password）&lt;/li&gt;
  &lt;li&gt;出現 &lt;code class=&quot;highlighter-rouge&quot;&gt;Enter password:&lt;/code&gt; 後輸入剛剛安裝時設定的 root 密碼
&lt;img src=&quot;https://i.imgur.com/dsXdFmP.png&quot; alt=&quot;&quot; width=&quot;90%&quot; heigh=&quot;90%&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;4-下載-phpmyadmin&quot;&gt;4. 下載 phpmyadmin&lt;/h4&gt;

&lt;p&gt;這個步驟不是必須，下載 phpmyadmin 是為了可以使用操作介面查看 MySQL。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;下載 phpmyadmin：&lt;a href=&quot;https://www.phpmyadmin.net/downloads/&quot;&gt;https://www.phpmyadmin.net/downloads/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;瀏覽器打開 &lt;a href=&quot;http://localhost/phpmyadmin/index.php&quot;&gt;http://localhost/phpmyadmin/index.php&lt;/a&gt;
&lt;img src=&quot;https://i.imgur.com/orDEaCz.png&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;5-設定-phpmyadmin-登入密碼&quot;&gt;5. 設定 phpmyadmin 登入密碼&lt;/h4&gt;

&lt;p&gt;因為 phpmyadmin 的密碼身份驗證是 &lt;code class=&quot;highlighter-rouge&quot;&gt;caching_sha2_password&lt;/code&gt; 所以會無法使用一開始設定的 root 與密碼登入，這時候需要先修改 db 的資料。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;terminal 登入 MySQL（&lt;a href=&quot;https://hackmd.io/xwgJ-FoRSsSVk6WCrgRXlA?view#3-%E4%BD%BF%E7%94%A8-terminal-%E9%96%8B%E5%95%9F-MySQL&quot;&gt;step 3&lt;/a&gt;）&lt;/li&gt;
  &lt;li&gt;將 root 的密碼身份驗證由 &lt;code class=&quot;highlighter-rouge&quot;&gt;caching_sha2_password&lt;/code&gt; 改成 &lt;code class=&quot;highlighter-rouge&quot;&gt;mysql_native_password&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;use mysql；&lt;/code&gt;（使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;mysql&lt;/code&gt; 這個 db）&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '你的密碼';&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;FLUSH PRIVILEGES;&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;這時候 phpmyadmin 就可以使用設定好的 root 的密碼登入了&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;新增新的-mysql-user&quot;&gt;新增新的 MySQL User&lt;/h3&gt;

&lt;p&gt;通常不會讓所有人都使用 root 權限操作 db，這時候就需要增加新的 user 讓其他人使用。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;terminal 登入 MySQL（&lt;a href=&quot;https://hackmd.io/xwgJ-FoRSsSVk6WCrgRXlA?view#3-%E4%BD%BF%E7%94%A8-terminal-%E9%96%8B%E5%95%9F-MySQL&quot;&gt;step 3&lt;/a&gt;）&lt;/li&gt;
  &lt;li&gt;新增 User
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;use mysql；&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;CREATE USER 'USERNAME'@'localhost' IDENTIFIED BY 'PASSWORD';&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ALTER USER 'username'@'localhost' IDENTIFIED WITH mysql_native_password BY 'password';&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;FLUSH PRIVILEGES;&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;設定完成後 phpmyadmin 和 terminal 都可以使用設定好的帳號密碼登入
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;mysql -u USERNAME -p&lt;/code&gt; / &lt;code class=&quot;highlighter-rouge&quot;&gt;PASSWORD&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;設定新增-user-的權限&quot;&gt;設定新增 User 的權限&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;查看某 user 的權限：
&lt;code class=&quot;highlighter-rouge&quot;&gt;SHOW GRANTS FOR 'username'@'localhost';&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;GRANT 權限：
&lt;code class=&quot;highlighter-rouge&quot;&gt;GRANT type_of_permission ON database_name.table_name TO 'username'@'localhost';&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;REVOKE 權限：
&lt;code class=&quot;highlighter-rouge&quot;&gt;REVOKE type_of_permission ON database_name.table_name FROM 'username'@'localhost';&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;reload all the privileges：&lt;code class=&quot;highlighter-rouge&quot;&gt;FLUSH PRIVILEGES;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://jqnets.com/blog/mac-%E9%9B%BB%E8%85%A6%E5%9F%B7%E8%A1%8C-php-mysql-phpmyadmin/&quot;&gt;Mac 電腦執行 PHP &amp;amp; MySQL &amp;amp; phpMyadmin&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.itread01.com/content/1546243084.html&quot;&gt;phpmyadmin 連線 MySQL8.0 報錯#2054 - The server requested authentication method unknown to the client&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://phoenixnap.com/kb/how-to-create-new-mysql-user-account-grant-privileges&quot;&gt;How To Create New MySQL User and Grant Privileges&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.digitalocean.com/community/tutorials/how-to-create-a-new-user-and-grant-permissions-in-mysql&quot;&gt;How To Create a New User and Grant Permissions in MySQL&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>[Git]Github 新的 authentication 設定</title>
   <link href="http://localhost:4000blog//git/2021/08/15/Github-%E6%96%B0%E7%9A%84-authentication-%E8%A8%AD%E5%AE%9A/"/>
   <updated>2021-08-15T15:03:00+08:00</updated>
   <id>http://localhost:4000/git/2021/08/15/Github 新的 authentication 設定</id>
   <content type="html">&lt;p&gt;Github 從 8/13 開始將以前的 password 認證方式刪除了，這裡記錄我解決的方法。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://shihs.github.io/blog/2021/08/15/Github-%E6%96%B0%E7%9A%84-authentication-%E8%A8%AD%E5%AE%9A/#1-%E4%BD%BF%E7%94%A8-ssh&quot;&gt;使用 ssh&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://shihs.github.io/blog/2021/08/15/Github-%E6%96%B0%E7%9A%84-authentication-%E8%A8%AD%E5%AE%9A/#2-%E4%BD%BF%E7%94%A8-personal-access-token&quot;&gt;使用 personal access token&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;1-使用-ssh&quot;&gt;1. 使用 ssh&lt;/h3&gt;

&lt;p&gt;情況：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/git%20push.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;之前已 clone 下來的 repo&lt;/li&gt;
  &lt;li&gt;修改後要 push 碰到下面的錯誤訊息&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&quot;language-bash=&quot;&gt;remote: Support for password authentication was removed on August 13, 2021. Please use a personal access token instead.
remote: Please see https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/ for more information.
fatal: unable to access 'https://github.com/shihs/to-do-list-app.git/': The requested URL returned error: 403
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Step 1:&lt;/strong&gt; Enabling two-factor authentication&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;根據錯誤訊息提供的&lt;a href=&quot;https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/&quot;&gt;網址&lt;/a&gt;，先去 &lt;strong&gt;Enabling two-factor authentication&lt;/strong&gt;，照著 &lt;a href=&quot;https://docs.github.com/en/github/authenticating-to-github/securing-your-account-with-two-factor-authentication-2fa/configuring-two-factor-authentication-recovery-methods&quot;&gt;Configuring two-factor authentication recovery methods&lt;/a&gt; 的步驟做（裡面提到的 TOTP app 我是用 &lt;a href=&quot;https://www.salesforce.com/solutions/mobile/app-suite/security/&quot;&gt;Salesforce Authenticator&lt;/a&gt;）。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Step 2:&lt;/strong&gt; 加 ssh key&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;確認 github 是否已經加了 ssh key &lt;code class=&quot;highlighter-rouge&quot;&gt;ssh -t git@github.com&lt;/code&gt;，如果沒加會出現像這樣的訊息&lt;img src=&quot;http://localhost:4000/blog/img/posts/ssh%20test.png&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;在本機 gen ssh key，並在 github 頁面新增 ssh key。我主要是參考下面兩個網址：
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://blog.jaycetyle.com/2018/02/github-ssh/&quot;&gt;Git 版本控制筆記 - 使用 github 及 ssh 金鑰設定&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://docs.github.com/cn/github/authenticating-to-github/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent#adding-your-ssh-key-to-the-ssh-agent&quot;&gt;生成新 SSH 密钥并添加到 ssh-agent&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;完成之後在 terminal 打上 &lt;code class=&quot;highlighter-rouge&quot;&gt;ssh -t git@github.com&lt;/code&gt; 會是
&lt;img src=&quot;http://localhost:4000/blog/img/posts/ssh%20success.png&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Step 3:&lt;/strong&gt; 重新 push&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;git remote set-url origin git@github.com:[your-github-name]/[repo-name].git&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;重新 add 和 commit 修改，就可以 push 了&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;但這樣的方法還是很麻煩……每一支 reop 都要重新 &lt;code class=&quot;highlighter-rouge&quot;&gt;git remote set-url origin ...&lt;/code&gt; 所以另一個方法是使用 &lt;strong&gt;personal access token&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Reference&lt;/strong&gt;:
&lt;a href=&quot;https://www.youtube.com/watch?v=5Jz0wVmYUUE&quot;&gt;GitHub Support for password authentication was removed (August 13, 2021) - Solution&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;2-使用-personal-access-token&quot;&gt;2. 使用 personal access token&lt;/h2&gt;

&lt;p&gt;這裡的方法是在 Mac 的操作。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Step 1:&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;參照 github 提供的方法，&lt;a href=&quot;https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token&quot;&gt;Creating a personal access token&lt;/a&gt;。
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;Settings&lt;/strong&gt; -&amp;gt; &lt;strong&gt;Developer settings&lt;/strong&gt; -&amp;gt; &lt;strong&gt;Personal access tokens&lt;/strong&gt; -&amp;gt; &lt;strong&gt;Generate new token&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Step 2:&lt;/strong&gt; 將 create 出來的 token 加到「鑰匙圈」裡&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;使用 spotlight 搜尋「keychain」&lt;/li&gt;
  &lt;li&gt;在 keychain 上搜尋「github」，找到 github
&lt;img src=&quot;http://localhost:4000/blog/img/posts/keychain.png&quot; alt=&quot;&quot; width=&quot;70%&quot; heigh=&quot;70%&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;點選下方「顯示密碼」，並將密碼改成剛剛在 github 上 create 的 token
&lt;img src=&quot;http://localhost:4000/blog/img/posts/add%20token.png&quot; alt=&quot;&quot; width=&quot;70%&quot; heigh=&quot;70%&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;現在可以任意地使用之前 clone 下來的 repo 了，不過如果剛剛 create token 有時間限制，之後必須要再重新建立新的密碼並修改。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Reference&lt;/strong&gt;:
&lt;a href=&quot;https://www.youtube.com/watch?v=aKaYpl-ZpGg&quot;&gt;Solved - Support for password authentication was removed - Github - Mac and Windows&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[前端]Cookie & Session</title>
   <link href="http://localhost:4000blog//%E5%89%8D%E7%AB%AF/2021/03/07/%E5%89%8D%E7%AB%AF-Cookie-&-Session/"/>
   <updated>2021-03-07T15:08:00+08:00</updated>
   <id>http://localhost:4000/%E5%89%8D%E7%AB%AF/2021/03/07/[前端]Cookie & Session</id>
   <content type="html">&lt;p&gt;在邊閱讀網路資訊的時候，我對於 cookie 和 session 從覺得理解到感到困惑，到後來又覺得好像懂了，但也許不是百分之百正確。我盡量把理解的東西寫下來，但如果有任何錯誤，歡迎指正。&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;重點&quot;&gt;重點&lt;/h3&gt;

&lt;p&gt;Session 和 Cookie 的目的是用來讓 Sever 知道 Client 的狀態，而 Cookie 是將狀態資料存在 Client 端（Browser），而 Session 則是將資料存在 Server 端（e.g Redis）&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;http-的-stateless無狀態&quot;&gt;HTTP 的 stateless（無狀態）&lt;/h3&gt;

&lt;p&gt;前面說到「Session 和 Cookie 的目的是用來讓 Sever 知道 Client 的狀態」，但&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;為什麼 Server 不知道 Client 的狀態呢？&lt;/li&gt;
  &lt;li&gt;為什麼需要讓 Sever 知道 Client 的狀態呢？&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;http://wiki.hashphp.org/images/6/67/HTTP_Model.jpg&quot; alt=&quot;HTTP Model&quot; width=&quot;50%&quot; heigh=&quot;50%&quot; /&gt;&lt;/p&gt;

&lt;p&gt;要回答第一個問題，就要先知道「&lt;strong&gt;HTTP 是 stateless（無狀態）&lt;/strong&gt;」，而 stateless（無狀態）的定義是&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Server 和 Client 不會記住（retain）之前的連線&lt;/li&gt;
  &lt;li&gt;每個 Client 送出的 request 都被視為是唯一且獨立的 connection&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;舉個例子，&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://dotblogs.com.tw/jimmyyu/2010/10/16/difference-between-stateful-and-stateless&quot;&gt;https://dotblogs.com.tw/jimmyyu/2010/10/16/difference-between-stateful-and-stateless&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;上面這個網址是我在搜尋「無狀態」時找到覺得解釋得不錯的部落格，而我從我的瀏覽器打開這個網頁，和你從你的瀏覽器輸入這個網址打開，基本是上一樣的，並不需要先連到其他網頁，像這樣子的情況就稱為 stateless（無狀態）。&lt;/p&gt;

&lt;p&gt;解決第一個問題後，那 stateless 就 stateless 啊，為什麼要讓 Server 知道 Client 的狀態呢？&lt;/p&gt;

&lt;p&gt;想想看，我們在使用 facebook 或是 instagram 等等很多網站都必須要先登入後才能觀看到想看到的頁面；或是，在網拍網站上如果我們把東西加到購物車，當下次登入時打開，還能夠看到上次加入的商品。但以剛剛 stateless（無狀態）的邏輯來思考，這件事情是不可能可以達成的，因為假如每次的 request 都是獨立且唯一的，那這樣每一次重新點選網頁都會是一個新的事件，Server 就像是失憶一樣，根本不會記得曾經發生過什麼事情，所以當 Client 端做了改變（ex. 登入、商品加入購物車…等等），Sever 端並不會知道，當我們想要做任何事情，每一次都必須要重新來一遍才行。&lt;/p&gt;

&lt;p&gt;這就是為什麼我們會想要讓 Server 知道 Client 的狀態了（Stateful）。&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;cookie-是什麼&quot;&gt;Cookie 是什麼？&lt;/h3&gt;

&lt;p&gt;Cookie 是用來記錄 Client 與 Server 目前的溝通狀態，會以 name-value 的形式呈現，並且存在 Client 端。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/cookie.png&quot; alt=&quot;進入 googlec.com 後得到的 cookie&quot; width=&quot;80%&quot; heigh=&quot;80%&quot; /&gt;&lt;/p&gt;

&lt;p&gt;而這個 cookie 在 Client 端第一次發送 request 後，Server 會以 &lt;code class=&quot;highlighter-rouge&quot;&gt;Set-Cookie&lt;/code&gt; 的方式寫在 response header，回應給 Client，而 Client 瀏覽器就會將這個 Cookie 存在本機端，下一次要再次送 request 時，會把這個已儲存的 Cookie 已 &lt;code class=&quot;highlighter-rouge&quot;&gt;Cookie&lt;/code&gt; 的方式存在 resquest header 和 request 一起送出，讓 Sever 知道這個 Client 目前的狀態。（可以用 Chrome 的開法者模式看 network 中網頁的 Response Headers 和 Request Headers 找到 &lt;code class=&quot;highlighter-rouge&quot;&gt;Set-Cookie&lt;/code&gt; 和 &lt;code class=&quot;highlighter-rouge&quot;&gt;Cookie&lt;/code&gt;）&lt;/p&gt;

&lt;p&gt;但這樣儲存 Cookie 又會有什麼問題呢？&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Cookie size 的限制：根據 RFC-2965 的規定，一個 Cookie 最大只能是 4096 bytes。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;佔據網路流量：由於每次 request 都會傳送 Cookie 資料，所以當 Cookie 資料越來越大，request 傳輸的資訊也會更著變大，這樣就會影響網路傳輸的速度。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Cookie 可能被 Client 竄改：由於 Cookie 存在 Client 端，所以 Client 是可以完整的看到 Cookie 資料的，那如果 Cookie 竄改或者是外洩，這樣就存在著資安的風險。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;根據以上的問題，我們可以知道，Cookie 中不能存放有資安疑慮的資料，也不能存放太大的資訊量。所以為了彌補這些不足，就有了 Session 的出現。&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;session-是什麼&quot;&gt;Session 是什麼？&lt;/h3&gt;

&lt;p&gt;Session 是一種比 Cookie 更安全的狀態管理機制。&lt;/p&gt;

&lt;p&gt;既然 Session 是為了彌補 Cookie 的不足，它就必須要解決上面提到的 Cookie 可能會有的問題。所以 Session 會將狀態資訊存在 Sever 端，以避免 Client 端可以任意修改資訊，此方法也能避免儲存與傳輸的資料過大的問題。&lt;/p&gt;

&lt;p&gt;而為了要讓 Client 端知道 Session 儲存的資訊，Server 端會在 response 的 Cookie 中回傳一組 SessionID 讓 Client 儲存在 Cookie 裡，當下次 Client 送出 request 時，就在 Cookie 裡一起送出這組 SessionID，而 Server 就可以透過這組 SessionID 去驗證這個 Client 身份，並知道上一次儲存的狀態，然後回傳內容。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;
&lt;br /&gt;
&lt;a href=&quot;https://hulitw.medium.com/session-and-cookie-15e47ed838bc&quot;&gt;前端三十｜27. [WEB] Cookie &amp;amp; Session 是什麼？&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://dotblogs.com.tw/jimmyyu/2010/10/16/difference-between-stateful-and-stateless&quot;&gt;[ASP.NET]Stateful與Stateless&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://hulitw.medium.com/session-and-cookie-15e47ed838bc&quot;&gt;白話 Session 與 Cookie：從經營雜貨店開始&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://medium.com/@vicxu/authentication-那些小事上集-cookie-與-session-介紹-1da2d413afa2&quot;&gt;淺談 Authentication 上集：Cookie 與 Session 介紹&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python]asyncio 和 await</title>
   <link href="http://localhost:4000blog//python/2021/01/22/Python-asyncio-%E5%92%8C-await/"/>
   <updated>2021-01-22T19:26:00+08:00</updated>
   <id>http://localhost:4000/python/2021/01/22/[Python]asyncio 和 await</id>
   <content type="html">&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;requests&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;time&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;asyncio&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'https://www.google.com.tw/'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_event_loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;start_time&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;send_req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Send a request at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;seconds.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;run_in_executor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Receive a response at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;seconds.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;tasks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;send_req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;run_until_complete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wait&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;
&lt;br /&gt;
&lt;a href=&quot;https://ithelp.ithome.com.tw/articles/10199385&quot;&gt;python的asyncio模組(一)：異步執行的好處&lt;/a&gt;
&lt;br /&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[javascript]同步 v.s. 非同步與callback, promise, async, and await</title>
   <link href="http://localhost:4000blog//javascript/2021/01/16/javascript-callbac,-promise,-async,-and-await/"/>
   <updated>2021-01-16T16:49:00+08:00</updated>
   <id>http://localhost:4000/javascript/2021/01/16/[javascript]callbac, promise, async, and await</id>
   <content type="html">&lt;p&gt;之前因為在學 node.js 寫過&lt;a href=&quot;https://shihs.github.io/blog/javascript/node.js/2020/07/27/node.js-callback/&quot;&gt;一篇文章&lt;/a&gt;介紹同步非同步以及 callback，但之前沒有實際使用的經驗，有點懵懵懂懂，現在有了一些實際的應用的範例，所以想要再重新整理一次，並加上 promise、async, 與 await。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;JavaScript Engine 是以單執行緒（單線程/Single Thread）且同步（Synchronous）的方式執行。&lt;/p&gt;

&lt;h2 id=&quot;同步synchronous&quot;&gt;同步（Synchronous）&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;指程式必須等待前面的程式執行完才能執行。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;非同步asynchronous&quot;&gt;非同步（Asynchronous）&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;指程式不須等待前面的程式執行完就能執行。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;note&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;執行緒（thread）：執行緒是比程序（process）更小的單元，它是 CPU 的最小執行單元。是作業系統能夠進行運算排程的最小單位。一個程序（process），至少包含一個或多個執行緒。&lt;a href=&quot;https://medium.com/@yining1204/javascript-核心篇-學習筆記-chap-15-執行緒與同步-非同步-107802469752&quot;&gt;(source)&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;單執行緒：單執行的特性是&lt;strong&gt;順序執行&lt;/strong&gt;，當遇到比較耗時的任務時，還未執行的任務就會處於等待狀態，一定要等到前面的任務完成了，才會往後執行。&lt;a href=&quot;https://medium.com/@yining1204/javascript-核心篇-學習筆記-chap-15-執行緒與同步-非同步-107802469752&quot;&gt;(source)&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;因為 JavaScript 是以單執行緒且同步的方式去執行，它在執行程式碼的時候會按照順序將程式碼片段在堆疊中（stack）執行，而且一次只會執行一個程式碼片段（one thing at a time），只是當碰到非同步（Asynchronous）的任務時，會把它往後放，放到事件佇列(Event Queue)中，等所有的任務完成後才會回來執行。以下面程式碼為例，&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// setTimeout(callbackFunction, timeToDelay)&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'a'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'b'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;印出來的結果會是&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;b
a
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;setTimeout&lt;/code&gt; 是一個非同步的 Web API，JavaScript 執行到這段的時候會將 &lt;code class=&quot;highlighter-rouge&quot;&gt;setTimeout&lt;/code&gt; 放到 Event Queue 中等待，等 stack 中的任務都執行完才回來執行，所以會先印出&lt;code class=&quot;highlighter-rouge&quot;&gt;b&lt;/code&gt;再印&lt;code class=&quot;highlighter-rouge&quot;&gt;a&lt;/code&gt;。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;callback&quot;&gt;Callback&lt;/h2&gt;

&lt;p&gt;callback 是 javascript 中很常見的一種使用方式，它讓函式可以當成參數傳進另一個參數中使用，讓我們可以控制程式碼的流程。看以下範例，&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;This test function is done.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;This is main start.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;This is main end.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// This is main start.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// This test function is done.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// This is main end.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;但其實更多時候 callback 會牽扯到非同步 API 的狀況，像是下面的例子，&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 這邊模擬 test 這個 function 去 call 其他 API 要等待的情況&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 等了一秒後才會執行 console.log 這個函式&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;This test function is done.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;This is main start.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;This is main end.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// This is main start.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// This is main end.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// This test function is done.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;這次&lt;code class=&quot;highlighter-rouge&quot;&gt;callback()&lt;/code&gt;因為會有等待的情況，所以後面的 “This is main end.” 先被執行完。那假如想要&lt;code class=&quot;highlighter-rouge&quot;&gt;callback()&lt;/code&gt;執行完才執行下一行該怎麼做呢？（譬如說，這個&lt;code class=&quot;highlighter-rouge&quot;&gt;callback()&lt;/code&gt;在做的是使用&lt;code class=&quot;highlighter-rouge&quot;&gt;XMLHttpRequest()&lt;/code&gt;送 request 給某個網頁，而下面的程式碼必須等待網頁的 response 才可以執行下面的程式碼。）這時候只要把，執行 “This is main end.” 這行程式碼也當成 callback() 傳進去就行了。&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callback2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 這邊模擬 test 這個 function 去 call 其他 API 要等待的情況&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 等了一秒後才會執行 console.log 這個函式&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;This test function is done.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;callback2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;This is main start.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;This is main end.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// This is main start.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// This test function is done.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// This is main end.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;所以 callback 可以用來解決非同步的問題，但是當 callback 越來越多，就會形成 &lt;code class=&quot;highlighter-rouge&quot;&gt;callback hell&lt;/code&gt;，就像是下面這樣，&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;api1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Done with api1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;api2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Done with api2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;api1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;api2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;All function is done.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// &quot;Done with api1&quot;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// &quot;Done with api2&quot;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// &quot;All function is done.&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;甚至變成&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;api1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;api2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;api3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;api4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// bla bla bla&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;promise&quot;&gt;Promise&lt;/h2&gt;

&lt;p&gt;Promise 也是一個可以用來處理非同步操作的東西。Promise 通常包括三種狀態：&lt;code class=&quot;highlighter-rouge&quot;&gt;resolve&lt;/code&gt;、&lt;code class=&quot;highlighter-rouge&quot;&gt;reject&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;pending&lt;/code&gt;。&lt;code class=&quot;highlighter-rouge&quot;&gt;resolve&lt;/code&gt;代表成功，&lt;code class=&quot;highlighter-rouge&quot;&gt;rejetc&lt;/code&gt;代表失敗，&lt;code class=&quot;highlighter-rouge&quot;&gt;pending&lt;/code&gt;代表還在處理中, 結束狀態未知。&lt;code class=&quot;highlighter-rouge&quot;&gt;then()&lt;/code&gt;方法可以回傳&lt;code class=&quot;highlighter-rouge&quot;&gt;Promise&lt;/code&gt;物件。&lt;/p&gt;

&lt;p&gt;例如，現在想要使用&lt;code class=&quot;highlighter-rouge&quot;&gt;XMLHttpRequest()&lt;/code&gt; API傳送 request，我們需要等待 response 後才有後續動作。&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sleep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sendHttp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;https://www.google.com/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;xhr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;XMLHttpRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;xhr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;GET&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;xhr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;responseType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;document&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;xhr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

	&lt;span class=&quot;c1&quot;&gt;// 如果沒等待 response，status 和 response 會是 0 和 null&lt;/span&gt;
	&lt;span class=&quot;c1&quot;&gt;// console.log(xhr.status);&lt;/span&gt;
	&lt;span class=&quot;c1&quot;&gt;// console.log(xhr.response);&lt;/span&gt;

	&lt;span class=&quot;nx&quot;&gt;sleep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;xhr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;xhr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;sendHttp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;then()&lt;/code&gt; 其實是可以一直往後加，就是像&lt;code class=&quot;highlighter-rouge&quot;&gt;callback&lt;/code&gt;，想要前面的事情做完，才做下面，形成 Promise Chain，但這樣就又會變成 then hell。所以這時候出現了 async 和 await，讓程式碼看起來更容易閱讀。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;asyncawait&quot;&gt;Async/Await&lt;/h2&gt;

&lt;p&gt;async/await 還是會用到 promise，但不使用 then 去啟動。像剛剛上面的例子，可以改寫成下面這樣，&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sleep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sendHttp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;https://www.google.com/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;xhr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;XMLHttpRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;xhr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;GET&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;xhr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;responseType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;document&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;xhr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

	&lt;span class=&quot;kr&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sleep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;c1&quot;&gt;// 如果需要更多 sleep(2000)&lt;/span&gt;
	&lt;span class=&quot;c1&quot;&gt;// await sleep(2000);&lt;/span&gt;
		
	&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;xhr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;xhr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;sendHttp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;在&lt;code class=&quot;highlighter-rouge&quot;&gt;sendHttp()&lt;/code&gt;這個 function 前加上 async，並在&lt;code class=&quot;highlighter-rouge&quot;&gt;sleep(2000)&lt;/code&gt;前加上 await 就好，整體畫面看起來是不是容易閱讀很多？如果需要更多的&lt;code class=&quot;highlighter-rouge&quot;&gt;sleep(2000)&lt;/code&gt;，只需要多加 await 往下寫就好，整個畫面看起來容易閱讀很多。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;
&lt;br /&gt;
&lt;a href=&quot;https://medium.com/@hyWang/%E9%9D%9E%E5%90%8C%E6%AD%A5-asynchronous-%E8%88%87%E5%90%8C%E6%AD%A5-synchronous-%E7%9A%84%E5%B7%AE%E7%95%B0-c7f99b9a298a&quot;&gt;非同步(Asynchronous)與同步(Synchronous)的差異&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://hsiangfeng.github.io/javascript/20191209/1271823341/&quot;&gt;世界上誤解最大的語言 JavaScript 之 JS 到底是同步與非同步語言?!&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://pjchender.blogspot.com/2017/08/javascript-learn-event-loop-stack-queue.html&quot;&gt;[筆記] 理解 JavaScript 中的事件循環、堆疊、佇列和併發模式（Learn event loop, stack, queue, and concurrency mode of JavaScript in depth）&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://yu-jack.github.io/2018/07/22/promise/&quot;&gt;callback, promise, async/await 使用方式教學以及介紹 Part I&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[javascript]Traversing the DOM</title>
   <link href="http://localhost:4000blog//javascript/2020/12/03/javascript-Traversing-the-DOM/"/>
   <updated>2020-12-03T13:39:00+08:00</updated>
   <id>http://localhost:4000/javascript/2020/12/03/[javascript]Traversing the DOM</id>
   <content type="html">&lt;p&gt;整理 Treehouse 前端課程中 &lt;a href=&quot;https://teamtreehouse.com/library/javascript-and-the-dom-2&quot;&gt;JavaScript and the DOM&lt;/a&gt; 的最後一節 Traversing the DOM 內容。&lt;/p&gt;

&lt;p&gt;DOM Traversal 的意思是，可以透過一個 element 與這個 element 的關係去選取其他的 element。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;parentnode&quot;&gt;parentNode&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;parentNode&lt;/strong&gt;：顧名思義，選取被選取的 element 的 parent node。&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// 選取 id 為 myParagraph 的 node&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;paragraph&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementbyId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'myParagraph'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 

&lt;span class=&quot;c1&quot;&gt;// 使用 paragraph 選取它的 parent node&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;parent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;paragraph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parenNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 

&lt;span class=&quot;c1&quot;&gt;// 可以直接利用這個 parent node 做些事&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;removeChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;paragraph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 刪除 paragraph node&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;previouselementsibling--insertbefore&quot;&gt;previousElementSibling &amp;amp; insertBefore&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;previousElementSibling&lt;/strong&gt;：選取被選取的 element 前一個的 sibling。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;insertBefore&lt;/strong&gt;：將被選取的 element 插入在某一個 element 之前， &lt;code class=&quot;highlighter-rouge&quot;&gt;let insertedNode = parentNode.insertBefore(newNode, referenceNode)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;previousSibling v.s. previousSibling&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;為什麼 sibling 要特別加上 ‘Element’ 呢？因為如果使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;previousSibling&lt;/code&gt; 他會抓取前一個 sibling node，不管它是什麼。而我們&lt;a href=&quot;https://shihs.github.io/blog/html/2020/11/13/HTML-%E6%96%87%E4%BB%B6%E7%89%A9%E4%BB%B6%E6%A8%A1%E5%9E%8B-Document-Object-Model/&quot;&gt;前一篇&lt;/a&gt;講過， node 包含 document、element、attribute 和 text。所以使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;previousElementSibling&lt;/code&gt; 我們就只會抓前面的 element sibling。&lt;/p&gt;

&lt;p&gt;在課程的範例中，現在想要按了 Up 按鈕之後，該 &amp;lt;li&amp;gt; 就會上移。&lt;/p&gt;
&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;ul&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;li&amp;gt;&lt;/span&gt;grapes 
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;up&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Up&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;remove&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Remove&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;li&amp;gt;&lt;/span&gt;amethyst 
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;up&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Up&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;remove&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Remove&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;li&amp;gt;&lt;/span&gt;lavender 
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;up&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Up&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;remove&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Remove&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;li&amp;gt;&lt;/span&gt;plums 
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;up&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Up&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;remove&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Remove&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/ul&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// 選取 ul 的 tag&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;listDiv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;querySelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'.list'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;listUl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;listDiv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;querySelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'ul'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 按下 up 按鈕之後，該 li tag 會往上移&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;listUl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'click'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;className&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'up'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  	&lt;span class=&quot;c1&quot;&gt;// 被 click 的 button 的 parent node 就是 li&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;li&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parentNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;c1&quot;&gt;// 被選取的 li tag 的 previous element sibiling，也就是前一個 li tag&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;prevLi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;li&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;previousElementSibling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;c1&quot;&gt;// 這個 li 的 parent node&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ul&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;li&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parentNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;c1&quot;&gt;// 如果 prevLi 不是 null，換句話說，不是第一個&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;prevLi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;// 將被選取的 li tag 往前移&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;ul&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;insertBefore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;li&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;prevLi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;nextelementsibling--insertbefore&quot;&gt;nextElementSibling &amp;amp; insertBefore&lt;/h2&gt;

&lt;p&gt;按了 down button 之後，該 li 往下移。基本上概念和剛剛上面往前一是一樣的，只是現在使用 nextElementSibling，去選取後面的 element。&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;ul&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;li&amp;gt;&lt;/span&gt;grapes 
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;up&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Up&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;down&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Down&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;remove&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Remove&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;li&amp;gt;&lt;/span&gt;amethyst 
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;up&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Up&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;down&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Down&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;remove&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Remove&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;li&amp;gt;&lt;/span&gt;lavender 
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;up&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Up&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;down&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Down&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;remove&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Remove&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;li&amp;gt;&lt;/span&gt;plums 
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;up&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Up&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;down&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Down&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;remove&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Remove&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/ul&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// 選取 ul 的 tag&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;listDiv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;querySelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'.list'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;listUl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;listDiv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;querySelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'ul'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 按下 up 按鈕之後，該 li tag 會往上移&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;listUl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'click'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;className&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'down'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;li&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parentNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;nextLi&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;li&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nextElementSibling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ul&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;li&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parentNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nextLi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;ul&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;insertBefore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nextLi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;li&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;    
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;children&quot;&gt;children&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;.children&lt;/code&gt; 可以選取該 element 底下所有的 child element。&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;listDiv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;querySelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'.list'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;listUl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;listDiv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;querySelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'ul'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// lisUl 底下的 child，也就是 li tag&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;lis&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;listUl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;children&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;hr /&gt;

&lt;h2 id=&quot;firstchild--lastchild-vs-firstelementchild--lastelementchild&quot;&gt;firstChild &amp;amp; lastChild v.s. firstElementChild &amp;amp; lastElementChild&lt;/h2&gt;

&lt;p&gt;選取該 element 的第一個或最後一個 child。同樣的，firstElementChild &amp;amp; lastElementChild 選取的會是 element。&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[HTML]文件物件模型（Document Object Model）</title>
   <link href="http://localhost:4000blog//html/2020/11/13/HTML-%E6%96%87%E4%BB%B6%E7%89%A9%E4%BB%B6%E6%A8%A1%E5%9E%8B-Document-Object-Model/"/>
   <updated>2020-11-13T15:36:00+08:00</updated>
   <id>http://localhost:4000/html/2020/11/13/[HTML]文件物件模型（Document Object Model）</id>
   <content type="html">&lt;h3 id=&quot;dom-是什麼&quot;&gt;DOM 是什麼？&lt;/h3&gt;

&lt;p&gt;DOM 是 Document Object Model（文件物件模型）的縮寫，它是 HTML、XML 和 SVG 文件的程式介面（programming interface）；可以理解成 DOM 是文件和程式溝通的橋樑、介面，也可以說，DOM 是針對 HTML、XML 和 SVG 提供的一個 API，為了讓程式（ex. JavaScript）能夠操作文件的內容。DOM 將文件（HTML、XML 和 SVG）用樹狀結構表示（如下圖），樹中的每一個節點（node）皆為物件（object），DOM 定義了一些方法讓程式可以存取這些的節點（node）/ 物件（object）並改變文件架構、風格（CSS）和內容。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://teamtreehouse.com/library/what-is-the-dom&quot;&gt;Treehouse 的課程&lt;/a&gt;這樣解釋：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;The DOM is a represenation (map) of a webpage that JavaScript can use.&lt;/li&gt;
  &lt;li&gt;The DOM represents a web page as a tree-like structure.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;另外，寫網頁的時候常使用 JavaScript 來存取 DOM，但 DOM 並不屬於 JavaScript 語言的一部分，只是我們常用 JavaScript 去存取 DOM，換句話說，JavaScript 可以用其他語言取代，只是不常見。&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/DOM%20tree.png&quot; alt=&quot;DOM tree.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://teamtreehouse.com/library/what-is-the-dom&quot;&gt;The DOM represents a web page as a tree-like structure&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/DOM.gif&quot; alt=&quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://ithelp.ithome.com.tw/articles/10202689&quot;&gt;Example of DOM hierarchy in an HTML document&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;為什麼需要-dom&quot;&gt;為什麼需要 DOM？&lt;/h3&gt;

&lt;p&gt;為的是要讓不同的瀏覽器有一樣的文件物件模型標準，否則我們現在就都得針對不同的瀏覽器個別寫程式碼了。而這個標準是由 &lt;a href=&quot;https://zh.wikipedia.org/wiki/%E4%B8%87%E7%BB%B4%E7%BD%91%E8%81%94%E7%9B%9F&quot;&gt;W3C&lt;/a&gt;（全球資訊網協會）所定義的。&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;dom-解析&quot;&gt;DOM 解析&lt;/h3&gt;

&lt;p&gt;DOM 的樹狀結構中最重要的就是&lt;strong&gt;節點&lt;/strong&gt;（&lt;strong&gt;node&lt;/strong&gt;），而節點可以分為下列四種（以 HTML 為例，看上圖）：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Document&lt;/strong&gt;：Document 就是指這整份文件，就是這份 HTML 檔的開端，所有的 nodes 都會從 Document 開始往下。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Element&lt;/strong&gt;：Element 是指文件內的各個標籤，像是 &lt;code class=&quot;highlighter-rouge&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;&lt;/code&gt;、&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;body&amp;gt;&lt;/code&gt;、&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;div&amp;gt;&lt;/code&gt;、&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;p&amp;gt;&lt;/code&gt; 等等各種 HTML Tag 都被歸類在 Element。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Attribute&lt;/strong&gt;：Attribute 是指各個標籤內的相關屬性，像是 &lt;code class=&quot;highlighter-rouge&quot;&gt;name&lt;/code&gt;、&lt;code class=&quot;highlighter-rouge&quot;&gt;class&lt;/code&gt;、&lt;code class=&quot;highlighter-rouge&quot;&gt;href&lt;/code&gt; 等等都是被歸類在 Attribute。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Text&lt;/strong&gt;：Text 是指被各個標籤包起來的文字，像是 &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;h1&amp;gt;Hi&amp;lt;/h1&amp;gt;&lt;/code&gt; 中， Hi 被 &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;h1&amp;gt;&lt;/code&gt; 這個 Element 包起來，因此 Hi 就是此 Element 的 Text。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;api--dom--javascript&quot;&gt;API = DOM + JavaScript&lt;/h3&gt;

&lt;p&gt;這邊介紹一些常見的 DOM API，&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'idName'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementsByTagName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'tagName'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementsByClassName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'className'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// selector 可以是 id:#idName, class:.className, tag:tagName, or CSS pseudo-class&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;querySelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'selector'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 
&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;querySelectorAll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'selector'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;補充bom--window&quot;&gt;補充：BOM &amp;amp; window&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;BOM&lt;/strong&gt; 是 Browser Object Model（瀏覽器物件模型）的縮寫。DOM 是文件和程式溝通的接口，BOM 則是和瀏覽器溝通的接口。像是跳轉到其他頁面、螢幕大小的參數等等可以操作的方法或屬性。&lt;/p&gt;

&lt;p&gt;同樣的 BOM 也有很多屬於它的 object，像是 &lt;code class=&quot;highlighter-rouge&quot;&gt;location&lt;/code&gt;，下面這個程式碼可以讓瀏覽器跳轉到另一個頁面：&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;href&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;http://www.xxxx.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;而 &lt;strong&gt;windows&lt;/strong&gt; 也是 &lt;strong&gt;BOM&lt;/strong&gt; 的一個 object。「關閉視窗」可以這樣寫，&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;
&lt;br /&gt;
&lt;a href=&quot;https://ithelp.ithome.com.tw/articles/10202689&quot;&gt;Day03-深入理解網頁架構：DOM&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.wibibi.com/info.php?tid=379&quot;&gt;W3C DOM&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://developer.mozilla.org/zh-TW/docs/Web/API/Document_Object_Model&quot;&gt;文件物件模型 (DOM)&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.fooish.com/javascript/dom/&quot;&gt;JavaScript DOM (Document Object Model)&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.zhihu.com/question/33453164&quot;&gt;DOM, DOCUMENT, BOM, WINDOW 有什么区别?&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[node.js]非同步（Asynchronous）、同步（Synchronous）、callback</title>
   <link href="http://localhost:4000blog//javascript/node.js/2020/07/27/node.js-callback/"/>
   <updated>2020-07-27T10:26:00+08:00</updated>
   <id>http://localhost:4000/javascript/node.js/2020/07/27/[node.js]callback</id>
   <content type="html">&lt;p&gt;簡單介紹 node.js 裡重要的「非同步（Asynchronous）」概念，那既然有「非同步（Asynchronous）」當然就會有「同步（Synchronous）」，以及因為「非同步（Asynchronous）」而衍伸出的重要 callback 概念。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Node.js 是一個&lt;strong&gt;單執行緒&lt;/strong&gt;且非同步的語言。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;note&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;執行緒：執行緒是比程序更小的單元，它是 cpu 的最小執行單元。是作業系統能夠進行運算排程的最小單位。一個程序，至少包含一個或多個執行緒。&lt;a href=&quot;https://medium.com/@yining1204/javascript-核心篇-學習筆記-chap-15-執行緒與同步-非同步-107802469752&quot;&gt;(source)&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;單執行緒：單執行的特性是&lt;strong&gt;順序執行&lt;/strong&gt;，當遇到比較耗時的任務時，還未執行的任務就會處於等待狀態，一定要等到前面的任務完成了，才會往後執行。&lt;a href=&quot;https://medium.com/@yining1204/javascript-核心篇-學習筆記-chap-15-執行緒與同步-非同步-107802469752&quot;&gt;(source)&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Asynchronous（非同步）&amp;amp; Event queue（事件佇列）&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;以上提到，單執行緒「還未執行的任務就會處於等待狀態」，所謂的「未執行任務」必須要是&lt;strong&gt;非同步（Asynchronous）&lt;/strong&gt;function 才行，而「等待狀態」是指那些任務會被放到 Event queue，而 Event queue 的事件在所有事件完成前不會被執行。簡單的說，程式碼一行一行執行，當遇到&lt;strong&gt;非同步（Asynchronous）&lt;/strong&gt;function 時，就會先執行下一行的任務，而這個還未被執行的&lt;strong&gt;非同步（Asynchronous）&lt;/strong&gt;function 就會被放到 Event queue 中等到最後才執行。&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;同步synchronous&quot;&gt;同步（Synchronous）&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;指程式必須等待前面的程式執行完才能執行。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果 function 是&lt;strong&gt;同步(Synchronous)&lt;/strong&gt;，那就不管如何都會等這行執行完才執行下一行程式碼。例如，&lt;code class=&quot;highlighter-rouge&quot;&gt;writeFileSync()&lt;/code&gt;就是同步(Synchronous) function。但先等這行程式碼執行完再執行下一行有什麼問題呢？假如今天要寫的檔案內容超級大，那麼所有工作就會全部停擺，等到這行程式碼完成才能進行，而&lt;strong&gt;非同步（Asynchronous）&lt;/strong&gt;function 便能解決這個問題。&lt;/p&gt;

&lt;h3 id=&quot;非同步asynchronous&quot;&gt;非同步（Asynchronous）&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;指程式不須等待前面的程式執行完就能執行。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;下面舉一個常見的非同步 function，&lt;strong&gt;setTimeout()&lt;/strong&gt;（第一個參數為時間到時要被執行的函式，第二個參數為要延遲的時間（毫秒）），setTimeout() 會在第二個參數的延遲時間後執行第一個參數的函式。&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Timer is done!'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Hello'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Hi'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;以上程式碼印出來的結果會是，&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Hello
Hi
Timer is done!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;因為 setTimeout() 裡的任務被放到 Event queue 中了，必須等到下面兩行程式碼跑完才接著跑 setTimeout() 裡的東西。&lt;/p&gt;

&lt;h3 id=&quot;callback&quot;&gt;callback&lt;/h3&gt;

&lt;p&gt;但假如果我們現在就是想要讓程式執行完，才接著下一個任務該怎麼辦呢？所以這時候有了 &lt;strong&gt;callback&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;callback 讓我們把一個函式丟進另一個函式當參數，讓我們可以控制程式碼的流程。先看一個簡單的範例，&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callbackSleepWorker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'OK, Im wake up !'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ICallYouWhenIDone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callbackWorker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'OK, Im first.'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;callbackWorker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;ICallYouWhenIDone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callbackSleepWorker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;這個結果會先印出 ‘OK, Im first.’ 接著再印出 ‘OK, Im wake up !’。&lt;/p&gt;

&lt;p&gt;上面這個例子大概還看不太出來為什麼需要 callback，如果現在這個函式是個非同步函式呢？&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;money&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;slower&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;money&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;faster&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'I have '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;money&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;slower&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;faster&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;以上程式碼印出來的會是：I have null。&lt;/p&gt;

&lt;p&gt;明明是先跑了 slower() 但 money 卻沒先被負值，這是因為 setTimeout() 是個非同步 function，所以它會先被放到 event queue 中，faster() 就先執行了。那如果我們現在想要讓 slower() 百分之百先執行可以怎麼做呢？&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;money&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;slower&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callbackWorker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;money&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;callbackWorker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;faster&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'I have '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;money&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;slower&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;faster&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;這時候印出來的結果就會是：I have 30&lt;/p&gt;

&lt;p&gt;現在有個任務是，讀檔案並計算長度&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'fs'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// fs.readFile(filename, callback(err, content))&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;fs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;readFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'test.txt'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'finish'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'not finish'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;本來 readFile() 這個 function 會先被放到 event queue 裡，然後接著印出 ‘not finish’，但我們現在把要讀檔案這個任務放在 callback 裡，所以變成只要讀完檔案就會立刻執行，’not finish’ 會等到檔案讀完才會進行。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;
&lt;br /&gt;
&lt;a href=&quot;https://medium.com/@Whien/js20min-day-18-關於回呼生活化-callback-1a112db1a788&quot;&gt;JS20min Day — 18 關於回呼生活化 (Callback)&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://larry850806.github.io/2016/06/16/nodejs-async/&quot;&gt;[Node.js] 理解 Node.js 事件驅動&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://blog.techbridge.cc/2019/10/05/javascript-async-sync-and-callback/&quot;&gt;JavaScript 中的同步與非同步（上）：先成為 callback 大師吧！&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://wcc723.github.io/javascript/2017/12/07/javascript-event-queue/&quot;&gt;鐵人賽：一次只能做一件事情的 JavaScript&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://medium.com/@yining1204/javascript-核心篇-學習筆記-chap-15-執行緒與同步-非同步-107802469752&quot;&gt;JavaScript 核心篇 學習筆記: Chap.15–執行緒與同步/非同步&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Neural Network]Neural Network 3 - Backpropagation</title>
   <link href="http://localhost:4000blog//neural%20network/2020/02/13/Neural-Network-Neural-Network-3/"/>
   <updated>2020-02-13T14:35:00+08:00</updated>
   <id>http://localhost:4000/neural%20network/2020/02/13/[Neural Network]Neural Network 3</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;https://shihs.github.io/blog/neural%20network/2020/01/23/Neural-Network-Neural-Network-2/&quot;&gt;前面&lt;/a&gt;介紹了 neural network 使用 Gradient descent 來找 cost function 的最小值，那這篇要來介紹 neural network 如何使用 &lt;strong&gt;Backpropagation&lt;/strong&gt; 這個演算法讓 neural network 訓練過程中更有效率。&lt;/p&gt;

&lt;p&gt;這篇是&lt;a href=&quot;https://www.youtube.com/watch?v=IHZwWFHWa-w&amp;amp;list=PLZHQObOWTQDNU6R1_67000Dx_ZCJB-3pi&amp;amp;index=2&quot;&gt;Neural networks&lt;/a&gt;的課程筆記。另外，覺得李宏毅老師的&lt;a href=&quot;https://www.youtube.com/watch?v=ibJpTrp5mcE&quot;&gt;課程&lt;/a&gt;也講解的很清楚，所以我會搭配老師的課程內容。李宏毅老師和主要課程使用的符號不太ㄧ樣，但我還是使用他們原本各自的符號。&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;gradient-descent&quot;&gt;Gradient Descent&lt;/h3&gt;

&lt;p&gt;Gradient descent 的目的是要找到 neural network 的 parameters 的最佳解。&lt;/p&gt;

&lt;p&gt;Network parameters: 
&lt;script type=&quot;math/tex&quot;&gt;\theta = {\{w_1, w_2,..., b_1, b_2,...\}}&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;Gradient: 
&lt;script type=&quot;math/tex&quot;&gt;\nabla L(\theta) = \begin{bmatrix}
    \partial L(\theta)/\partial w_1 \\
    \partial L(\theta)/\partial w_2 \\
    \vdots \\
    \partial L(\theta)/\partial b_1 \\
    \partial L(\theta)/\partial b_2 \\
    \vdots 
\end{bmatrix}&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;初始 parameters: &lt;script type=&quot;math/tex&quot;&gt;\theta^0&lt;/script&gt;，計算 &lt;script type=&quot;math/tex&quot;&gt;\nabla L(\theta^0)&lt;/script&gt;，則 &lt;script type=&quot;math/tex&quot;&gt;\theta^1 = \theta^0 - \eta \nabla L(\theta^0)&lt;/script&gt;，接著可以再繼續算出 &lt;script type=&quot;math/tex&quot;&gt;\theta_2, \theta_3...&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;在 neural network 裡 Gradient 的最大問題就是，neural network 有太多的參數，所以這裡我們要介紹的 Backpropagation 就是一個比較有效的計算 Gradient 的演算法。也就是說，Backpropagation 基本上就是 Gradient Descent，但是是一個有效率的演算法。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;前面我們舉的例子是手寫辨識，input 加上兩層的 hideen layers，總共的 weight 和 bias 加起來有 13,002 個參數。如下圖，&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/neural%20network%208.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;為了講解方便，我們現在把整個 nerual network 簡化成每層只有一個神經元。如下圖，第一個神經元是 input，最後一個神經元是 outpu，中間是兩層的 hidden layer，所以 cost function 可以寫成，&lt;script type=&quot;math/tex&quot;&gt;C(w_1, b_1, w_2, b_2, w_3, b_3)&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/simple%20neural%20network.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;為了說明 Backpropagation 現在我們再把範圍縮小到最後一層的 hidden layer 和 output，如下圖。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Backpropagation.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我們令最後的 output 為 &lt;script type=&quot;math/tex&quot;&gt;a^{(L)}&lt;/script&gt; 表示它是在第 L 層，而 hidden layer 為  &lt;script type=&quot;math/tex&quot;&gt;a^{(L-1)}&lt;/script&gt; 表示在第 L-1 層，所以上標就只是用來表達它們各自在哪一層而已。&lt;/p&gt;

&lt;p&gt;在 &lt;script type=&quot;math/tex&quot;&gt;a^{(L-1)}&lt;/script&gt; 後的 &lt;script type=&quot;math/tex&quot;&gt;y&lt;/script&gt; 是我們期望的輸出結果，我們希望 &lt;script type=&quot;math/tex&quot;&gt;y=1&lt;/script&gt;，也就是說，這裡的 cost 值會是，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;C_0(...) = (a^{(L)} - y)^ 2 .......... (1)&lt;/script&gt;

&lt;p&gt;以上圖的例子就會是，&lt;script type=&quot;math/tex&quot;&gt;(0.66 - 1)^2&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;接著我們來看每一個神經元的值。根據前面學過的，我們知道每一個神經元都是由前面的 weight 和 bias 算出來了，也就是說&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;a^{(L)} = \sigma (w^{(L)} a^{(L-1)} + b^{(L)})&lt;/script&gt;

&lt;p&gt;那為了方便，我們把 sigmoid function 裡的式子用一個符號表示，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;z^{(L)} = w^{(L)} a^{(L-1)} + b^{(L)} .......... (2)&lt;/script&gt;

&lt;p&gt;而 &lt;script type=&quot;math/tex&quot;&gt;a^{(L)}&lt;/script&gt; 就可以寫成，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;a^{(L)} = \sigma (z^{(L)}) .......... (3)&lt;/script&gt;

&lt;hr /&gt;

&lt;p&gt;我們現在有了上面三個式子，&lt;/p&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;C_0(...) = (a^{(L)} - y)^ 2 .......... (1)&lt;/script&gt;
&lt;br /&gt;
&lt;script type=&quot;math/tex&quot;&gt;z^{(L)} = w^{(L)} a^{(L-1)} + b^{(L)} .......... (2)&lt;/script&gt;
&lt;br /&gt;
&lt;script type=&quot;math/tex&quot;&gt;a^{(L)} = \sigma (z^{(L)}) .......... (3)&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;那我們現在要如何計算權重 &lt;script type=&quot;math/tex&quot;&gt;w^{(L)}&lt;/script&gt; 對於 cost function 的影響程度呢？換句話說，我們想要知道 cost function 對 &lt;script type=&quot;math/tex&quot;&gt;w^{(L)}&lt;/script&gt; 的偏微分 &lt;script type=&quot;math/tex&quot;&gt;\frac{\partial C_0}{\partial w^{(L)}}&lt;/script&gt;。&lt;/p&gt;

&lt;p&gt;根據 &lt;strong&gt;chain rule&lt;/strong&gt;，我們可以再將上式改寫成，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{\partial C_0}{\partial w^{(L)}} = \frac{\partial z^{(L)}}{\partial w^{(L)}} \frac{\partial a^{(L)}}{\partial z^{(L)}} \frac{\partial C_0}{\partial a^{(L)}}&lt;/script&gt;

&lt;p&gt;下一個步驟要來計算每一個值，我們可以根據上面式子得到的 (1)(2)(3) 得到，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{\partial C_0}{\partial a^{(L)}} = 2(a^{(L)} - y)&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{\partial a^{(L)}}{\partial z^{(L)}} = \sigma' (z^{(L)})&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{\partial z^{(L)}}{\partial w^{(L)}} = a^{(L-1)}&lt;/script&gt;

&lt;p&gt;所以可以將式子整理成，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align}
\frac{\partial C_0}{\partial w^{(L)}} &amp; = \frac{\partial z^{(L)}}{\partial w^{(L)}} \frac{\partial a^{(L)}}{\partial z^{(L)}} \frac{\partial C_0}{\partial a^{(L)}} \\
&amp; = a^{(L-1)} \times \sigma' (z^{(L)}) \times 2(a^{(L)} - y)
\end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;而這只是其中一個 training sample 算出來的 cost，而總代價函數應該是所有 training data 的平均，也就是&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{\partial C}{\partial w^{(L)}} = \frac{1}{n} \sum_{k=0}^{n-1} \frac{\partial C_k}{\partial w^{(L)}}&lt;/script&gt;

&lt;p&gt;而這其實只是 gradient 裡其中的一個 compenent，&lt;/p&gt;

&lt;p&gt;Gradient:&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\nabla C = \begin{bmatrix}
    \frac{\partial C}{\partial w^{(1)}} \\
    \frac{\partial C}{\partial b^{(1)}} \\
    \frac{\partial C}{\partial w^{(2)}} \\
    \frac{\partial C}{\partial b^{(2)}} \\
    \vdots \\
    \frac{\partial C}{\partial w^{(L)}} \\
    \frac{\partial C}{\partial b^{(L)}} \\
\end{bmatrix}&lt;/script&gt;

&lt;p&gt;如果要計算的是 bias 的偏微分，式子就會是，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align}
\frac{\partial C_0}{\partial b^{(L)}} &amp; = \frac{\partial z^{(L)}}{\partial b^{(L)}} \frac{\partial a^{(L)}}{\partial z^{(L)}} \frac{\partial C_0}{\partial a^{(L)}} \\
&amp; = 1 \times \sigma' (z^{(L)}) \times 2(a^{(L)} - y)
\end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;接下來，我們來看這個 cost function 對上一層 activation 的敏感度，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align}
\frac{\partial C_0}{\partial a^{(L-1)}} &amp; = \frac{\partial z^{(L)}}{\partial a^{(L-1)}} \frac{\partial a^{(L)}}{\partial z^{(L)}} \frac{\partial C_0}{\partial a^{(L)}} \\
&amp; = w^{(L)} \times \sigma' (z^{(L)}) \times 2(a^{(L)} - y)
\end{align} %]]&gt;&lt;/script&gt;

&lt;hr /&gt;

&lt;p&gt;前面我們看的是只有一個神經元的狀況，回到真實的 neural network 結構。一個神經元是來自前面很多神經元與 weight 和 bias 的計算，且一個 training data 的 cost 值是每個 output 減 expected value 平方的和。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Backpropagation%20cost.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Backpropagation%202.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;基本上，所有的式子都和只有一個神經元是一樣的，唯一有變化的是，&lt;script type=&quot;math/tex&quot;&gt;\frac{\partial C_0}{\partial a_k^{(L-1)}}&lt;/script&gt;&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\frac{\partial C_0}{\partial a_k^{(L-1)}} = \sum_{j=0}^{n_L-1}\frac{\partial z_j^{(L)}}{\partial a_k^{(L-1)}} \frac{\partial a_j^{(L)}}{\partial z_j^{(L)}} \frac{\partial C_0}{\partial a_j^{(L)}}&lt;/script&gt;

&lt;p&gt;因為，一個神經元會向下影響其他所有與它連接的神經元，所以必須將它們全部加起來。&lt;/p&gt;

&lt;p&gt;根據以上，只要不斷往回算就可以了。&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=ibJpTrp5mcE&quot;&gt;ML Lecture 7: Backpropagation&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://medium.com/ai-academy-taiwan/back-propagation-3946e8ed8c55&quot;&gt;Back-propagation&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[NLP]CNN in NLP</title>
   <link href="http://localhost:4000blog//nlp/machine%20learning/neural%20network/2020/02/02/NLP-CNN-in-NLP/"/>
   <updated>2020-02-02T10:35:00+08:00</updated>
   <id>http://localhost:4000/nlp/machine%20learning/neural%20network/2020/02/02/[NLP]CNN in NLP</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;https://shihs.github.io/blog/machine%20learning/neural%20network/2020/02/01/Machine-Learning-Convolution-Neural-N卷積神經網路/&quot;&gt;前一篇&lt;/a&gt;介紹了 CNN 的概念，這篇要來介紹 CNN 如何運用在 NLP 中。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Yoon Kim 在 2014 年發表論文 &lt;a href=&quot;https://arxiv.org/abs/1408.5882&quot;&gt;Convolutional Neural Networks for Sentence Classification&lt;/a&gt; 提出將 CNN 運用在 NLP。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/CNN%20in%20NLP.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;上圖就是 Yoon Kim 論文提出的方法概念，和在圖像運用的 CNN 一樣，有 convolution 和 pooling，然後最後是一個 softmax function。&lt;/p&gt;

&lt;p&gt;我們先來看第一步，&lt;/p&gt;

&lt;h2 id=&quot;convolution&quot;&gt;Convolution&lt;/h2&gt;

&lt;p&gt;在圖片中，我們將圖片看成一個 nxm 的矩陣，每一格都是一個數字，而我們可以使用 filter(kernel) 來獲取想要的特徵。而在 NLP 中，如果想要將文字表示成數字，可以使用 word embedding，例如 word2vect、glove，或是 one-hot encode 的詞彙到索引詞向量表示方法。&lt;/p&gt;

&lt;p&gt;上圖中的第一個矩陣是 ‘I love this movie very much!’ 的 word embedding 矩陣，每一列代表一個 word 的向量。總共有七個字，每一個字用一個 5 維的向量表示，所以用一個 7x5 的矩陣表示。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;filter&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;現在知道了輸入的表示法，那在 convolution 中最重要的 filter 要如何使用呢？&lt;/p&gt;

&lt;p&gt;一般 CNN 的 filter 會是一個方正矩陣，從左往右再往下滑動，但在 NLP 中，filter 矩陣會和向量的維度一樣，但一次可能滑動兩個字 (2-grams)、三個字 (3-grams)等等，這個稱作 region size，看上圖的第二大行，有紅色系、綠色系、黃色系三種 filter，分別代表 region size 4、3 和 2，且各有兩個，也就是總共有六個 filter。(像這樣移動的方式只有一個方向叫做，&lt;a href=&quot;https://blog.goodaudience.com/introduction-to-1d-convolutional-neural-networks-in-keras-for-time-sequences-3a7ff801a2cf&quot;&gt;1D converlution&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;整張大圖的第三行，就是輸入矩陣 (channel) 乘上 filter 之後的結果。&lt;/p&gt;

&lt;h2 id=&quot;pooling&quot;&gt;Pooling&lt;/h2&gt;

&lt;p&gt;Convolution 的下一步是 pooling，上圖使用的是 max pooling，也就是取最大的值。&lt;/p&gt;

&lt;p&gt;pooling 後 flatten 所有值，最後一步 softmax function 便完成了。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=wNBaNhvL4pg&quot;&gt;Simple Deep Neural Networks for Text Classification&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://kiseliu.github.io/2016/09/22/understanding-convolutional-neural-networks-for-nlp/&quot;&gt;Understanding Convolutional Neural Networks for NLP
&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://blog.goodaudience.com/introduction-to-1d-convolutional-neural-networks-in-keras-for-time-sequences-3a7ff801a2cf&quot;&gt;Introduction to 1D Convolutional Neural Networks in Keras for Time Sequences&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Neural Network]Convolution Neural Network 卷積神經網路</title>
   <link href="http://localhost:4000blog//machine%20learning/neural%20network/2020/02/01/Machine-Learning-Convolution-Neural-N%E5%8D%B7%E7%A9%8D%E7%A5%9E%E7%B6%93%E7%B6%B2%E8%B7%AF/"/>
   <updated>2020-02-01T10:45:00+08:00</updated>
   <id>http://localhost:4000/machine%20learning/neural%20network/2020/02/01/[Machine Learning]Convolution Neural N卷積神經網路</id>
   <content type="html">&lt;p&gt;之前寫了兩篇的 CNN 課程筆記，但後來因為太忙沒有繼續看完課程就中斷了 T_T。
&lt;br /&gt;
&lt;a href=&quot;https://shihs.github.io/blog/machine%20learning/2019/02/25/Machine-Learning-Covolutional-Neural-Networks(CNN)/&quot;&gt;[Machine Learning]Covolutional Neural Networks(CNN)(1)&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://shihs.github.io/blog/machine%20learning/2019/03/02/Machine-Learning-Covolutional-Neural-Networks(CNN)(2)/&quot;&gt;[Machine Learning]Covolutional Neural Networks(CNN)(2)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;卷積神經網絡(Convolutional Neural Network)簡稱 CNN，主要應用在影像辨識，這篇想要簡單的說明 CNN 的概念。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;先看下面兩張 CNN 概念圖&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.kdnuggets.com/2016/11/intuitive-explanation-convolutional-neural-networks.html/3&quot;&gt;圖片來源&lt;/a&gt;
&lt;img src=&quot;http://localhost:4000/blog/img/posts/CNN%20%E6%A6%82%E5%BF%B5%E5%9C%96%201.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://medium.com/jameslearningnote/資料分析-機器學習-第5-1講-卷積神經網絡介紹-convolutional-neural-network-4f8249d65d4f&quot;&gt;圖片來源&lt;/a&gt;
&lt;img src=&quot;http://localhost:4000/blog/img/posts/CNN%20%E6%A6%82%E5%BF%B5%E5%9C%96%202.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;從上圖可以看到整個流程各經過兩次的 Convolution、Pooling 和 Fully Connected，所以其實只要搞懂 &lt;strong&gt;Convolution&lt;/strong&gt;、&lt;strong&gt;Pooling&lt;/strong&gt; 和 &lt;strong&gt;Fully Connected&lt;/strong&gt; 分別在做什麼就可以掌握 CNN 了。&lt;/p&gt;

&lt;p&gt;整個流程是，前面的 Convolution 和 Pooling (又稱為 subsampling) 在做的是 feature extraction (特徵擷取)，而 Fully connection 在做的是 classification (分類辨識)。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;1-convolution-layer-卷積層&quot;&gt;1. Convolution Layer 卷積層&lt;/h2&gt;

&lt;p&gt;Convolution Layer 由 filter 和激活函數 (ex. Relu) 所構成。&lt;/p&gt;

&lt;p&gt;下圖是常見的美圖效果，其實就是使用 filter 達成的
&lt;a href=&quot;https://medium.com/雞雞與兔兔的工程世界/機器學習-ml-note-convolution-neural-network-卷積神經網路-bfa8566744e9&quot;&gt;圖片來源&lt;/a&gt;
&lt;img src=&quot;http://localhost:4000/blog/img/posts/%E7%BE%8E%E5%9C%96.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;卷積 (Convolution) 做的是特徵擷取，而不同的效果在做的就是對不同的特徵做擷取。例如，銳化效果在做的就是強化邊緣的特徵，也就是加強擷取出邊緣的特徵。&lt;/p&gt;

&lt;p&gt;那所以卷積到底是如何擷取不同的特徵的呢？
&lt;a href=&quot;https://icecreamlabs.com/2018/08/19/3x3-convolution-filters%E2%80%8A-%E2%80%8Aa-popular-choice/&quot;&gt;圖片來源&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Convolution.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;特徵擷取的方式是使用 Filter (或稱作 Kernel) 來萃取圖片中的特徵，上圖是一個 3x3 window 的 filter，而算法就是像圖那樣移動 (移動的步數是 stride)，將數字相乘後再相加 (詳情可以看之前的&lt;a href=&quot;https://shihs.github.io/blog/machine%20learning/2019/02/25/Machine-Learning-Covolutional-Neural-Networks(CNN)/&quot;&gt;筆記1&lt;/a&gt;、&lt;a href=&quot;https://shihs.github.io/blog/machine%20learning/2019/03/02/Machine-Learning-Covolutional-Neural-Networks(CNN)(2)/&quot;&gt;筆記2&lt;/a&gt;，包括 padding 和 stride 的概念)。美圖的不同效果就是使用不同的 Filter (Kernel) 做出來的。&lt;/p&gt;

&lt;p&gt;下圖是不同的 filter 做出來的效果
&lt;a href=&quot;https://icecreamlabs.com/2018/08/19/3x3-convolution-filters%E2%80%8A-%E2%80%8Aa-popular-choice/&quot;&gt;圖片來源&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/kernels.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;現在明白了 filter，但再回去看最一開始的流程圖，為什麼 converlution 有三個呢？這是因為使用了三個 filter 去擷取不同的特徵。&lt;/p&gt;

&lt;p&gt;看完 filter 再看 Relu。可以看到最上圖圖中有個 Relu，也就是將所有計算出來結果的負值都變為 0。
&lt;a href=&quot;https://medium.com/jameslearningnote/資料分析-機器學習-第5-1講-卷積神經網絡介紹-convolutional-neural-network-4f8249d65d4f&quot;&gt;圖片來源&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Relu.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;如果是彩色的圖，通常會有三個 channel (RGB)，也就是一開始輸入的 image 有三個，可以看下圖
&lt;a href=&quot;https://zhuanlan.zhihu.com/p/42559190&quot;&gt;圖片來源&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/three%20images%20convolution.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;2-pooling-layer-池化層&quot;&gt;2. Pooling Layer 池化層&lt;/h2&gt;

&lt;p&gt;pooling 又稱為 subsampling，是為了提取特定區域主要特徵，但又想要減少參數的數量，以防止模型過擬合，常用的是 max pooling，也就是取該區域最大的值，也有 average pooling，也就是取該區域的平均值。
&lt;a href=&quot;https://zhuanlan.zhihu.com/p/42559190&quot;&gt;圖片來源&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;下圖是取 max pooling，使用 2x2 的 window，且 stride 為 2&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/pooling.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;3-fully-connected-layer-全連接層&quot;&gt;3. Fully Connected Layer 全連接層&lt;/h2&gt;

&lt;p&gt;Fully Connected Layer 主要是進行 Flattening 平坦化，將最後的矩陣轉換成一維，然後再使用傳統的 neural network + softmax()。&lt;/p&gt;

&lt;p&gt;參考我之前的&lt;a href=&quot;https://shihs.github.io/blog/neural%20network/2020/01/22/Neural-Network-Neural-Network/&quot;&gt;[Neural Network]Neural Network 1&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;以上就是 CNN 的流程。&lt;/p&gt;

&lt;p&gt;最後提一下，從上面的過程我們可以知道，CNN 整個過程中需要求解的參數是&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Convolution layer filters&lt;/li&gt;
  &lt;li&gt;Full Connected Layer filters&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;a href=&quot;http://doremi2016.logdown.com/posts/2017/01/25/convolutional-neural-networks-cnn&quot;&gt;來源&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;
&lt;br /&gt;
&lt;a href=&quot;https://medium.com/jameslearningnote/資料分析-機器學習-第5-1講-卷積神經網絡介紹-convolutional-neural-network-4f8249d65d4f&quot;&gt;[資料分析&amp;amp;機器學習] 第5.1講: 卷積神經網絡介紹(Convolutional Neural Network)
&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://medium.com/雞雞與兔兔的工程世界/機器學習-ml-note-convolution-neural-network-卷積神經網路-bfa8566744e9&quot;&gt;[機器學習 ML NOTE]Convolution Neural Network 卷積神經網路&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://zhuanlan.zhihu.com/p/42559190&quot;&gt;【DL笔记6】从此明白了卷积神经网络（CNN）&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://doremi2016.logdown.com/posts/2017/01/25/convolutional-neural-networks-cnn&quot;&gt;Convolutional Neural Networks’ (CNN) Backward Propagation&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Neural Network]Neural Network 2 - Gradient descent</title>
   <link href="http://localhost:4000blog//neural%20network/2020/01/23/Neural-Network-Neural-Network-2/"/>
   <updated>2020-01-23T16:56:00+08:00</updated>
   <id>http://localhost:4000/neural%20network/2020/01/23/[Neural Network]Neural Network 2</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;https://shihs.github.io/blog/neural%20network/2020/01/22/Neural-Network-Neural-Network/&quot;&gt;上一篇&lt;/a&gt;說明了神經網路的基本原理，這篇我們要講解神經網路是如何學習的 - Gradient descent。&lt;/p&gt;

&lt;p&gt;這篇是&lt;a href=&quot;https://www.youtube.com/watch?v=IHZwWFHWa-w&amp;amp;list=PLZHQObOWTQDNU6R1_67000Dx_ZCJB-3pi&amp;amp;index=2&quot;&gt;Neural networks&lt;/a&gt;的課程筆記。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;在 Machine Learning 裡我們使用 training data 訓練得到一個 model，但這「訓練」到底是怎麼訓練的呢？訓練的過程，通常是要找到最小的 cost，也就是最後的結果與真實值差距越小越好。&lt;/p&gt;

&lt;p&gt;在 Neural Network 我們要訓練的變數就是&lt;a href=&quot;https://shihs.github.io/blog/neural%20network/2020/01/22/Neural-Network-Neural-Network/&quot;&gt;前面一篇&lt;/a&gt;提到的 weight 和 bias。一開始我們隨機的給予這些數字，然後在一次次的學習中去改進 weight 和 bias 的值，找到最小的成本函數。&lt;/p&gt;

&lt;p&gt;在課程的例子裡，Neural Network function 的 input 是 784 個 pixel 的數字，output 是 10 個數字，0 到 9 的機率，parameters 是 weight 和 bias。但在cost function 中，weight 和 bias 變成了 input，而 output 就是 cost 的值，parameters 則是很多的 training pairs。&lt;/p&gt;

&lt;p&gt;我們可以把 cost function 這樣表示，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;C(w_1, w_2,..., b_1, b_2, ....) = cost&lt;/script&gt;

&lt;p&gt;cost 的算法是 Neural Network 算出來的值，扣掉正確值然後平方相加。學習過程中，我們將所有 training data 的 cost 相加平均（average cost of all training data），希望這個值越小越好。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/cost.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;那我們要如何找到最小的 cost 值？&lt;/p&gt;

&lt;p&gt;如果 cost function 是一個像下圖的函數圖形，我們知道微分等於 0 可以找到最小值，但這並非一件容易的事，尤其是當我們有很多變數時。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/local%20minima.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;所以我們可以用的方法是，先隨機到函數圖形上的一點，然後根據該點的切線斜率來決定該往哪個方向移動可以找到最低點。這樣的方法，可以讓我們到 local minimum，我們無法確認找到的最小是否是 global minimum，因為這取決與一開始的 initial value。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/local%20minima%202.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;在進入 Gradient descent 之前，我想要先介紹一下基礎觀念。以下將會講解，&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;導函數 Derivative function 與導數 Derivative&lt;/li&gt;
  &lt;li&gt;方向導數 Directional derivative&lt;/li&gt;
  &lt;li&gt;偏導數 Partial derivative&lt;/li&gt;
  &lt;li&gt;梯度 Gradient&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;導數-derivative&quot;&gt;導數 Derivative&lt;/h3&gt;

&lt;p&gt;切線的斜率稱為「導數」（Derivative），也就是微分。&lt;/p&gt;

&lt;p&gt;定義成，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;m = \text{lim}_{\Delta x \to 0}\frac{f(x+\Delta x) - f(x) }{\Delta x} = f'(x) = \frac{\text{d} f(x)}{\text{d}x}&lt;/script&gt;

&lt;h3 id=&quot;偏導數-partial-derivative&quot;&gt;偏導數 Partial derivative&lt;/h3&gt;

&lt;p&gt;斜率求的是單變數的微分，而偏導數是在多變數中的某個變數方向的斜率。&lt;/p&gt;

&lt;p&gt;以兩個字變數為例， &lt;script type=&quot;math/tex&quot;&gt;z = f(x, y)&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;f_x(a, b)&lt;/script&gt; 為對 &lt;script type=&quot;math/tex&quot;&gt;x&lt;/script&gt; 的偏導數，定義為&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;f_x(a, b) = \text{lim}_{h \to 0} \frac{f(a + h, b) - f(a, b)}{h}&lt;/script&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;f_y(a, b)&lt;/script&gt; 為對 &lt;script type=&quot;math/tex&quot;&gt;y&lt;/script&gt; 的偏導數，定義為&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;f_y(a, b) = \text{lim}_{k \to 0} \frac{f(a, b + k) - f(a, b)}{k}&lt;/script&gt;

&lt;p&gt;也就是對 x 或 y 方向做偏微分。&lt;/p&gt;

&lt;h3 id=&quot;方向導數-directional-derivative&quot;&gt;方向導數 Directional derivative&lt;/h3&gt;

&lt;p&gt;斜率求的是單變數的微分，在多變數中要求斜率必須要看是哪個方向的斜率，因為各個方向的斜率都不相同，這時要求的就是方向導數。&lt;/p&gt;

&lt;p&gt;假設函數 &lt;script type=&quot;math/tex&quot;&gt;z = f(x, y)&lt;/script&gt;，在定義域 &lt;script type=&quot;math/tex&quot;&gt;xy&lt;/script&gt; 平面上有一點 &lt;script type=&quot;math/tex&quot;&gt;(x, y)&lt;/script&gt; 及單位向量 &lt;script type=&quot;math/tex&quot;&gt;\overset{\rightharpoonup}{u} = (u_1, u_2)&lt;/script&gt;。則曲面 &lt;script type=&quot;math/tex&quot;&gt;z = f(x, y)&lt;/script&gt; 在 &lt;script type=&quot;math/tex&quot;&gt;(a, b)&lt;/script&gt; 處，沿 &lt;script type=&quot;math/tex&quot;&gt;\overset{\rightharpoonup}{u}&lt;/script&gt; 的方向的斜率定義為，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\text{D}_u f(x_0, y_0)= \text{lim}_{h \to 0} \frac{f(x_0 + h u_1, y_0 + h u_2) - f(x_0, y_0)}{h} = \nabla f \boldsymbol{u}&lt;/script&gt;

&lt;p&gt;方向導數的意義在於，有助於計算出空間中某一場量 &lt;script type=&quot;math/tex&quot;&gt;f(x, y, z)&lt;/script&gt; 在某一特定方向 &lt;script type=&quot;math/tex&quot;&gt;\boldsymbol{u}&lt;/script&gt; 之變化率。&lt;/p&gt;

&lt;h3 id=&quot;梯度-gradient&quot;&gt;梯度 Gradient&lt;/h3&gt;

&lt;p&gt;梯度的定義就是對各個分量做偏微分。&lt;/p&gt;

&lt;p&gt;例如，現在是兩變數函數 &lt;script type=&quot;math/tex&quot;&gt;f(x, y)&lt;/script&gt;，其梯度 &lt;script type=&quot;math/tex&quot;&gt;\nabla f(x, y)&lt;/script&gt; 定義為&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\nabla f(x, y) = \left(\frac{\partial f}{\partial x}, \frac{\partial f}{\partial y}\right)&lt;/script&gt;

&lt;p&gt;若是變數有三個，則 &lt;script type=&quot;math/tex&quot;&gt;\nabla f(x, y, y)&lt;/script&gt; 定義為&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\nabla f(x, y, z) = \left(\frac{\partial f}{\partial x}, \frac{\partial f}{\partial y}, \frac{\partial f}{\partial z}\right)&lt;/script&gt;

&lt;p&gt;Gernal 來看，有 n 個變數的函數 &lt;script type=&quot;math/tex&quot;&gt;f(x_1, x_2, \cdots, x_n)&lt;/script&gt;，我們可以寫成&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\nabla f(x_1, x_2, \cdots, x_n) = \left(\frac{\partial f}{\partial x_1}, \frac{\partial f}{\partial x_2}, \cdots, \frac{\partial f}{\partial x_n}\right)&lt;/script&gt;

&lt;p&gt;梯度 Gradient 的幾何意義，&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;script type=&quot;math/tex&quot;&gt;\nabla f&lt;/script&gt; 表示曲面 &lt;script type=&quot;math/tex&quot;&gt;f(x, y, z) = C&lt;/script&gt; 之垂直向量，如下圖所示。&lt;/li&gt;
  &lt;li&gt;&lt;script type=&quot;math/tex&quot;&gt;\nabla f(P)&lt;/script&gt; 表在 P 點增量最大的方向，也就是 the direction of steepest increase&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/gradient.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;梯度下降法-gradient-descent&quot;&gt;梯度下降法 Gradient descent&lt;/h3&gt;

&lt;p&gt;Gradient descent 是一種最佳化方法。&lt;/p&gt;

&lt;p&gt;從上一部分，我們知道 P 點 gradeint 表示該點增量最大的方向。現在我們要找 cost function 的最小值，也就是該 function 斜率為 0 的點，當我們今天在 P 點知道哪個方向是會增加最快速的點，那就只要往反方向就會是減少最快速的方向了。也就是 &lt;script type=&quot;math/tex&quot;&gt;-\nabla f(P)&lt;/script&gt; 是找尋 minimum cost 的方向。&lt;/p&gt;

&lt;p&gt;總的來說，梯度下降法 Gradient descent 就是不斷的在某個點 P 算它的 Gradient，然後往 Gradient 的反方向一定，直到找到 local minimum 為止（無法知道是否找到 glocal minimum，會根據 initial values 而定）。&lt;/p&gt;

&lt;p&gt;在 neural netword 中，讓這個梯度計算更有效率的方法叫做 &lt;strong&gt;Backpropagation&lt;/strong&gt;，而這正是 neural netword 的重點！下一篇繼續介紹 :)&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;
&lt;br /&gt;
&lt;a href=&quot;https://ocw.chu.edu.tw/pluginfile.php/827/mod_resource/content/33/Summary_227.pdf&quot;&gt;方向導數(Directional Derivative)之定義與意義&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://ocw.chu.edu.tw/pluginfile.php/826/mod_resource/content/31/Summary_226.pdf&quot;&gt;純量函數之梯度(Gradient)&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Neural Network]Neural Network 1 - The idea</title>
   <link href="http://localhost:4000blog//neural%20network/2020/01/22/Neural-Network-Neural-Network/"/>
   <updated>2020-01-22T11:51:00+08:00</updated>
   <id>http://localhost:4000/neural%20network/2020/01/22/[Neural Network]Neural Network</id>
   <content type="html">&lt;p&gt;在了解 CNN (卷積神經網路, Convolutional neural network) 與 RNN (循環神經網絡, Recurrent neural network) 前，先來認識最簡單的 NN (神經網路, Neural network) Multilayer perceptron。&lt;/p&gt;

&lt;p&gt;這篇是&lt;a href=&quot;https://www.youtube.com/watch?v=aircAruvnKk&amp;amp;list=PLZHQObOWTQDNU6R1_67000Dx_ZCJB-3pi&quot;&gt;Neural networks&lt;/a&gt;的課程筆記。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Neural network 啟發自大腦神經，所謂的 Neural 就是 neurons (神經元)，而在 Neural network 裡，neurons 是個介於 0 和 1 之間的數字。&lt;/p&gt;

&lt;p&gt;我們將以讓程式辨認手寫數字 0 到 9 為例解說 Neural network。下圖是一個 28*28 像素的手寫數字，&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/neural%20network%201.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;每一個像素都是一個 0 到 1 的灰階值，而 Neural network 以這個圖的每個像素，對應到每個神經元作為輸入值，也就是說第一層輸入層共有 28*28 = 784 個神經元。灰階值 0 為黑色，1 為白色。這些在神經元中的數字稱為「激勵值」（activation）。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/neural%20network%202.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;這裡範例使用，第一層為輸入層，中間兩層 hidden layers，最後一層為輸出層。而最後輸出層就是 0 到 9 的數字，每個神經元都有個「激勵值」（activation），而這數字就代表著最後給定可能是這個數字的判定結果。&lt;/p&gt;

&lt;p&gt;而中間的 hidden layers 正是神經網路的重點。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/neural%20network%203.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我們可以想像，將整個數字分解成不同的部分，&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/neural%20network%204.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;第一層 hidden layer 是比較小段的部分，而第二層 hidden layer 是由這些小區塊組成比較大塊的區塊。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/neural%20network%205.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;有了這些概念之後，那我們要怎麼從輸入層到第一層的 hidden layer 呢？&lt;/p&gt;

&lt;p&gt;現在我們希望，第二層的其中一個神經元可以辨識這個圖有沒有一個邊，如下圖，&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/neural%20network%206.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我們會給這個神經元與輸入層的神經元之間每個連線一個權重（weight），然後將輸入層的神經元乘上每個權重再加總，權重可以是正或負值。&lt;/p&gt;

&lt;p&gt;但因為，我們希望神經元的激勵值（activation）是在 0 和 1 之間，所以使用 sigmoid function &lt;script type=&quot;math/tex&quot;&gt;\sigma(x) = \frac{1}{1+e^x}&lt;/script&gt; 。經過 &lt;a href=&quot;https://zh.wikipedia.org/wiki/S函数&quot;&gt;sigmoid function&lt;/a&gt; 計算，越小的值會越接近 0，越大的值會越接近 1。&lt;/p&gt;

&lt;p&gt;但也許並不是每次加總大於零我們就希望給正的灰階值，因此，權重最後再加上個 bias，來調整我們想要給灰階值的值。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/neural%20network%207.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;所有第一層 hidden layers 的神經元都根據這樣的概念，有自己關注的區塊，有自己的權重，再加上自己的 bias。第二層的 hidden layers 神經元也以同樣的概念計算，所以我們總共會有 13,002 個權重加上 bias。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/neural%20network%208.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;而所謂的 deep learning 的 learning 就是在學習這些權重和 bias，讓電腦去找到正確的值。&lt;/p&gt;

&lt;p&gt;上上圖的式子只是其中一個神經元，而我們可以用矩陣表達所有第一層 hidden layers 的神經元。如下圖，&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/neural%20network%209.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;總的來說，我們可以將整個 neural network 看成一個 function。&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;f(a_0, a_1,..., a_{783}) =  \begin{bmatrix}
   y_0 \\
   \vdots \\
   y_9
  \end{bmatrix}&lt;/script&gt;

&lt;p&gt;最後，其實現在已經不使用 sigmoid function 了，現在主流的 function 用的是 &lt;strong&gt;ReLU&lt;/strong&gt;。&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;ReLU(a) = max(0, a)&lt;/script&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/neural%20network%2010.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=aircAruvnKk&quot;&gt;究竟神經網路是什麼？ 第一章 深度學習&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Database]ER Model 實體關聯模型</title>
   <link href="http://localhost:4000blog//database/2020/01/01/Database-ER-Model%E5%AF%A6%E9%AB%94%E9%97%9C%E4%BF%82%E5%9C%96/"/>
   <updated>2020-01-01T20:56:00+08:00</updated>
   <id>http://localhost:4000/database/2020/01/01/[Database]ER Model實體關係圖</id>
   <content type="html">&lt;h2 id=&quot;實體關聯模型entity-relationship-model&quot;&gt;實體關聯模型（Entity-Relationship Model）&lt;/h2&gt;

&lt;p&gt;是Conceptual model（概念塑模）的一環，用來描述&lt;strong&gt;實體&lt;/strong&gt;與&lt;strong&gt;實體&lt;/strong&gt;之間&lt;strong&gt;關係&lt;/strong&gt;的工具。&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/ER%20Model.png&quot; alt=&quot;ER Model.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;http://www.csie.sju.edu.tw/cm/course/db/ch03.pdf&quot;&gt;ER Model&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;實體（Entity）：是指用以描述真實世界的物件，在關聯式資料庫中為一個「資料表」
    &lt;ul&gt;
      &lt;li&gt;實體至少擁有一個不是鍵（主鍵）的屬性&lt;/li&gt;
      &lt;li&gt;一個實體可以含有多個「屬性」(Attribute)用以描述該實體，在關聯式資料庫中，以資料表的「欄位」來表示&lt;/li&gt;
      &lt;li&gt;例如：學生、員工、產品等等都是屬於實體&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;關係（Relationship）：指用來表示「一個實體」與「另一個實體」關聯的方式
    &lt;ul&gt;
      &lt;li&gt;例如：一對一關係、一對多關係、多對多關係&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;實體entity&quot;&gt;實體（Entity）&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;定義&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;a ”thing” in the real world with an independent existence&lt;/li&gt;
  &lt;li&gt;用來描述實際存在的事物（如:學生），也可以是邏輯抽象的概念（如:課程）&lt;/li&gt;
  &lt;li&gt;必須可以被識別，亦即能夠清楚分辨出兩個不同的實體(an independent existence)&lt;/li&gt;
  &lt;li&gt;以「名詞」的來命名，不可以是「形容詞」或「動詞」&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;分類&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;實體(entity)&lt;/li&gt;
  &lt;li&gt;弱實體(weak entity)：必須依靠其他實體才能存在，若其依靠的實體消失，則該實體的存在也沒有意義了
    &lt;ul&gt;
      &lt;li&gt;例如：學生家長就是依附在學生實體的弱實體，若學生不存在，則家長也沒有存在的意義&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;圖示&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/entity%20diagram.png&quot; alt=&quot;entity diagram.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://images.app.goo.gl/auQ9MAQCKttsdFGEA&quot;&gt;Entity diagram&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;屬性attribute&quot;&gt;屬性(Attribute)&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;定義&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;用來描述實體的性質（Property）（就是關聯式表格的行）
    &lt;ul&gt;
      &lt;li&gt;例如：學生的學號、名字、班級等等&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;分類&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;多值屬性 vs 單值屬性
    &lt;ul&gt;
      &lt;li&gt;多值屬性（Multivalued attributes）：屬性值不只一個時，我們稱該屬性為&lt;em&gt;多值屬性&lt;/em&gt;
        &lt;ul&gt;
          &lt;li&gt;例如：學生有多個專長，珠算、程式…&lt;/li&gt;
          &lt;li&gt;關係圖中以「雙橢圓形」來表示&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;單值屬性（Single-valued attribute）：非多值屬性稱為&lt;em&gt;單值屬性&lt;/em&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Multivalued%20attributes.png&quot; alt=&quot;Multivalued attributes.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;http://spaces.isu.edu.tw/upload/19225/0/news/postfile_308.pdf&quot;&gt;多值屬性 Multivalued attributes diagram&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;複合屬性 vs 簡單屬性
    &lt;ul&gt;
      &lt;li&gt;複合屬性（Composite attributes）：屬性由數個屬性所組成時，我們稱該屬性為&lt;em&gt;複合屬性&lt;/em&gt;
        &lt;ul&gt;
          &lt;li&gt;例如：姓名由姓、名組成&lt;/li&gt;
          &lt;li&gt;關係圖如下&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;簡單屬性（Simple attribute）：非複合屬性則稱為&lt;em&gt;簡單屬性&lt;/em&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Composite%20attributes.png&quot; alt=&quot;Composite attributes.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;http://spaces.isu.edu.tw/upload/19225/0/news/postfile_308.pdf&quot;&gt;複合屬性 Composite attributes diagram&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;衍生屬性（Derived Attribute）
    &lt;ul&gt;
      &lt;li&gt;它的值可以由其它屬性之值經由某種方式的計算或推論而獲得&lt;/li&gt;
      &lt;li&gt;例如：年齡和星座可由生日推算出來&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;鍵屬性key-attribute&quot;&gt;鍵屬性(Key attribute)&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;定義&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;是指該屬性的值在某個環境下具有唯一性（primary key）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;圖示&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/attribute.png&quot; alt=&quot;attribute.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://images.app.goo.gl/auQ9MAQCKttsdFGEA&quot;&gt;Attribute diagram&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;關係relationship&quot;&gt;關係(Relationship)&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;定義&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;是指用來表達兩個實體之間所隱含的關聯性&lt;/li&gt;
  &lt;li&gt;使用足以說明關聯性質的「動詞」或「動詞片語」命名
    &lt;ul&gt;
      &lt;li&gt;例如：『學生』與『系所』兩個實體型態間存在著一種關係─「就讀於」&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;分類&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;關聯強度 Strength
    &lt;ul&gt;
      &lt;li&gt;強關聯（strong relationship）：a relationship where entity is existence-independent of other entities, and PK of Child doesn’t contain PK component of Parent Entity&lt;/li&gt;
      &lt;li&gt;弱關聯（weak (identifying) relationship）：a relationship where Child entity is existence-dependent on parent, and PK of Child Entity contains PK component of Parent Entity，也就是說，此關聯是連結&lt;em&gt;實體&lt;/em&gt;與&lt;em&gt;弱實體&lt;/em&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Cardinality
    &lt;ul&gt;
      &lt;li&gt;1:1 一對一&lt;/li&gt;
      &lt;li&gt;1:N 一對多&lt;/li&gt;
      &lt;li&gt;M:1 多對一&lt;/li&gt;
      &lt;li&gt;M:N 多對多&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Participation constraints
    &lt;ul&gt;
      &lt;li&gt;全部參與（Total participation）：every entity in the set is involved in the relationship&lt;/li&gt;
      &lt;li&gt;部分參與（Partial participation）：not all entities in the set are involved in the relationship&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;圖示&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Relationship.png&quot; alt=&quot;Relationship.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://images.app.goo.gl/auQ9MAQCKttsdFGEA&quot;&gt;Relationship diagram&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;弱實體例子&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;為了區分和一般實體的關係, 我們會以雙菱形來表示實體與弱實體之間的關係, 而弱實體和關係之間以雙直線連接&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/books.png&quot; alt=&quot;books.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://www.vertabelo.com/blog/chen-erd-notation/&quot;&gt;Example&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;以上圖為例，CHAPTER 必須依靠 BOOK 才能存在，所以 CHAPTER 是一個弱實體，兩者間用雙菱形（弱關聯）來連結。CHAPTER 用雙直線（Total participation）連接關係，因為 CHAPTER 是依靠 BOOK 而存在，表示每一個 CHAPTER 必定屬於某本 BOOK。而 CHAPTER 的 primary key 由 BOOK 的 primary key（BOOK ID） 與 CHAPTER ID 組成。&lt;/p&gt;

&lt;p&gt;如果將上圖關係轉換成表格，CHAPTER 表格會有 {TITLE, CHAPTER ID, BOOK ID} 三個欄位，而 (CHAPTER ID, BOOK ID) 合併為 primary key。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;
&lt;br /&gt;
&lt;a href=&quot;http://cc.cust.edu.tw/~ccchen/doc/db_03.pdf&quot;&gt;ER Model 實體關係圖&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://www.csie.sju.edu.tw/cm/course/db/ch04.pdf&quot;&gt;第4章 資料庫設計與實體關聯模型&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://spaces.isu.edu.tw/upload/19225/0/news/postfile_308.pdf&quot;&gt;利用實體-關係模型 (E-R Model) 規劃資料庫&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.vertabelo.com/blog/chen-erd-notation/&quot;&gt;Chen notation&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://snowlin.cmu.edu.tw/mis/MIS_Lec01.pdf&quot;&gt;資料庫基礎概念&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Database]Database 基礎概念</title>
   <link href="http://localhost:4000blog//database/2019/12/31/Database-Database-%E5%9F%BA%E7%A4%8E%E6%A6%82%E5%BF%B5/"/>
   <updated>2019-12-31T12:22:00+08:00</updated>
   <id>http://localhost:4000/database/2019/12/31/[Database]Database 基礎概念</id>
   <content type="html">&lt;h2 id=&quot;資料data與資訊information&quot;&gt;資料(Data)與資訊(Information)&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;資料(Data)：資訊(Information)的原始型態，是未經整理和分析的原始數值、文字或符號。&lt;/li&gt;
  &lt;li&gt;資訊(Information)：經過整理和分析後的資料，是有實質意義的資料。&lt;/li&gt;
  &lt;li&gt;資料處理(Data Processing)：資料(Data) 經過資料處理(Data Processing) 後將資料轉換為資訊(Information)。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;資料階層&quot;&gt;資料階層&lt;/h2&gt;

&lt;p&gt;資料階層的最小儲存單位是位元，8個位元組成一個位元組，也就是ASCII碼的字元。數個位元組結合成欄位，多個欄位組成記錄，最後將一組記錄儲存成檔案，資料庫就是 一組相關檔案的集合。&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/%E8%B3%87%E6%96%99%E9%9A%8E%E5%B1%A4.png&quot; alt=&quot;資料階層.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;http://www.csie.sju.edu.tw/cm/course/db/ch01.pdf&quot;&gt;資料階層&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;第一階層：位元(Bits)&lt;/li&gt;
  &lt;li&gt;第二階層：位元組(Bytes)&lt;/li&gt;
  &lt;li&gt;第三階層：欄位(Fields)&lt;/li&gt;
  &lt;li&gt;第四階層：記錄(Records)&lt;/li&gt;
  &lt;li&gt;第五階層：檔案(Files)&lt;/li&gt;
  &lt;li&gt;第六階層：資料庫(Database)&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;資料庫系統database-system&quot;&gt;資料庫系統(Database System)&lt;/h2&gt;

&lt;p&gt;資料庫系統(Database System)是由「資料庫」(Database)和「資料庫管理系統」(Database Management System，DBMS)所組成。&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Database%20System.png&quot; alt=&quot;Database System.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;http://www.csie.sju.edu.tw/cm/course/db/ch01.pdf&quot;&gt;資料庫系統&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;資料庫database&quot;&gt;資料庫(Database)&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;Represents some aspects of the real world (miniworld)&lt;/li&gt;
  &lt;li&gt;資料庫是一個對結構化資訊或資料的組織性收集，通常以電子方式儲存在電腦系統。&lt;/li&gt;
  &lt;li&gt;資料庫通常由資料庫管理系統(DBMS)控制。&lt;/li&gt;
  &lt;li&gt;目前運行中最常見的資料庫型態通常是在一系列的表格中進行行列間建模，使得處理和資料查詢更為有效。&lt;/li&gt;
  &lt;li&gt;大部分的資料庫使用結構化查詢語言(SQL)來書寫或查詢資料。&lt;/li&gt;
  &lt;li&gt;資料庫容許多名用戶在同一時間快速、安全地以高度複雜邏輯和語言取得或查詢資料。&lt;/li&gt;
  &lt;li&gt;Meta-data: Database definition or descriptive information (Stored by the DBMS in a database catalog or data dictionary)&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;資料庫管理系統dbms&quot;&gt;資料庫管理系統(DBMS)&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;資料庫通常需要一個稱做資料庫管理系統(DBMS)的全面資料庫軟體程式。&lt;/li&gt;
  &lt;li&gt;DBMS是作為資料庫和其用戶或程式之間的介面，讓用戶能檢索、更新和管理，使得資訊組織化和最佳化。&lt;/li&gt;
  &lt;li&gt;DBMS亦可促進對資料庫的監督和控制，增強各方面的管理運作，包括績效監控、最佳化、備份以及系統恢復。&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;database-system-design-process&quot;&gt;Database System Design Process&lt;/h2&gt;

&lt;p&gt;好的資料庫系統設計對於資料庫的維護、更新及修改相當重要，另外，如何有效的儲存、提取資料也是資料庫重要的一環，接下來要介紹資料庫的設計。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;資料庫系統設計（Database System Process）&lt;/strong&gt;有兩個主要的方向，&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;Database design&lt;/strong&gt;（資料庫設計）
    &lt;ul&gt;
      &lt;li&gt;focuses on defining the database&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Application design&lt;/strong&gt;（應用設計）
    &lt;ul&gt;
      &lt;li&gt;focuses on the programs and interfaces that access the database&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Database%20System%20Design%20Process.png&quot; alt=&quot;Database System Design Process.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://www.ida.liu.se/~TDDD37/fo/DBTechnology01-2019-6up.pdf&quot;&gt;Database System Design Process&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;database-design資料庫設計-data-modeling資料塑模&quot;&gt;Database Design（資料庫設計）/ Data Modeling（資料塑模）&lt;/h2&gt;

&lt;p&gt;(在 &lt;a href=&quot;https://www.ida.liu.se/~TDDD37/fo/DBTechnology01-2019-6up.pdf&quot;&gt;Database Technology&lt;/a&gt; 講義裡寫的是 Database Design，但找到兩個台灣的講義（&lt;a href=&quot;http://www.csie.sju.edu.tw/cm/course/db/ch01.pdf&quot;&gt;第1章 資料庫的基礎&lt;/a&gt;、&lt;a href=&quot;https://www.mis.nsysu.edu.tw/db-book/PDF/Ch2.pdf&quot;&gt;第二章 實體關係模式:基本概念&lt;/a&gt;）都是用資料塑模（Data Modeling），所以這兩個東西我把它們放在一起)&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Data%20Modeling.png&quot; alt=&quot;Data Modeling.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;http://www.csie.sju.edu.tw/cm/course/db/ch01.pdf&quot;&gt;Data Modeling&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;資料庫設計階段phases-for-designing-a-database&quot;&gt;資料庫設計階段（Phases for designing a database）:&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;Requirements specification and analysis&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Conceptual design&lt;/strong&gt;（Conceptual model，概念塑模)
    &lt;ul&gt;
      &lt;li&gt;e.g., using the Entity-Relationship model (ER Model)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Logical design&lt;/strong&gt;（Logical model，邏輯塑模)
    &lt;ul&gt;
      &lt;li&gt;e.g., using the relational model (關聯模型)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Physical design&lt;/strong&gt;（Physical model，實體塑模)
    &lt;ul&gt;
      &lt;li&gt;e.g., 設定索引&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://www.guru99.com/images/DatabaseDesignProcess(1).png&quot; alt=&quot;Database development life cycle&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://www.guru99.com/database-design.html&quot;&gt;Database development life cycle&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;conceptual-model概念塑模&quot;&gt;Conceptual model（概念塑模）&lt;/h2&gt;

&lt;p&gt;概念塑模的目的是將現實中某部分的資料關係用&lt;strong&gt;結構化&lt;/strong&gt;的方式呈現，建立整個資料庫邏輯結構的模型，過程不涉及任何資料庫管理系統、資料庫種類、軟體和實際儲存結構。最常使用&lt;em&gt;實體關係圖&lt;/em&gt;（Entity Relationship Diagram）來繪製&lt;em&gt;實體關聯模型&lt;/em&gt;（Entity-Relationship Model）。&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/ER%20Model.png&quot; alt=&quot;ER Model.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;http://www.csie.sju.edu.tw/cm/course/db/ch03.pdf&quot;&gt;ER Model&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;entity-relationship-model-er-model&quot;&gt;Entity-Relationship model (ER Model)&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;ER Model 則是用來繪製&lt;strong&gt;結構化&lt;/strong&gt;資料的概念圖。&lt;/li&gt;
  &lt;li&gt;ER Model 組成元件包括實體（Entity）和關係（Relationship）。
    &lt;ul&gt;
      &lt;li&gt;實體（Entity）- 是在真實世界識別出的東西，例如：老師、學生、車子、品牌。&lt;/li&gt;
      &lt;li&gt;關聯性（Relationships）- 在二個或多個實體間擁有的關係，主要分為三種：一對一、一對多、多對多。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;a href=&quot;https://shihs.github.io/blog/database/2020/01/01/Database-ER-Model實體關係圖/&quot;&gt;下一篇&lt;/a&gt;有詳細解說&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;logical-model邏輯塑模&quot;&gt;Logical model（邏輯塑模）&lt;/h2&gt;

&lt;p&gt;使用的工具是關聯模型（Relational Model），最後會產生資料表的定義關聯綱目（schema）。&lt;/p&gt;

&lt;p&gt;邏輯模型主要是由三種元素所組成，如下所示:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;資料結構（Data Structures）：資料的組成方式，就是欄和列組成表格的關聯表(Relations)&lt;/li&gt;
  &lt;li&gt;資料操作或運算（Data Manipulation 或 Operations）：資料的相關操作，關聯式代數(Relational Algebra)和關聯式計算(Relational Calculus)&lt;/li&gt;
  &lt;li&gt;完整性限制條件（Integrity Constraints）：維護資料完整性的條件，其目的是確保儲存的資料是合法的資料&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;資料庫系統演進各年代的資料庫系統中，其使用的資料庫模型就是邏輯資料模型，主要有四種邏輯資料模型，如下所示:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;階層式模型（Hierarchical Model）&lt;/li&gt;
  &lt;li&gt;網路式模型（Network Model）&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;關聯式模型（Relational Model）&lt;/strong&gt;&lt;a href=&quot;(https://zh.wikipedia.org/wiki/关系模型)&quot;&gt;wiki&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;物件導向式模型（Object-Oriented Model）&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;relational-model-relational-data-model&quot;&gt;Relational Model (Relational Data Model)&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;中文稱「關聯（式）模型」。&lt;/li&gt;
  &lt;li&gt;Relational database 關聯式資料庫: represent data as a collection of relations。「關聯式資料庫」使用多個關聯表（relations）來呈現資料。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Relation（關聯表）&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/relation.png&quot; alt=&quot;relation.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://www.ida.liu.se/~TDDD37/fo/DBTechnology02-2019-6up.pdf&quot;&gt;relation (關聯表)&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Relation 是關聯表（如上圖），是包含 data 的 table（表格）&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Each row (tuple) represents a record of related data values
    &lt;ul&gt;
      &lt;li&gt;一列（row）稱為一個值組（tuple），紀錄各個 data 的值&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Each column (attribute) holds a corresponding value for each row
    &lt;ul&gt;
      &lt;li&gt;Columns associated with a data type (domain)&lt;/li&gt;
      &lt;li&gt;Each column header: attribute name&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Domain&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;Domain is a set of &lt;em&gt;atomic values&lt;/em&gt;. 
&lt;br /&gt;
e.g., &lt;script type=&quot;math/tex&quot;&gt;\{ 0, 1, 2, ... \}&lt;/script&gt;, &lt;script type=&quot;math/tex&quot;&gt;\{\text{Jo Smith}, \text{Dana Jones}, \text{Ashley Wong}, \text{Y. K. Lee}, ...\}&lt;/script&gt;&lt;/li&gt;
      &lt;li&gt;&lt;em&gt;atomic values&lt;/em&gt;: Each value indivisible（不可分割）&lt;/li&gt;
      &lt;li&gt;Domains specified by &lt;em&gt;data type&lt;/em&gt;(integer, string, date, real, etc.)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Relation Schema&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;Schema describes the relation（關聯表）&lt;/li&gt;
      &lt;li&gt;關聯表綱要（relation schema）是由關聯表名稱 R（relation name）和一連串屬性 &lt;script type=&quot;math/tex&quot;&gt;(A_1,A_2,….,A_n)&lt;/script&gt;清單（list）還有定義域（domain）所組成&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;integrity constraints&lt;/strong&gt;（完整性限制）&lt;/li&gt;
      &lt;li&gt;Denoted by &lt;script type=&quot;math/tex&quot;&gt;R(A_1, A_2, ..., A_n)&lt;/script&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Attribute&lt;/strong&gt; &lt;script type=&quot;math/tex&quot;&gt;A_i&lt;/script&gt;
    &lt;ul&gt;
      &lt;li&gt;Name of a role in the relation schema R&lt;/li&gt;
      &lt;li&gt;使用 &lt;script type=&quot;math/tex&quot;&gt;dom(A_i)&lt;/script&gt; 的符號來說明屬性 &lt;script type=&quot;math/tex&quot;&gt;A_i&lt;/script&gt; 的定義域的範圍是什麼&lt;/li&gt;
      &lt;li&gt;屬性名稱不可重複，但 domain 可以重複&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;NULL Values&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;Each domain may be augmented with a special value called NULL&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;em&gt;Question:&lt;/em&gt; A relation schema consists of?
    &lt;ul&gt;
      &lt;li&gt;Ans: relation name, attribute names and domains, and integrity constraints&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;integrity-constraints完整性限制&quot;&gt;Integrity Constraints（完整性限制）&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;建立檢查資料庫儲存資料的依據和保障資料的正確性。不但可以防止授權使用者將不合法資料存入資料庫，還能夠避免關聯表間的資料不一致。&lt;/li&gt;
  &lt;li&gt;關聯式資料庫模型的完整性限制條件有很多種，適用所有關聯式資料庫的完整性限制條件有四種，如下所示:
    &lt;ul&gt;
      &lt;li&gt;鍵限制條件(Key Constraints)&lt;/li&gt;
      &lt;li&gt;定義域限制條件(Domain Constraints)&lt;/li&gt;
      &lt;li&gt;實體完整性(Entity Integrity)&lt;/li&gt;
      &lt;li&gt;參考完整性(Referential Integrity)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;鍵限制條件（Key Constraints）&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;鍵限制條件（Key Constraints）是指關聯表一定擁有一個唯一和最小的主鍵（Primary Key）&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/keys.png&quot; alt=&quot;keys.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;http://www.csie.sju.edu.tw/cm/course/db/ch03.pdf&quot;&gt;Key&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;超鍵（Superkeys）
    &lt;ul&gt;
      &lt;li&gt;是關聯表綱要的單一屬性或屬性值集合，超鍵需要滿足唯一性（Uniqueness）&lt;/li&gt;
      &lt;li&gt;Superkeys 可以由一個或多個行（屬性）組成，只要唯一就可以&lt;/li&gt;
      &lt;li&gt;下方範例關聯表來看，符合的有(sid)、(SSN)、(sid, SSN)、(sid, ename)、(SSN, cname)、(sid, tel)、(SSN, cname, postcode)……&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;候選鍵（Candidate Keys）
    &lt;ul&gt;
      &lt;li&gt;候選鍵（Candidate Keys）是一個超鍵，在每一個關聯表至少擁有一個候選鍵，不只滿足超鍵的唯一性，還需要滿足最小性（Minimality）&lt;/li&gt;
      &lt;li&gt;Candidate Keys 是超鍵的子集合，但不同的是，候選鍵還必須要有最小性，所以單一屬性的超鍵一定是候選鍵&lt;/li&gt;
      &lt;li&gt;舉個例子，如果下面的範例多了一個學生 sid = 5, ename = Jane，這時候 (sid, ename) 就不是候選鍵，因為去掉 ename 也能區分每一行，所以 ename 是多餘的&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;主鍵（Primary Key）
    &lt;ul&gt;
      &lt;li&gt;符合的有(sid)、(SSN)&lt;/li&gt;
      &lt;li&gt;從候選鍵中選出一個作為主鍵，挑選主鍵的原則如下所示:
        &lt;ul&gt;
          &lt;li&gt;不可為空值(Not Null)&lt;/li&gt;
          &lt;li&gt;永遠不會改變(Never Change)&lt;/li&gt;
          &lt;li&gt;非識別值(Nonidentifying Value)&lt;/li&gt;
          &lt;li&gt;簡短且簡單的值(Brevity and Simplicity)&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;替代鍵（Alternate Keys）
    &lt;ul&gt;
      &lt;li&gt;在候選鍵中不是主鍵的其他候選鍵稱為替代鍵(Alternate Keys)，因為這些是可以用來替代主鍵的候選鍵&lt;/li&gt;
      &lt;li&gt;如果 (sid) 是主鍵，則 (SSN) 是替代鍵&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;外來鍵（Foreign Keys）
    &lt;ul&gt;
      &lt;li&gt;是關聯表的單一或多個屬性的集合，它的屬性值是參考到其他關聯表的主鍵，用來建立兩個關聯表間的連接&lt;/li&gt;
      &lt;li&gt;換句話說，Foreign Keys 是其他關聯表的主鍵，它（們）可以是該關聯表的主鍵，但不一定是&lt;/li&gt;
      &lt;li&gt;外來鍵和參考的主鍵屬於相同定義域，不過屬性名稱可以不同&lt;/li&gt;
      &lt;li&gt;外來鍵可以是空值NULL&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Students.png&quot; alt=&quot;Students.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;http://www.csie.sju.edu.tw/cm/course/db/ch03.pdf&quot;&gt;範例關聯表&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;定義域限制條件(Domain Constraints)&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;每個值都必須是基元值且必須在定義域內&lt;/li&gt;
  &lt;li&gt;例如，屬性 age 的定義域是 int，屬性值可以為5 ，但不可以是4.5&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;實體完整性(Entity Integrity)&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;實體完整性是關聯表內部的完整性條件，主要是用來規範關聯表主鍵的使用規則&lt;/li&gt;
  &lt;li&gt;主鍵（primary  key）不可以是 Null&lt;/li&gt;
  &lt;li&gt;例如，（ename, cname）是主鍵，ename 屬性不可為空值；cname 屬性也不可是空值。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;參考完整性(Referential Integrity)&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;關聯表的所有外來鍵值，都必須能參考到另一關聯表的主鍵值&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;physical-model實體塑模&quot;&gt;Physical Model（實體塑模）&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;針對指定資料庫管理系統建立實際資料庫結構的資料模型，例如:SQL Server&lt;/li&gt;
  &lt;li&gt;對於關聯式資料庫模型的實體模型來說，就是在資料庫管理系統軟體建立關聯表(Relation) 的表格、關聯性(Relationship)和索引等定義資料&lt;/li&gt;
  &lt;li&gt;簡單來說，就是將 Conceptual model 和 Logical model 實際建立出來&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/%E5%AF%A6%E9%AB%94%E6%A8%A1%E5%9E%8B.png&quot; alt=&quot;實體模型.png&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;http://www.csie.sju.edu.tw/cm/course/db/ch03.pdf&quot;&gt;實體模型&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;
&lt;br /&gt;
&lt;a href=&quot;http://www.csie.sju.edu.tw/cm/course/db/ch01.pdf&quot;&gt;第1章 資料庫的基礎&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://www.csie.sju.edu.tw/cm/course/db/ch03.pdf&quot;&gt;第3章 關聯式資料庫模型&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.oracle.com/tw/database/what-is-database.html&quot;&gt;Oracle - 什麼是資料庫？&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.ida.liu.se/~TDDD37/fo/DBTechnology01-2019-6up.pdf&quot;&gt;Database Technology - Topic 1: Introduction&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.ida.liu.se/~TDDD37/fo/DBTechnology02-2019-6up.pdf&quot;&gt;Database Technology - Topic 2: Relational Databases&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://championdatablog.com/自動草稿/&quot;&gt;深入了解關聯式資料模型(Relational Data Model)&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.mis.nsysu.edu.tw/db-book/PDF/Ch2.pdf&quot;&gt;第二章 實體關係模式:基本概念&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.mysql.tw/2015/04/data-modeling.html&quot;&gt;Data Modeling (資料塑模) : 概念塑模、邏輯塑模、實體塑模&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.itread01.com/content/1545320464.html&quot;&gt;快速理解資料庫超鍵，候選鍵，主鍵&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[NLP]NLTK & spaCy 筆記</title>
   <link href="http://localhost:4000blog//nlp/2019/12/17/NLP-NLTK-%E7%AD%86%E8%A8%98/"/>
   <updated>2019-12-17T19:38:00+08:00</updated>
   <id>http://localhost:4000/nlp/2019/12/17/[NLP]NLTK 筆記</id>
   <content type="html">&lt;p&gt;常見的 NLP package 有 NLTK、spaCy、Scikit-learn 等等，參考下面的功能比較圖。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/NLPlibraresPython.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;這裡則要分別介紹 NLTK 和 spaCy 的一些用法。從上面的比較圖我們知道，這兩個 package 基本上功能相似，在 preprocessing 時一定會使用到，但兩者有各自的優缺點。&lt;/p&gt;

&lt;h3 id=&quot;nltk&quot;&gt;NLTK&lt;/h3&gt;

&lt;p&gt;主要用於處理斷詞、詞頻、 pos 等等，更多用法請參照下面連結。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/shihs/732A92-TextMining/blob/master/note/NLTK.ipynb&quot;&gt;NLTK&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;spacy&quot;&gt;spaCy&lt;/h3&gt;

&lt;p&gt;spaCy 是 NLTK 的主要競爭者，它們的功能類似。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/shihs/732A92-TextMining/blob/master/note/spaCy.ipynb&quot;&gt;spaCy&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Text Mining]Word embeddings</title>
   <link href="http://localhost:4000blog//text%20mining/2019/11/26/Text-Mining-Word-embeddings/"/>
   <updated>2019-11-26T19:40:00+08:00</updated>
   <id>http://localhost:4000/text%20mining/2019/11/26/[Text Mining]Word embeddings</id>
   <content type="html">&lt;p&gt;This post is based on the &lt;a href=&quot;https://www.ida.liu.se/~732A92/index.en.shtml&quot;&gt;732A92 Texting Mining&lt;/a&gt; course, given by Marco Kuhlmann at LiU in 2019.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;word-embeddings&quot;&gt;Word embeddings&lt;/h2&gt;

&lt;p&gt;對於人來說，要理解文字並不是件困難的事，但對電腦來說，每個字不過是一串 string，所以當我們要做 text mining 時就必須要將這些 string 轉化成電腦可以理解的方式。
而 word embedding(word vector or word representation) 的概念就是將文字轉換成 vector ，好讓電腦可以讀懂文字間的關係。&lt;/p&gt;

&lt;p&gt;譬如說，人類可以理解 pretty 和 beautiful 是相近詞，但如果只是給電腦這兩個單字，對於電腦來說，這只是兩個不同長度的 string 罷了。word embedding 會將這兩個字轉換成不同的 vector 映射到一個高維空間，當這兩個 vector 越接近（可以使用 consine similarity）就表示這兩個詞越相近。這就是 word embedding 主要的概念。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A word embedding is a mapping of words to points in a vector space such that nearby words (points) are similar in terms of their distributional properties.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;the-distributional-principle&quot;&gt;The distributional principle&lt;/h3&gt;

&lt;p&gt;word embedding 方法可以使用最重要的就是因為有 distributional hypothesis 這個假設。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The distributional principle states that words that occur in similar contexts tend to have similar meanings.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;這裡的概念是說，詞(target words)出現在類似的上下文中(context words)，則它們很有可能有相似的意思。
譬如說，
&lt;br /&gt;
-「那隻『貓』好可愛」
&lt;br /&gt;
-「那隻『狗』好可愛」
&lt;br /&gt;
這時候除了『貓』和『狗』外，這兩句話的上下文是一樣的，根據 distributional principle，這兩個詞應該是相似的。&lt;/p&gt;

&lt;h3 id=&quot;co-occurrence-matrix&quot;&gt;Co-occurrence matrix&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Co-occurrence%20matrix.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;上圖中，context words 就是上下文，而 target words 就是我們想要分析的字詞。
&lt;br /&gt;
現在來看 cheese 這個字，可以看到和 butter, cake, cow, deer 這幾個字一起出現的次數分別是，12, 2, 1和0次。看起來和 butter 還有 cake 連結性比較強。
再來看 bread 這個字，同樣的在 butter 和 cake 上的連結也比較強。如果我們把這兩個單字用向量表示就會是，(12, 2, 1, 0) 和 (5, 5, 0, 0)，可以去比較和其他兩個單字的 cosine similarity，這兩個的關係是比較強的。&lt;/p&gt;

&lt;p&gt;現在我們把它們畫出來（因為它們被映射到的是四維空間，所以老師的 slide 只看 cow 和 cake 這兩個 context words）&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/From%20co-occurrences%20to%20word%20vectors.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;如果還是不太明白，&lt;a href=&quot;http://cpmarkchang.logdown.com/posts/772665-nlp-vector-space-semantics&quot;&gt;這篇部落格&lt;/a&gt;應該可以看懂。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;補充：&lt;/strong&gt;
從上面的 matrix 可能會想到一件事，&lt;em&gt;context words&lt;/em&gt; 等於是決定了 target words 的向量啊！
換句話說，當我們分析不同的文本的時候，會需要不同的 context words來算出 word embeddings。想像，如果今天要分析新聞報導和 ptt 內容，不太可能使用一樣的 context words，畢竟ptt用語和新聞用語會有很大的不同。（蛤？你說記者都抄 ptt 內容嗎？XDDD）&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;simple-applications-of-word-embeddings&quot;&gt;Simple applications of word embeddings&lt;/h3&gt;

&lt;p&gt;word embeddings 的應用&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;finding similar words. 找到相似的字，像是上面的例子，找出哪一個字和 cheese 比較相似。&lt;/li&gt;
  &lt;li&gt;answering ‘odd one out’ questions. 找出不一樣的詞，譬如說  lunch, breakfast, dinner, car 哪一個詞屬於不同類？ (根據上面提到的概念，lunch, breakfast, dinner 這三個的 vector 應該會比較接近，會在比較接近的上下文中出現)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;limitations-of-word-embeddings&quot;&gt;Limitations of word embeddings&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;There are many different facets of ‘similarity’. Ex. Is a cat more similar to a dog or to a tiger? (在不同情境下，cat 和 dog 可能比較相似。譬如說，貓和狗都是寵物，但如果以生物的角度來看，cat 和 tiger 都屬於貓科動物，這時候 cat 和 tiger 會比較相似)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Text data does not reflect many ‘trivial’ properties of words. Ex. more ‘black sheep’ than ‘white sheep’ (如果只分析文本，因為大部分的羊都是白色的，所以在提到羊的時候並不會特別提到顏色，但當提到比較稀少的黑羊時，反而會特別說到 black，這會導致在分析時好像黑羊出現的頻率比白羊出現的頻率高)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Word vectors reflect social biases in the data used to train them. Ex. including gender and ethnic stereotypes (&lt;a href=&quot;https://www.pnas.org/content/115/16/E3635&quot;&gt;論文&lt;/a&gt;參考) 很多詞語上的用法其實帶有非常多的社會偏見和刻板印象，而這也會導致分析出的結果有所偏差。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;還有什麼問題？&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;到目前為止，看起來都非常合理，那還會有什麼問題呢？&lt;/p&gt;

&lt;p&gt;這裡會碰到和之前提到過的，矩陣&lt;em&gt;稀疏性&lt;/em&gt;的問題。如果今天 context words 有十萬個字，那麼 target words 就會是在十萬維度的空間的 vectors，而且可能會有很多的值都是 0 的狀況發生。那這樣要用什麼方法解決矩陣的稀疏性並產生 word embeddings（也就是每個詞的向量） 呢？&lt;/p&gt;

&lt;p&gt;從不同的面向來看幾個常見的 word embedding 方法，&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Learning word embeddings via &lt;em&gt;matrix factorization&lt;/em&gt;
    &lt;ol&gt;
      &lt;li&gt;Singular Value Decomposition(SVD)&lt;/li&gt;
      &lt;li&gt;Positive Pointwise mutual information(PPMI)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Learning word embeddings via &lt;em&gt;language models&lt;/em&gt;
    &lt;ol&gt;
      &lt;li&gt;N-gram&lt;/li&gt;
      &lt;li&gt;Neural language models(Ex. word2vec)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;以下就要來介紹這幾種方法。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;matrix-factorization---singular-value-decompositionsvd&quot;&gt;Matrix factorization - Singular Value Decomposition(SVD)&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;The rows of co-occurrence matrices are long and sparse. Instead, we would like to have word vectors that are short and dense. 簡單來說，co-occurrence matrices 會有稀疏性的問題。&lt;/li&gt;
  &lt;li&gt;One idea is to approximate the co-occurrence matrix by another matrix with fewer columns. Singular Value Decomposition 的想法是，將這個又長又臭的 co-occurrence matrix 用另比較少 columns 的 matrix 取代。&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;什麼是-singular-value-decomposition奇異值分解&quot;&gt;什麼是 Singular value decomposition（奇異值分解）?&lt;/h3&gt;

&lt;p&gt;推薦&lt;a href=&quot;https://www.youtube.com/watch?v=OEJ0wxxLO7M&quot;&gt;李宏毅老師的線性代數&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;em&gt;Singular value decomposition(SVD)&lt;/em&gt; can be applied on any matrix. (不需要是方陣。比較：PCA(特徵值分解) 也是一個降維的方法，但它的矩陣就必須要是方陣。)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;SVD 的概念就是，任一一個矩陣 &lt;script type=&quot;math/tex&quot;&gt;A_{m \times n}&lt;/script&gt;，它都可以拆解成三個矩陣（&lt;script type=&quot;math/tex&quot;&gt;U_{m \times n}, \Sigma_{m \times n}, V^T_{n \times n}&lt;/script&gt;）的相乘。&lt;/p&gt;

&lt;p&gt;其中，&lt;script type=&quot;math/tex&quot;&gt;U_{m \times n}&lt;/script&gt; 的 columns 是 &lt;em&gt;Orthonormal&lt;/em&gt;，而 &lt;script type=&quot;math/tex&quot;&gt;V^T_{n \times n}&lt;/script&gt; 的 rows 是 &lt;em&gt;Orthonormal&lt;/em&gt;，&lt;script type=&quot;math/tex&quot;&gt;\Sigma_{m \times n}&lt;/script&gt; 是 &lt;em&gt;Diagonal&lt;/em&gt;(只有對角線有非負的值，且由大到小)。&lt;/p&gt;

&lt;p&gt;&lt;em&gt;(在線性代數中，一個內積空間的正交基（orthogonal basis）是元素兩兩正交的基。稱基中的元素為基向量。 假若，一個正交基的基向量的模長都是單位長度1，則稱這正交基為標準正交基或”規範正交基”（Orthonormal basis）。)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/SVD.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;script type=&quot;math/tex&quot;&gt;\Sigma_{m \times n}&lt;/script&gt; 會是一個長得像這樣的矩陣，且 &lt;script type=&quot;math/tex&quot;&gt;\sigma_1 \ge \sigma_1 \ge \ldots \ge \sigma_k&lt;/script&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Sigma.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;而 &lt;script type=&quot;math/tex&quot;&gt;\sigma_r, ~~where~~1 \le r \le k&lt;/script&gt; 是奇異值（singular value），而 r 越小也代表了該值越重要，換句話說，含有越多訊息，因此我們可以只保留 &lt;script type=&quot;math/tex&quot;&gt;\Sigma&lt;/script&gt; 較重要的前面幾行得到一個相似的矩陣 &lt;script type=&quot;math/tex&quot;&gt;A&lt;/script&gt;。用較小的儲存空間就可以得到接近原始的矩陣 &lt;script type=&quot;math/tex&quot;&gt;A&lt;/script&gt;。&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;A_{m \times n} \approx U_{m \times r} \times \Sigma_{r \times r} \times V^T_{r \times n}&lt;/script&gt;

&lt;p&gt;參考&lt;a href=&quot;https://ccjou.wordpress.com/2009/09/01/奇異值分解-svd/&quot;&gt;線代啟示錄-奇異值分解 (SVD)&lt;/a&gt;的圖，&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/svd2.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;回到我們的 word-embedding。我們可以利用 SVD 進行去噪及降維，刪除一些不那麼重要的訊息，用來解決 Co-occurrence matrix 稀疏性的問題。&lt;/p&gt;

&lt;p&gt;我們也不需要再將相乘矩陣，直接使用 𝑼 就好，每一列就代表一個 target word。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Each row of the (truncated) matrix 𝑼 is a k-dimensional vector that represents the ‘most important’ information about a word.&lt;/li&gt;
  &lt;li&gt;A practical problem is that computing the singular value decomposition for large matrices is expensive.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;這邊看一個&lt;a href=&quot;https://www.itread01.com/content/1569742263.html&quot;&gt;例子&lt;/a&gt;，&lt;/p&gt;

&lt;p&gt;下圖是一個 Co-occurrence matrix &lt;script type=&quot;math/tex&quot;&gt;~A_{m \times n}&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/term-document.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;將上面的矩陣 &lt;script type=&quot;math/tex&quot;&gt;A&lt;/script&gt; 使用 SVD 分解、降維，只留下前三個特徵值。每個特徵值的大小表示對應位置的屬性值的重要性大小，左奇異矩陣的每一列即代表每個詞的特徵向量，右奇異矩陣的每一行表示每個文件的特徵向量。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/SVD%20example.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;取每個向量後兩維的對應值投影到一個二維空間，如下所示&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/SVD%20example%202.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;上圖中，一個紅色的點對應一個詞，一個藍色的點對應一個文件。當這些點被投影到空間中，我們可以對這些詞和文件進行分類，比如說stock和market可以放在一類，real和estate可以放在一類，按這樣的分類結果，我們就可以知道文件中哪些事相近的詞，所以當使用者利用詞搜尋文件的時候，我們就可以利用相近的詞（在向量空間中相近的詞、被歸為同一類的詞）進行檢索，而不是只是使用完全相同的詞搜尋。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;matrix-factorization---positive-pointwise-mutual-informationppmi&quot;&gt;Matrix factorization - Positive Pointwise mutual information(PPMI)&lt;/h2&gt;

&lt;h3 id=&quot;pointwise-mutual-informationpmi&quot;&gt;Pointwise mutual information(PMI)&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Raw counts favour pairs that involve very common contexts. 
&lt;br /&gt;
E.g. the cat, a cat will receive higher weight than cute cat, small cat.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;We want a measure that favours contexts in which the target word occurs more often than other words.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;A suitable measure is pointwise mutual information (PMI):&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;PMI(x, y) = log \frac{P(x, y)}{P(x) \times P(y)}&lt;/script&gt;

&lt;p&gt;簡單來說，我們可以用 PMI 公式來看兩個字之間的關係。&lt;/p&gt;

&lt;p&gt;現在我們把 &lt;script type=&quot;math/tex&quot;&gt;x&lt;/script&gt; 看成我們的 target word，&lt;script type=&quot;math/tex&quot;&gt;y&lt;/script&gt; 看成我們的 context word，&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;We want to use PMI to measure the associative strength between a word &lt;script type=&quot;math/tex&quot;&gt;w&lt;/script&gt; and a context &lt;script type=&quot;math/tex&quot;&gt;c&lt;/script&gt; in a data set &lt;script type=&quot;math/tex&quot;&gt;D&lt;/script&gt;:&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;PMI(w, c) = log \frac{P(w, c)}{P(w) \times P(c)} = log \frac{\#(w, c)/|D|}{\#(w)/|D| \cdot \#(c)/|D|} = log \frac{\#(w,c) \cdot |D|}{\#(w) \cdot \#(c)}&lt;/script&gt;

&lt;p&gt;但根據上面的公式，會發現一個問題，PMI is infinitely small for unseen word–context pairs, and undefined for unseen target words. (如果 &lt;script type=&quot;math/tex&quot;&gt;w&lt;/script&gt; 和 &lt;script type=&quot;math/tex&quot;&gt;c&lt;/script&gt; 並沒有共同出現過，再取 log，整個值會變成 -Inf)&lt;/p&gt;

&lt;p&gt;所以這時候就有了 &lt;strong&gt;Positive Pointwise mutual information(PPMI)&lt;/strong&gt;。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;In positive pointwise mutual information (PPMI), all negative and undefined values are replaced by zero:&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;􏰜􏰜􏰝􏰞􏰍􏰂􏰠PPMI(w, c) = max(PMI(w, c), 0)&lt;/script&gt;

&lt;ul&gt;
  &lt;li&gt;PPMI assigns high values to rare events, it is advisable to apply a count threshold or smooth the probabilities.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Computing%20PPMI%20on%20a%20word%E2%80%93context%20matrix.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;看一個&lt;a href=&quot;http://cpmarkchang.logdown.com/posts/195584-natural-language-processing-pointwise-mutual-information&quot;&gt;例子&lt;/a&gt;，&lt;/p&gt;

&lt;p&gt;下圖是一個 Co-occurrence matrix，列是 target words，行是 context words
&lt;img src=&quot;http://localhost:4000/blog/img/posts/PMI%20example.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;假設這篇文章總共只有 19 個字，這裡我們計算 x = information，y = data 的 PMI 值，
&lt;img src=&quot;http://localhost:4000/blog/img/posts/PMI%20example%202.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;根據同樣的方式可以求出所有 target words 對應的 context words 的 PMI 值。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;language-models&quot;&gt;Language models&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;A &lt;em&gt;probabilistic language model&lt;/em&gt; is a probability distribution over sequences of words in some language.&lt;/li&gt;
  &lt;li&gt;Recent years have seen the rise of &lt;em&gt;neural language models&lt;/em&gt;, which are based on distributed representations of words.&lt;/li&gt;
  &lt;li&gt;By the chain rule, the probability of a sequence of 𝑁 words can be computed using conditional probabilities as&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;p(w_1, w_2,\ldots, w_N) = \prod_{k=1}^N P(w_k|w_1 \ldots w_{k-1})&lt;/script&gt;

&lt;ul&gt;
  &lt;li&gt;To make probability estimates more robust, we can approximate the full history &lt;script type=&quot;math/tex&quot;&gt;w_1 \ldots w_N&lt;/script&gt; by the last few words (馬可夫鍊):&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;p(w_1, w_2,\ldots, w_N) = \prod_{k=1}^N P(w_k|w_{k-n+1} \ldots w_{k-1})&lt;/script&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;language-models---n-gram-models&quot;&gt;Language models - N-gram models&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;An n-gram is a contiguous sequence of n words or characters. 
&lt;br /&gt;
E.g. unigram (Text), bigram (Text Mining), trigram (Text Mining course)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;An n-gram model is a language model defined on n-grams –  a probability distribution over sequences of n words.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;n-gram 是一種語言機率模型。一句話出現的機率是一個聯合模型。如果一個詞的出現只考慮前面一個字，那就是 bi-gram；如果一個詞的出現考慮前面兩個字，那就是 tri-gram。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Formal definition of an n-gram model&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;script type=&quot;math/tex&quot;&gt;n&lt;/script&gt;: the model’s order (1 = unigram, 2 = bigram, …)&lt;/li&gt;
  &lt;li&gt;&lt;script type=&quot;math/tex&quot;&gt;V&lt;/script&gt;: a set of possible words (character); the vocabulary&lt;/li&gt;
  &lt;li&gt;&lt;script type=&quot;math/tex&quot;&gt;P(w\mid u)&lt;/script&gt;: a probability that specifies how likely it is to observe the word &lt;script type=&quot;math/tex&quot;&gt;w&lt;/script&gt; after the context 
&lt;br /&gt;(n − 1)-gram &lt;script type=&quot;math/tex&quot;&gt;u&lt;/script&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Unigram model&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;n = 1&lt;/em&gt; 不考慮前面出現的字。
&lt;img src=&quot;http://localhost:4000/blog/img/posts/Unigram%20model.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Thus contexts are empty.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;MLE of unigram probabilities&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/MLE%20of%20unigram%20probabilities.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Bigram models&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;n = 2&lt;/em&gt; 考慮前面出現的一個字。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Bigram%20models.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Thus contexts are unigrams.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Estimating bigram probabilities&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Estimating%20bigram%20probabilities.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Example&lt;/strong&gt;
(&lt;a href=&quot;https://nlp.stanford.edu/~wcmac/papers/20050421-smoothing-tutorial.pdf&quot;&gt;source&lt;/a&gt;)
&lt;img src=&quot;http://localhost:4000/blog/img/posts/bigram%20example.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Smoothing&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;當在計算 bigram 時可能會碰到兩個字完全沒有相鄰的狀況，這會導致算出來的機率等於 0。（如下圖）&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/bigram%20smoothing.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;這種時候就需要用到，smoothing。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Smoothing methods&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Additive smoothing&lt;/li&gt;
  &lt;li&gt;Good-Turing estimate&lt;/li&gt;
  &lt;li&gt;Jelinek-Mercer smoothing (interpolation)&lt;/li&gt;
  &lt;li&gt;Katz smoothing (backoff)&lt;/li&gt;
  &lt;li&gt;Witten-Bell smoothing&lt;/li&gt;
  &lt;li&gt;Absolute discounting&lt;/li&gt;
  &lt;li&gt;Kneser-Ney smoothing&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;上面的狀況碰到的是，”CHER” 後面沒有出現 “READ” 的狀況，而導致機率等於0，但如果現在是 “CHER” 這個字從未出現在資料集中呢？這種狀況時，smoothing 便派不上用場了。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;In addition to unseen words, a new text may even contain &lt;em&gt;unknown words&lt;/em&gt;. For these, smoothing will not help.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Unknown words&lt;/strong&gt;
&lt;br /&gt;
建立一個 token &lt;UNK&gt;，如果是 unknown words 就用 &lt;UNK&gt; 當作普通的單詞處理。&lt;/UNK&gt;&lt;/UNK&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A simple way to deal with this is to introduce a special word type &lt;em&gt;UNK&lt;/em&gt;, and to smooth it like any other word type in the vocabulary.&lt;/li&gt;
  &lt;li&gt;When we compute the probability of a document, then we first replace every unknown word with &lt;em&gt;UNK&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;language-models---neural-networks-as-language-models&quot;&gt;Language models - Neural networks as language models&lt;/h2&gt;

&lt;h3 id=&quot;advantages-of-neural-language-models&quot;&gt;Advantages of neural language models&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Neural models can achieve better perplexity than probabilistic models, and scale to much larger values of n.&lt;/li&gt;
  &lt;li&gt;Words in different positions share parameters, making them share statistical strength. (Everything must pass through the hidden layer.)&lt;/li&gt;
  &lt;li&gt;The network can learn that in some contexts, only parts of the  n-gram are informative. (implicit smoothing, helps with unknown words)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;word2vec&quot;&gt;word2vec&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;word2vec 是 word embedding 的一種&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;word2Vec 主要有 CBOW (continuous bag-of-words) 和 skip-gram 兩種模型&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;CBOW 是給定上下文，來預測輸入的字詞；Skip-gram 則是給定輸入字詞後，來預測上下文&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.ida.liu.se/~732A92/index.en.shtml&quot;&gt;732A92 Texting Mining&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://fgc.stpi.narl.org.tw/activity/videoDetail/4b1141305ddf5522015de5479f4701b1&quot;&gt;詞向量介紹&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://cpmarkchang.logdown.com/posts/772665-nlp-vector-space-semantics&quot;&gt;自然語言處理 – Vector Space of Semantics&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://zhuanlan.zhihu.com/p/26306795&quot;&gt;[NLP] 秒懂词向量Word2vec的本质&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=OEJ0wxxLO7M&quot;&gt;李宏毅老師的線性代數 - SVD&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://www.shuang0420.com/2017/03/21/NLP%20笔记%20-%20再谈词向量/&quot;&gt;NLP 笔记 - 再谈词向量&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.twblogs.net/a/5c7bdd70bd9eee339918b4da&quot;&gt;機器學習筆記之二十二——PCA與SVD&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://ccjou.wordpress.com/2009/09/01/奇異值分解-svd/&quot;&gt;線代啟示錄-奇異值分解 (SVD)&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://cpmarkchang.logdown.com/posts/195584-natural-language-processing-pointwise-mutual-information&quot;&gt;自然語言處理 – Pointwise Mutual Information&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://nlp.stanford.edu/~wcmac/papers/20050421-smoothing-tutorial.pdf&quot;&gt;NLP Lunch Tutorial: Smoothing&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://kknews.cc/tech/83yx3qn.html&quot;&gt;機器學習五分鐘：自然語言處理（NLP）的N-gram模型是什麼？&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.itread01.com/content/1569742263.html&quot;&gt;詞向量(one-hot/SVD/NNLM/Word2Vec/GloVe)&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Text Mining]Text clustering and topic modelling</title>
   <link href="http://localhost:4000blog//text%20mining/2019/11/21/Text-Mining-Text-clustering-and-topic-modelling/"/>
   <updated>2019-11-21T14:46:00+08:00</updated>
   <id>http://localhost:4000/text%20mining/2019/11/21/[Text Mining]Text clustering and topic modelling</id>
   <content type="html">&lt;p&gt;This post is based on the &lt;a href=&quot;https://www.ida.liu.se/~732A92/index.en.shtml&quot;&gt;732A92 Texting Mining&lt;/a&gt; course, given by Marco Kuhlmann at LiU in 2019.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;在進入 Text clustering 前我想要先介紹 &lt;strong&gt;Clustering&lt;/strong&gt;。&lt;/p&gt;

&lt;h2 id=&quot;clustring&quot;&gt;Clustring&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Clustering (分群）是一種 unsupervised learning（非監督學習）&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Typical applications
    &lt;ol&gt;
      &lt;li&gt;As a stand-alone tool to get insight into data distribution&lt;/li&gt;
      &lt;li&gt;As a preprocessing step for other algorithms&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Cluster: a collection of data objects。但什麼樣的 data 會被歸在同一個 cluster 呢？ 這就是 clustering 最重要的概念，&lt;strong&gt;Similar&lt;/strong&gt; 和 &lt;strong&gt;Dissimilar&lt;/strong&gt;。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Similar&lt;/strong&gt; to one another within the same cluster&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Dissimilar&lt;/strong&gt; to the objects in other clusters&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;=&amp;gt; 而提到 Similar 和 Dissimilar 就要必須要提到 distance (or similarity) measures。有了 distance（similarity）才有辦法定義 Similar 和 Dissimilar。&lt;/p&gt;

&lt;h3 id=&quot;distancesimilarity&quot;&gt;Distance（Similarity）&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Distances are normally used to measure the similarity or dissimilarity between two data objects&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Distances 可以有很多種定義方式，但不管怎麼定義，都一定要符合以下的 properties。&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;script type=&quot;math/tex&quot;&gt;d(i, j) \ge 0&lt;/script&gt; (non-negativity)&lt;/li&gt;
  &lt;li&gt;&lt;script type=&quot;math/tex&quot;&gt;d(i, i) = 0&lt;/script&gt; (identity of indiscernibles)&lt;/li&gt;
  &lt;li&gt;&lt;script type=&quot;math/tex&quot;&gt;d(i, j) = d(j, i)&lt;/script&gt; (symmetry)&lt;/li&gt;
  &lt;li&gt;&lt;script type=&quot;math/tex&quot;&gt;d(i, j) \le d(i, k) + d(k, j)&lt;/script&gt; (triangle inequality)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Minkowski distance&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;d(i, j) = \sqrt[q]{(|x_{i_1} - x_{j_1}|^q + |x_{i_2} - x_{j2}|^q + \ldots + |x_{i_p} - x_{j_p}|^q)}&lt;/script&gt;
, q is a positive integer&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;If q = 1, d is Manhattan distance&lt;/li&gt;
  &lt;li&gt;If q = 2, d is Euclidean distance&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Binary Variables&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;symmetric binary variables: both states are equally important; 0/1&lt;/li&gt;
  &lt;li&gt;asymmetric binary variables: one state is more important than the other (e.g. outcome of disease test); 1 is the important state, 0 the other&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Contingency%20tables%20for%20Binary%20Variables.png&quot; alt=&quot;PMF_two coins.png&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Accuracy for symmetric binary variables&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;sim(i, j) = \frac{a+d}{a+b+c+d}&lt;/script&gt;

&lt;ul&gt;
  &lt;li&gt;Jaccard similarity for asymmetric binary variables&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;sim(i, j) = \frac{a}{a+b+c}&lt;/script&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;text-clustering&quot;&gt;Text clustering&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Conceptual%20framework%20for%20text%20mining.png&quot; alt=&quot;PMF_two coins.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;上圖是 Conceptual framework for text mining，而這篇要介紹的是 Clustering 和 Topic Analysis。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Text clustering&lt;/strong&gt; is the task of grouping similar texts together. What is considered ‘similar’ depends on the application.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Clustering is a central tool in exploratory data analysis, where it can help us to get insights into the distribution of a data set.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Clustering is also useful as a pre-processing technique in knowledge-focused applications. Example: Brown clustering&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/The%20standard%20text%20clustering%20pipeline.png&quot; alt=&quot;PMF_two coins.png&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;similarity-measures&quot;&gt;Similarity measures&lt;/h2&gt;

&lt;p&gt;剛剛前面提到的 Similarity，如何用在 text 上呢？&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Accuracy for symmetric binary vectors&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Accuracy%20for%20symmetric%20binary%20vectors.png&quot; alt=&quot;PMF_two coins.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Jaccard similarity for asymmetric binary vectors&lt;/strong&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;hard-clustering-and-soft-clustering&quot;&gt;Hard clustering and soft clustering&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Hard clustering&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Each document either belongs to a cluster or not. Ex. Hierarchical clustering(brown clustring), Partitioning clustering(k-means), Density-Based clustering(DBSCAN)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Soft clustering&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Each document belongs to each cluster to a certain degree. Ex. LDA (topic model)&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;an-overview-of-hard-clustering-methods&quot;&gt;An overview of hard clustering methods&lt;/h2&gt;

&lt;h3 id=&quot;hierarchical-clustering&quot;&gt;Hierarchical clustering&lt;/h3&gt;

&lt;p&gt;This method does not require the number of clusters k as an input, but needs a termination condition&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Hierarchical%20Clustering.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Agglomerative&lt;/strong&gt;: Each document starts in its own cluster. Hierarchy is created by merging pairs of clusters.
將點倆倆合併，最後所有的點會全部在同一個 cluster 裡。那至於要用什麼決定要將兩個點合併呢？這時候又有 Linkage criteria 來決定，eg. Single-link, Complete-link, Average-link 等等。不同的 linkage criteria 會導致不同的分群結果，如下圖。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Divisive clustering&lt;/strong&gt;: All documents start in one cluster. Hierarchy is created by splitting clusters recursively.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Linkage%20criteria.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Brown clustring&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;partitioning-clustering&quot;&gt;Partitioning clustering&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;K-means&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Issues with the k-means algorithm&lt;/p&gt;
    &lt;ol&gt;
      &lt;li&gt;The k-means algorithm always converges, but there is no guarantee that it finds a global optimum. (Solution: random restarts)&lt;/li&gt;
      &lt;li&gt;The number of clusters needs to be specified in advance, or chosen based on heuristics and cross-validation. (Example: elbow method)&lt;/li&gt;
      &lt;li&gt;The k-means algorithm is not good at handling outliers – every document will eventually belong to some cluster.&lt;/li&gt;
      &lt;li&gt;K-means is restricted to clusters with convex shapes =&amp;gt; Density-Based clustering&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;density-based-clustering&quot;&gt;Density-Based clustering&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;The basic idea behind density-based algorithms is that different regions of the vector space can be more or less densely populated.&lt;/li&gt;
  &lt;li&gt;Under this view, clusters can take any shape; they are not constrained to convex clusters as in k-means.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Directly density-reachable&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;DBSCAN&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;evaluation-of-hard-clustering&quot;&gt;Evaluation of hard clustering&lt;/h2&gt;

&lt;h3 id=&quot;intrinsic-and-extrinsic-evaluation&quot;&gt;Intrinsic and extrinsic evaluation&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;In &lt;strong&gt;intrinsic&lt;/strong&gt; evaluation, a clustering is evaluated based on internal measures such as coherence and separation. &lt;em&gt;Are documents in the same cluster similar? Are clusters well-separated?&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;In &lt;strong&gt;extrinsic&lt;/strong&gt; evaluation, a clustering is evaluated based on data that was not used for the clustering, such as known class labels. &lt;em&gt;cluster purity, Rand index&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;rand-index&quot;&gt;Rand index&lt;/h3&gt;

&lt;p&gt;假設一個集合中有N篇文章
一個集合中有N(N-1)/2個集合對
TP：同一類的文章被分到同一個簇
TN：不同類的文章被分到不同簇
FP：不同類的文章被分到同一個簇
FN：同一類的文章被分到不同簇
Rand Index度量的正確的百分比
RI = （TP+TN）/（TP+FP+FN+TN）&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;topic-models&quot;&gt;Topic models&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;A topic model is a statistical model for representing the abstract topics that are expressed in a collection of documents.&lt;/li&gt;
  &lt;li&gt;Topic models are examples of soft clustering techniques – each document belongs to each cluster (topic) to a certain degree.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;latent-dirichlet-allocation-lda&quot;&gt;Latent Dirichlet Allocation (LDA)&lt;/h3&gt;

&lt;p&gt;LDA有兩個原則，&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;每個 domcuments 是由多個 Topic 組成（each document belongs to each cluster (topic) to a certain degree）&lt;/li&gt;
  &lt;li&gt;每個主題會有不同的 terms 來描述，且同樣對詞可以同時出現在不同的主題。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Topic%20models.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Topic%20models2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.ida.liu.se/~732A92/index.en.shtml&quot;&gt;732A92 Texting Mining&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.ida.liu.se/~732A75/info/courseinfo.en.shtml&quot;&gt;732A75 Advanced Data Mining&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://cpmarkchang.logdown.com/posts/238079-natural-language-processing-brown-clustering&quot;&gt;自然語言處理 – Brown Clustering&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://medium.com/@tengyuanchang/直觀理解-lda-latent-dirichlet-allocation-與文件主題模型-ab4f26c27184&quot;&gt;直觀理解 LDA (Latent Dirichlet Allocation) 與文件主題模型&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.twblogs.net/a/5b8c83e12b717718833363ae&quot;&gt;聚類評價指標 Rand Index,RI,Recall,Precision,F1&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Text Mining]Text classification</title>
   <link href="http://localhost:4000blog//text%20mining/2019/11/13/Text-Mining-Text-classification/"/>
   <updated>2019-11-13T19:43:00+08:00</updated>
   <id>http://localhost:4000/text%20mining/2019/11/13/[Text Mining]Text classification</id>
   <content type="html">&lt;p&gt;This post is based on the &lt;a href=&quot;https://www.ida.liu.se/~732A92/index.en.shtml&quot;&gt;732A92 Texting Mining&lt;/a&gt; course, given by Marco Kuhlmann at LiU in 2019.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;text-classification&quot;&gt;Text classification&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Text classification is the task of categorising text documents into predefined classes.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;evaluation-of-text-classifiers&quot;&gt;Evaluation of text classifiers&lt;/h2&gt;

&lt;p&gt;最簡單的檢視預測結果好壞的方法就是將 predict 出來的類別與真實的類別做比較。（預測必須要在 test data，換句話說之前並沒有參與任何 training 的過程。這點在做所有 Machine Learning 的方法都很重要，在做 model 測試前不要碰 test data。）&lt;/p&gt;

&lt;h3 id=&quot;accuracy&quot;&gt;Accuracy&lt;/h3&gt;
&lt;p&gt;The accuracy of a classifier is the proportion of documents for which the classifier predicts the gold-standard class:&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\textrm{accuarcy} = \frac{\textrm{number of correctly classified documents}}{\textrm{number of all documents}}&lt;/script&gt;

&lt;h3 id=&quot;accuracy-and-imbalanced-data-sets&quot;&gt;Accuracy and imbalanced data sets&lt;/h3&gt;

&lt;p&gt;上面的 accuracy 看起來非常合理啊，去計算分類正確的比例來判斷這個分類器是否預測準確。但，如果其實資料本身的類別並不平均呢？&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/imbalanced%20data%20sets.png&quot; alt=&quot;PMF_two coins.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;根據上圖，我們只要把所有資料都猜綠色的 class，這樣 accuracy 就能有 80%。從這個例子可以知道，&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Evaluation measures are no absolute measures of performance. 如果今天得到 accuracy 是 80% 我們並無法確定這樣的準確率的好壞，要根據每個問題去判斷。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Instead, we should ask for a classifier’s performance relative to other classifiers, or other points of comparison. E.g.’Logistic Regression has a higher accuracy than Naive Bayes.’&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;When other classifiers are not available, a simple baseline is to always predict the most frequent class in the training data.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;precision-and-recall&quot;&gt;Precision and recall&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Precision and recall ‘zoom in’ on how good a system is at identifying documents of a specific class.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Precision is the proportion of correctly classified documents among all documents for which the system predicts class.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\textrm{precision} = \frac{\textrm{# true positives}}{\textrm{# true positives + # false positives}}&lt;/script&gt;

&lt;ul&gt;
  &lt;li&gt;Recall is the proportion of correctly classified documents among all documents with gold-standard class.&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\textrm{recall} = \frac{\textrm{# true positives}}{\textrm{# true positives + # false negatives}}&lt;/script&gt;

&lt;h2 id=&quot;f1-measure&quot;&gt;F1-measure&lt;/h2&gt;
&lt;p&gt;A good classifier should balance between precision and recall.  &lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\textrm{F1} = \frac{2 \cdot \textrm{precision} \cdot \textrm{recall}}{\textrm{precision + recall}}&lt;/script&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;naive-bayes-classifier&quot;&gt;Naive Bayes classifier&lt;/h2&gt;

&lt;h3 id=&quot;bayes-theorem&quot;&gt;Bayes’ theorem&lt;/h3&gt;

&lt;p&gt;We know that &lt;script type=&quot;math/tex&quot;&gt;C&lt;/script&gt; is classes, &lt;script type=&quot;math/tex&quot;&gt;x_i, i = 1, \cdots,n&lt;/script&gt; is features. Using Bayes’ theorem, the conditional probability can be decomposed as&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;p(C|x_1,..., x_n) = \frac{p(C)~p(x_1, \cdots,x_n|C)}{p(x_1, \cdots,x_n)}&lt;/script&gt;

&lt;p&gt;也就是，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\textrm{posterior} = \frac{\textrm{prior} \times \textrm{likelihood}}{\textrm{evidence}}&lt;/script&gt;

&lt;p&gt;根據上式，我們可以將分母視為常數，因為 features &lt;script type=&quot;math/tex&quot;&gt;x_i, i = 1, \cdots,n&lt;/script&gt; 的值是給定的，且與 &lt;script type=&quot;math/tex&quot;&gt;C&lt;/script&gt; 無關，所以可以得到&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align}
p(C, x_1, \cdots,x_n) &amp; = p(C)~p(x_1,\cdots,x_n|C) \\
&amp; \propto p(C)~p(x_1|C)~p(x_2,\cdots,x_n|C,x_1) \\
&amp; \propto p(C)~p(x_1|C)~p(x_2|C, x_1)~p(x_3,\cdots,x_n|C,x_1,x_2) \\ 
&amp; \propto p(C)~p(x_1|C)~p(x_2|C, x_1)~p(x_3|C, x_1, x_2)~p(x_4,\cdots,x_n|C,x_1,x_2,x_3) \\
&amp; \propto \cdots\\
&amp; \propto p(C)~p(x_1|C)~p(x_2|C, x_1)~p(x_3|C, x_1, x_2) \cdots p(x_n|C,x_1,x_2,\cdots ,x_n) \\
\end{align} %]]&gt;&lt;/script&gt;

&lt;h3 id=&quot;naive-bayes-assumption&quot;&gt;Naive Bayes assumption&lt;/h3&gt;

&lt;p&gt;Naive Bayes 假設 
&lt;script type=&quot;math/tex&quot;&gt;p(x_i|C, x_j) = p(x_i|C), \textrm{for} ~ i \ne j&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;根據 Naive Bayes 的假設，前面的式子我們可以寫成，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align}
p(C|x_1,..., x_n) &amp; \propto p(C, x_1, \cdots,x_n) \\
&amp; \propto p(C)~p(x_1|C)~p(x_2|C)~p(x_3|C) \cdots p(x_n|C) \\
&amp; \propto p(C)~\prod_{i=1}^n p(x_i|C)
\end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;根據上面的推導過程，我們可以得到，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;p(C|x_1,..., x_n) = \frac{1}{Z}~p(C)~\prod_{i=1}^n p(x_i|C)&lt;/script&gt;

&lt;h3 id=&quot;naive-bayes-classifer&quot;&gt;Naive Bayes classifer&lt;/h3&gt;

&lt;p&gt;而 Naive Bayes classifer 就是取各個分類 &lt;script type=&quot;math/tex&quot;&gt;C_m, m = 1, \cdots, k&lt;/script&gt; 
中 &lt;script type=&quot;math/tex&quot;&gt;p(C|x_1,..., x_n)&lt;/script&gt; 值最大的為最後的分類結果。換句話說，我們可用這樣的式子表示&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;C_m = \mathop{\arg\max}_C p(C|x_1,..., x_n) =  \mathop{\arg\max}_C p(C)~\prod_{i=1}^n p(x_i|C)&lt;/script&gt;

&lt;p&gt;而 &lt;script type=&quot;math/tex&quot;&gt;C_m&lt;/script&gt; 就是最後的分類結果。&lt;/p&gt;

&lt;h3 id=&quot;two-classic-naive-bayes-variants-for-text&quot;&gt;Two Classic Naive Bayes Variants for Text&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;Multinomial Naive Bayes
    &lt;ul&gt;
      &lt;li&gt;Data follows a multinomial distribution (多項分布)&lt;/li&gt;
      &lt;li&gt;Each feature values is a count (word occurrence counts, TF-IDF weighting, …)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Bernoulli Naive Bayes
    &lt;ul&gt;
      &lt;li&gt;Data follows a multivariate Bernoulli distribution&lt;/li&gt;
      &lt;li&gt;Each feature is binary (word is present / absent)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Lab:&lt;/strong&gt; &lt;a href=&quot;https://github.com/shihs/732A92-TextMining/blob/master/Lab1/TM-L2.ipynb&quot;&gt;Text classification Lab&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.ida.liu.se/~732A92/index.en.shtml&quot;&gt;732A92 Texting Mining&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.ycc.idv.tw/confusion-matrix.html&quot;&gt;如何辨別機器學習模型的好壞？秒懂Confusion Matrix&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://zh.wikipedia.org/wiki/朴素贝叶斯分类器&quot;&gt;wikipeida - 單純貝氏分類器&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Text Mining]Information Retrieval</title>
   <link href="http://localhost:4000blog//text%20mining/2019/11/05/Text-Mining-Information-Retrieval/"/>
   <updated>2019-11-05T13:15:00+08:00</updated>
   <id>http://localhost:4000/text%20mining/2019/11/05/[Text Mining]Information Retrieval</id>
   <content type="html">&lt;p&gt;This post is based on the &lt;a href=&quot;https://www.ida.liu.se/~732A92/index.en.shtml&quot;&gt;732A92 Texting Mining&lt;/a&gt; course, given by Marco Kuhlmann at LiU in 2019.&lt;/p&gt;

&lt;p&gt;這門課教授的是英文的文字探勘，中文與英文本身在結構上有非常大的差異，所以有些解析和斷詞的方法中文可能並不適用，但在基本概念上還是有相同的地方。&lt;/p&gt;

&lt;p&gt;每個主題都有一個 Lab 附在文章最後。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;information-retrieval-ir&quot;&gt;Information Retrieval (IR)&lt;/h2&gt;

&lt;p&gt;Information Retrieval (IR) is finding material (usually documents) of an unstructured nature (usually text) that satisfies an information need from within large collections (usually stored on computers).&lt;/p&gt;

&lt;p&gt;中文稱為「資訊檢索」。從一堆的 unstructured 資料中（通常是文字）找出符合我們需要的條件的資料。&lt;/p&gt;

&lt;p&gt;例如，google 搜尋就是一個例子。我們在搜尋 bar 裡輸入我們想要找到的關鍵字，google 搜尋引擎會從它儲存的所有 database（網站們） 中找出符合我們關鍵字條件的網站給我們。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;那我們要如何找到包含這些關鍵字的文章呢？&lt;/p&gt;

&lt;p&gt;最直觀地想應該就是把有我們搜尋的關鍵字的文章抓出來吧！這就是 Boolean retrieval。&lt;/p&gt;

&lt;p&gt;在進入 Boolean retrieval 之前先來看一下 The classic search model。&lt;/p&gt;

&lt;h3 id=&quot;the-classic-search-model&quot;&gt;The classic search model&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;To communicate her/his information need to an IR system, the user formulates a &lt;em&gt;search query&lt;/em&gt;.&lt;/li&gt;
  &lt;li&gt;The objective of the IR system is to find documents in the collection that ‘match’ the search query.&lt;/li&gt;
  &lt;li&gt;A good IR system finds documents that are also relevant for the user’s information need.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/The%20classic%20search%20model.png&quot; alt=&quot;PMF_two coins.png&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;boolean-retrieval&quot;&gt;Boolean retrieval&lt;/h3&gt;

&lt;p&gt;The Boolean retrieval model is a model for information retrieval in which we can pose any query which is in the form of a Boolean expression of terms, that is, in which terms are combined with the operators AND, OR, and NOT. The model views each document as just a set of words.&lt;/p&gt;

&lt;p&gt;很直覺的方法要找出包含關鍵字的可以使用 terms(通常是個單詞) 是否包含在 documents 裡。&lt;/p&gt;

&lt;p&gt;例如，現在有 Sherlock Holmes 小說文字。我想要找出哪些篇章符合出現 ‘Moriarty’ 和 ‘Lestrade’ 但不包含 ‘Adair’。那麼下的 query 就會是 &lt;em&gt;Moriarty AND Lestrade AND NOT Adair&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;那個我們可以將上面的概念寫成一個 &lt;strong&gt;Term–document matrix&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Term–document matrix&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Term%E2%80%93document%20matrix.png&quot; alt=&quot;PMF_two coins.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;每一行代表一個章節，每一列代表一個條件的單詞（term）。以列來看，0 表示該單詞沒有出現在那一章節中，1 表示該單詞有出現。
&lt;br /&gt;
像是第一列，’Adair’ 只有出現在 ‘Empty house’ 這個章節。&lt;/p&gt;

&lt;p&gt;這樣的方法看似簡單，但以實務上來說並不是個好辦法。因為，&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Term–document matrices are sparse. 可以從上面的 matrix 看到，有很多的 0 ，也就是說其實很多資訊並不需要，但卻還是需要儲存。&lt;/li&gt;
  &lt;li&gt;假如現在有 1,000,000 份 documents，有 500,000 不同的 terms ，這樣的條件下會產生 a matrix with 500,000,000,000 entries (62,5 GB)。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;所以我們必須得使用別的辦法減少不必要的資訊儲存。這時候就有了 Inverted index。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Inverted index&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The inverted index is a key–value mapping, the basic idea is shown below.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;the keys are search terms&lt;/li&gt;
  &lt;li&gt;the values are sorted lists of document identifiers (ids)&lt;/li&gt;
  &lt;li&gt;the list for terms identifies those documents that contain the terms&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Inverted%20index.png&quot; alt=&quot;PMF_two coins.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;從上圖我們可以看到，和 Term–document matrix 不一樣的是 Inverted index 只儲存了有包含該單詞的 document ids。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;現在我們知道我們要的是去看那些關鍵字是否包含在 documents 中，但我們並不會每一次找關鍵字的時候一篇一篇文章搜索，我們會先建立一個儲存好所有 term 的 matrix，
但我們要怎麼決定是哪些 terms 要被儲存呢？&lt;/p&gt;

&lt;h2 id=&quot;index-construction&quot;&gt;Index construction&lt;/h2&gt;

&lt;p&gt;The major steps in index construction:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Collect the documents to be indexed.&lt;/li&gt;
  &lt;li&gt;Tokenize the text.&lt;/li&gt;
  &lt;li&gt;Do linguistic preprocessing of tokens.&lt;/li&gt;
  &lt;li&gt;Index the documents that each term occurs in.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/building%20an%20index%20by%20sorting%20and%20grouping.png&quot; alt=&quot;PMF_two coins.png&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;tokenization&quot;&gt;Tokenization&lt;/h3&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;raw&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Apple is looking at buying U.K. startup for $1 billion.&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# tokenize raw text based on whitespace&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;token&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;raw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; 
	&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;# tokenize using spaCy&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;spacy&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;nlp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;spacy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;en_core_web_sm&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;token&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nlp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;raw&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 結果：&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Apple&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# is&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# looking&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# at&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# buying&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# U.K.&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# startup&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# for&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# $&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 1&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# billion&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# . &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;英文每個單字可以很容易地使用空白（.split()）來分割出每個單字，但只使用
split 無法排除標點符號的問題，python 的 spacy 可以將標點符號也區分出來。&lt;/p&gt;

&lt;h3 id=&quot;stop-words&quot;&gt;Stop words&lt;/h3&gt;
&lt;p&gt;A stop word is a word that is frequent but does not contribute much value for the application in question. For example: a, the, and…&lt;/p&gt;

&lt;p&gt;但根據分析的目的不同，會有不同的 stop words 的定義。以分析 Sherlock Holmes 的小說為例，資料裡面肯定會包含非常大量的 Sherlock Holmes，那這種時候我們或許可以根據分析的目的將 Sherlock Holmes 定義為 stop words。換句話說，並不存在一個所有分析通用的 stop words 資料集。&lt;/p&gt;

&lt;p&gt;既然 stop words 對於分析沒有價值貢獻，那麼在做分析前就必須把 stop words 刪除，以避免干擾分析結果。&lt;/p&gt;

&lt;h3 id=&quot;lexemes-and-lemmas&quot;&gt;Lexemes and lemmas&lt;/h3&gt;

&lt;p&gt;英文的文法有幾個規則，&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;動詞會根據人稱與時態有所變化&lt;/li&gt;
  &lt;li&gt;動詞有動名詞型態&lt;/li&gt;
  &lt;li&gt;名詞的單數與複數有變化&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;但在分析前必須要將這些相同意義但不同型的單字修正為相同以便分析。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;The term &lt;em&gt;lexeme&lt;/em&gt; refers to a set of word forms that all share the same fundamental meaning. 
&lt;br /&gt;
For example: word forms run, runs, ran, running – lexeme run&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;The term &lt;em&gt;lemma&lt;/em&gt; refers to the particular word form that is chosen, by convention, to represent a given lexeme. 
&lt;br /&gt;
For example: what you would put into a lexicon&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;ranked-retrieval排序檢索&quot;&gt;Ranked retrieval（排序檢索）&lt;/h2&gt;

&lt;p&gt;進行到這裡我們已經知道如何要先建立一個有所有 term 的 matrix for 所有的 documents，然後使用 boolean retrieval 找出我們要的 documents，但這樣並沒有考慮到單詞的重要性。換句話說，一個很常出現的單詞有可能並沒有比一個出現次數較少但卻在某 document 出現還要重要，我們可能更想要抓出含有那個單詞的文章。所以我們必須要 rank 那些抓出來的 terms。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Problems with Boolean retrieval&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Not many users are capable of writing high-quality Boolean queries, and many find the process too time-consuming.&lt;/li&gt;
  &lt;li&gt;Feast or famine: Boolean queries tend to return either too many results, or no results at all.&lt;/li&gt;
  &lt;li&gt;Intuitively, whether or not a document ‘matches’ a search query is not a Boolean property, but is gradual in nature.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Ranked retrieval&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;A ranked retrieval system assigns scores to documents based on how well they match a given search query. (There are many possible ways of scoring.)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Based on the score, a ranked retrieval system can return a list of the top documents in the collection with respect to the query.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;前面提到的 boolean retrieval 只考慮了文件是否包含或不包含要的詞彙，為了那個詞彙的「重要性」也考慮進去，我們要給予每個 term 不同的 weight。&lt;/p&gt;

&lt;h3 id=&quot;term-weighting&quot;&gt;Term weighting&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;The score of a document d with respect to a query q is the sum of the weights of all terms t that occur in both d and q.&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\textrm{score(d, q)} = \sum_{t \in (d \bigcap q)} \textrm{weight(d, q)}&lt;/script&gt;

&lt;ul&gt;
  &lt;li&gt;Any specific way to assign weights to terms is called a term weighting scheme.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;計算 weight 的方法有很多種，也可以自行定義，這邊介紹一種常用的方法。&lt;/p&gt;

&lt;h3 id=&quot;tdidf-weight&quot;&gt;TD–IDF weight&lt;/h3&gt;

&lt;p&gt;TD–IDF is Term frequency–inverse document frequency. This formula includes two parts: Term frequency &amp;amp; Inverse document frequency.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Term frequency&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The number of times a term t occurs in a document d is called the term frequency of t in d, and is denoted by tf(t, d).&lt;/p&gt;

&lt;p&gt;-&lt;em&gt;A problem with term frequency&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Relevance is not a linear function of term frequency. 例如，一個出現20次的單詞難道就代表它比一個只出現1次的單詞重要20倍嗎？為了要降低出現頻率造成太大的影響，所以我們將 frequency 取 log，這時候 weight(t, d) 定義成，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
weight(t, d) = \left\{ \begin{array}{rcl}
1 + log_{10}tf(t, d), &amp; if ~ tf(t, d) &gt; 0 \\
0, &amp; others \\
\end{array}\right. %]]&gt;&lt;/script&gt;

&lt;p&gt;稱作，&lt;em&gt;log-frequency weighting&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;-&lt;em&gt;Another problem with term frequency&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;時常重複出現的慣用詞彙對一個文件的影響很大。例如，現在想要考慮 Sherlock Holmes 裡包含 Moriarty 和 Holmes 的章節，但當我們下 query 去找時會發現，Holmes 出現最多的章節幾乎沒有 Moriarty，這是因為 Holmes 在這些文本裡出現的比例實在太高了，如果直接以它出現的頻率來分析肯定會造成很大的誤差，進而影響了出現次數少很多的 Moriarty。所以這時候 Inverse document frequency 就非常重要了！&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Inverse document frequency&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Let N be the total number of documents in the collection.&lt;/li&gt;
  &lt;li&gt;The number of documents that contain a term t is called the
document frequency of t, and is denoted by df(t).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;It denotes by idf(t):&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\textrm{idf(t)} = log \frac{N}{df(t)}&lt;/script&gt;

&lt;p&gt;df(t) 越大代表該詞彙出現在越多文章中，也就是說，如果 df(t) 越常出現，則 idf(t) 就會越小，換句話說，該詞彙的重要性越小。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;TD–IDF Weight&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;現在我們有了 td 和 idf，tf–idf weight 就是將這兩個數字相乘（出現次數乘以重要性），&lt;/p&gt;

&lt;p&gt;The &lt;strong&gt;tf–idf weight&lt;/strong&gt; of a term t in a document d is defined as&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\textrm{tf–idf(t, d)} = tf(t, d) \cdot log \frac{N}{df(t)}&lt;/script&gt;

&lt;p&gt;where N denotes the number of documents in the collection.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Variations of the tf–idf weighting scheme&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;因為 df(t) 可能是 0，所以我們改良一下上面的式子。&lt;/p&gt;

&lt;p&gt;In scikit-learn, the tf–idf weight is computed as&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\textrm{tf–idf(t, d)} = tf(t, d) \cdot (log \frac{1 + N}{1 + df(t)} + 1)&lt;/script&gt;

&lt;p&gt;where N denotes the number of documents in the collection.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;the-vector-space-model&quot;&gt;The vector space model&lt;/h2&gt;

&lt;h3 id=&quot;document-representations&quot;&gt;Document representations&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Documents as sets of terms
&lt;br /&gt;
In Boolean retrieval, the only relevant information is whether or not a term is present in a document.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Documents as bags of terms
&lt;br /&gt;
In ranked retrieval based on term frequency, the only relevant information is how often a term is present in a document.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;the-vector-space-model--idea-1&quot;&gt;The vector space model – idea 1&lt;/h3&gt;
&lt;p&gt;Represent documents as vectors in a high-dimensional space:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The dimensions (axes) of the space correspond to the terms in
the vocabulary (potentially relevant terms). For example: could be set of all words in the collection, set of most frequent words, …&lt;/li&gt;
  &lt;li&gt;The values of the vector components depend on the term weighting scheme: Boolean values, counts, tf–idf values, … (in scikit-learn: CountVectorizer, TfidfVectorizer)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;the-vector-space-model--idea-2&quot;&gt;The vector space model – idea 2&lt;/h3&gt;
&lt;p&gt;To rank documents in the vector space model,&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;we represent the query as a vector in the same space as the documents in the collection&lt;/li&gt;
  &lt;li&gt;we compute the score of a candidate document as the similarity between its document vector and the query vector (similarity = proximity in the vector space)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;cosine-similarity&quot;&gt;Cosine similarity&lt;/h3&gt;

&lt;p&gt;以下舉一個從一篇&lt;a href=&quot;https://raymondyangsite.wordpress.com/2017/05/03/retrieval-model-vector-space-model1/&quot;&gt;部落格&lt;/a&gt;看到的例子，&lt;/p&gt;

&lt;p&gt;例如:
Query = {“Hello”}
Doc1 = {“Foo”, “Foo”}
Doc2 = {“Hello”, “World”}&lt;/p&gt;

&lt;p&gt;在經過計算之後，我們知道其向量分別為（可以使用 tf-idf values, counts,… 等等）&lt;/p&gt;

&lt;p&gt;Query = (1, 0, 0)
Doc1 = (0, 0, 2)
Doc2 = (1, 1, 0)&lt;/p&gt;

&lt;p&gt;我們可以使用歐幾里德距離算出 query 和兩個 documents 的距離分別是，根號5和1。但計算歐幾里德距離忽略掉了單詞出現的頻率的影響。&lt;/p&gt;

&lt;p&gt;如果說今天把上面的向量改一下，&lt;/p&gt;

&lt;p&gt;Query = (2, 0, 0)
Doc1 = (0, 0, 4)
Doc2 = (2, 2, 0)&lt;/p&gt;

&lt;p&gt;這時候 所有的距離都變成了兩倍，但其實他們完全是平行的向量。&lt;/p&gt;

&lt;p&gt;那如果我們考慮向量之間的角度呢？也就是計算兩個向量的 dot，這時候會發現，長度還是影響了最後的數值。&lt;/p&gt;

&lt;p&gt;因此，使用 &lt;strong&gt;Cosine similarity&lt;/strong&gt; 來將數值 normalized。使用 cosine 後，數值只會介於 -1 和 1 之間，並且只需要考慮非0的數值。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;evaluation-of-information-retrieval-systems&quot;&gt;Evaluation of information retrieval systems&lt;/h2&gt;

&lt;p&gt;To evaluate an IR system we need:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;a document collection&lt;/li&gt;
  &lt;li&gt;a collection of queries&lt;/li&gt;
  &lt;li&gt;a gold-standard relevance judgement&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Precision%20and%20recall%20for%20Boolean%20retrieval.png&quot; alt=&quot;PMF_two coins.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Precision:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Precision (P) is the fraction of retrieved documents that are relevant&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;Precision = \frac{\textrm{#(relevant items retrieved)}}{\textrm{#(retrieved items)}} = P(\textrm{relevant|retrieved})&lt;/script&gt;

&lt;p&gt;&lt;strong&gt;Recall:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Recall (R) is the fraction of relevant documents that are retrieved&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;Recall = \frac{\textrm{#(relevant items retrieved)}}{\textrm{#(relevant items)}} = P(\textrm{retrieved|relevant})&lt;/script&gt;

&lt;p&gt;&lt;strong&gt;F1-measure&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;A good system should balance between precision and recall.   
&lt;br /&gt;
The F1-measure is the harmonic mean of the two values:&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;F1 = \frac{2}{\frac{1}{Precision} + \frac{1}{Recall}}&lt;/script&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Lab:&lt;/strong&gt; &lt;a href=&quot;https://github.com/shihs/732A92-TextMining/blob/master/Lab1/TM-L1.ipynb&quot;&gt;Information Retrieval Lab&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reference:&lt;/strong&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.ida.liu.se/~732A92/index.en.shtml&quot;&gt;732A92 Texting Mining&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://nlp.stanford.edu/IR-book/information-retrieval-book.html&quot;&gt;Introduction to Information Retrieval&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://taweihuang.hpd.io/2017/03/01/tfidf/&quot;&gt;[文件探勘] TF-IDF 演算法：快速計算單字與文章的關聯&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://raymondyangsite.wordpress.com/2017/05/03/retrieval-model-vector-space-model1/&quot;&gt;Vector Space Model(1)&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.ycc.idv.tw/confusion-matrix.html&quot;&gt;如何辨別機器學習模型的好壞？秒懂Confusion Matrix&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Machine Learning]Markov Chain Monte Carlo (MCMC)</title>
   <link href="http://localhost:4000blog//machine%20learning/2019/03/12/Machine-Learning-Markov-chain-Monte-Carlo-(MCMC)/"/>
   <updated>2019-03-12T14:58:00+08:00</updated>
   <id>http://localhost:4000/machine%20learning/2019/03/12/[Machine Learning]Markov chain Monte Carlo (MCMC)</id>
   <content type="html">&lt;p&gt;&lt;strong&gt;MCMC 是什麼？&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Markov Chain Monte Carlo （MCMC）是一種抽樣方法，用來解決無法直接抽樣的分佈的隨機抽樣問題。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The Goal of MCMC&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;We want to sample from some distribution p, or approximate an &lt;script type=&quot;math/tex&quot;&gt;E[f(x)] ~ where ~ (X \sim p)&lt;/script&gt;
&lt;br /&gt;
通常 p 是一個很複雜的 distribution，要從這個分佈取 sample 根本不可能，所以這時候就會需要 MCMC。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;為什麼要使用 MCMC？&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;在 Baysian Inference 中常使用到這個公式&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;p(\theta\mid y) = \frac{p(y \mid \theta) p(\theta)}{\int p(y \mid \theta) p(\theta)d\theta}&lt;/script&gt;

&lt;p&gt;或是，它的參數 &lt;script type=&quot;math/tex&quot;&gt;\theta&lt;/script&gt; 的貝式估計&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\hat \theta = E[\theta \mid y] = \int \theta p(y \mid \theta) d \theta = \frac{\int \theta p(y \mid \theta) p(\theta)}{\int p(y \mid \theta) p(\theta)d\theta}&lt;/script&gt;

&lt;p&gt;其中的 &lt;script type=&quot;math/tex&quot;&gt;p(\theta)&lt;/script&gt; 為先驗機率 (prior probability)，基本上我們無法獲得 &lt;script type=&quot;math/tex&quot;&gt;p(\theta)&lt;/script&gt; 的值，這時候就需要 MCMC。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;MCMC 由兩部分的觀念 (步驟) 組成, 一個是 「Markov Chain」 ，另一個則是「Monte Carlo integration」，接下來將說明這兩個部分。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Monte Carlo Integration&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Monte Carlo Integration 可以以抽樣平均的方式計算上面的期望值式子&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;E[\theta \mid y] \approx \frac{1}{n}\sum_{i=1}^{t}{(\theta_i \mid y)}, ~ \theta_i \stackrel{iid}{\sim} p(\theta \mid y)&lt;/script&gt;

&lt;p&gt;也就是說，使用樣本平均數來估計期望值。這件事情可以成立是因為，根據大數法則，當樣本數 n 夠大時，樣本的平均數將趨近於母體平均數。&lt;/p&gt;

&lt;p&gt;這樣看起來 Monte Carlo Integration 讓我們省去了上面那個看起來複雜的積分式子。但是，現實生活中很多時候並無法從 &lt;script type=&quot;math/tex&quot;&gt;p(\theta \mid y)&lt;/script&gt; 這個 distribution 抽樣，要不就是不知道這個 distribution，要不就是這個 distribution 爆炸複雜啊。&lt;/p&gt;

&lt;p&gt;所以說，哪有這麼好的事？&lt;/p&gt;

&lt;p&gt;這時候可以採用其他的抽樣方法，譬如，&lt;em&gt;rejection sampling&lt;/em&gt;, &lt;em&gt;importance sampling&lt;/em&gt; 和本文的重點 &lt;em&gt;MCMC&lt;/em&gt;。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Markov Chain&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Markov Chain (馬可夫鍊)：A Markov chain is a sequence &lt;script type=&quot;math/tex&quot;&gt;X_0, X_1, ...&lt;/script&gt; of random variables such that the distribution of the next value depends only on the current on (and parameters). 現在有一隨機變數數列 &lt;script type=&quot;math/tex&quot;&gt;X_0, X_1, ...&lt;/script&gt;，且每一個變數只和前一個變數有關，也就是 &lt;script type=&quot;math/tex&quot;&gt;X_{t+1}&lt;/script&gt; 來自 &lt;script type=&quot;math/tex&quot;&gt;p(X_{t+1} \mid X_t)&lt;/script&gt;，像這樣的數列我們就稱為馬可夫鍊。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;p(X_{t+1} \mid X_t)&lt;/script&gt; 被稱為這個馬可夫鍊的轉換核心 (transition kernel)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;A Markov chain is stationary, with stationary distribution &lt;script type=&quot;math/tex&quot;&gt;Φ, if ~\forall k ~ X_k  \sim Φ&lt;/script&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;One shows (not trivial in general) that under &lt;em&gt;certain&lt;/em&gt; conditions a Markov chain will converge to the stationary distribution in the limit. 在一般條件假設底下，馬可夫鍊的變數分配將收斂到目標機率函數 &lt;script type=&quot;math/tex&quot;&gt;\pi(·)&lt;/script&gt; 並且與 &lt;script type=&quot;math/tex&quot;&gt;X_0&lt;/script&gt; 的選擇無關。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;Monte Carlo Integration&lt;/em&gt;可以看&lt;a href=&quot;https://www.youtube.com/watch?v=MKnjsqYVG4Y&quot;&gt;這裡&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=3ZmW_7NXVvk&quot;&gt;(ML 18.1) Markov chain Monte Carlo (MCMC) introduction-12eZWG0Z5gY.mp4&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://web.ntpu.edu.tw/~ccw/statmath/M_mcmc.pdf&quot;&gt;The Markov Chain Monte Carlo Simulations&lt;/a&gt;
&lt;br /&gt; 
Linköping University - 732A90 Computational Statistics 2019 Lecture 4 slide
&lt;br /&gt;
&lt;a href=&quot;https://zhuanlan.zhihu.com/p/25610149&quot;&gt;[数据分析] Markov Chain Monte Carlo&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=s8w8AsFK77c&amp;amp;list=PLyAft-JyjIYq2SLTHO2ptmx-cChbE5GBm&quot;&gt;徐亦达机器学习课程 Markov Chain Monte Carlo&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://www.cnblogs.com/pinard/p/6625739.html&quot;&gt;MCMC(一)蒙特卡罗方法&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Machine Learning]Covolutional Neural Networks(CNN)(2)</title>
   <link href="http://localhost:4000blog//machine%20learning/2019/03/02/Machine-Learning-Covolutional-Neural-Networks(CNN)(2)/"/>
   <updated>2019-03-02T17:40:00+08:00</updated>
   <id>http://localhost:4000/machine%20learning/2019/03/02/[Machine Learning]Covolutional Neural Networks(CNN)(2)</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;https://shihs.github.io/blog/machine%20learning/2019/02/25/Machine-Learning-Covolutional-Neural-Networks(CNN)/&quot;&gt;前面&lt;/a&gt;介紹了 Convolution operation。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Padding&lt;/li&gt;
  &lt;li&gt;Strided Convolution&lt;/li&gt;
  &lt;li&gt;Convolutions Over Volume
***&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;padding&quot;&gt;Padding&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;為什麼需要 Padding?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/padding.png&quot; alt=&quot;padding.png&quot; height=&quot;400px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Convolution operation 的缺點：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;經過 convolution fitler 後原始圖將變小。如果有很多層 convolutional layer，資訊在每次運算後不斷損失。&lt;/li&gt;
  &lt;li&gt;最邊緣的 pixel 只會被使用到一次，但中間的 pixel 會使用到較多次。也就是說，會有邊緣的很多資訊缺失。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;所以為了解決以上的缺點，我們將 input 的圖的邊緣加上一個 pixel，這樣經過卷積運算後的圖像仍和原圖一樣大。邊緣也是可以加 2 pixel 的。&lt;/p&gt;

&lt;p&gt;以上圖為例，原本為 6x6(nxn) 的圖，經過 3x3(fxf) 的 filter 做卷積運算後，變為 (n-f+1)x(n-f+1) 的圖。&lt;/p&gt;

&lt;p&gt;但如果今天邊緣加上 p pixel，最後圖檔就會變為 (n+2p-f+1)x(n+2p-f+1) 的圖。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;The choice of padding - Vaild and Same convolutions&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Vaild - No padding&lt;/li&gt;
  &lt;li&gt;Same - Pad so that output size is the same as the input size
&lt;br /&gt;
根據上面的公式，如果在 input 圖邊緣加上 pixel 後經過卷積運算要和原始圖檔大小ㄧ樣，那要符合 n+2p-f+1 = n，那就會得到 p = (f-1)/2&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;For computer vision, usually f is odd. 3 by 3 filters are very common.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;strided-convolution&quot;&gt;Strided Convolution&lt;/h2&gt;

&lt;p&gt;前面我們在做 convolution 時 filter 都是一次跳一格計算，strided 則是一次跳不只一格。&lt;/p&gt;

&lt;p&gt;如下圖，這時候最後結果的 pixel 也會不同，計算公式就會是 ((n+2p-f)/2)+1 取 floor。
&lt;img src=&quot;http://localhost:4000/blog/img/posts/strided.png&quot; alt=&quot;strided.png&quot; height=&quot;400px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;cross-correlation vs. convolution&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;cross-correlation：數學家喜歡將 convolutional operation 稱為 cross-correlation。在做運算時會將 filter 做水平與垂直翻轉，如下圖。&lt;/li&gt;
  &lt;li&gt;convolution：在 deep learning 通常都稱為 convolution，且不會將 filter 做鏡射的動作。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/cross-correlation.png&quot; alt=&quot;cross-correlation.png&quot; height=&quot;400px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;那這樣幹嘛要翻轉？因為在做訊號處理時，翻轉後會有一些好的特性可以拿來使用。但在做 deep learning 時基本上沒有影響，所以做 deep learning 時不會翻轉 filter。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;convolutions-over-volume&quot;&gt;Convolutions Over Volume&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Convolutions on RGB impages&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;前面舉的例子都是在 2D 上計算 convolution，現在要來看如何在 3D 上實現 convolution。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;https://www.coursera.org/learn/convolutional-neural-networks/home/welcome&quot;&gt;Coursera - Convolutional Neural Networks(deeplearning.ai)&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Algorithm]基因演算法Genetic Algorithm</title>
   <link href="http://localhost:4000blog//algorithm/2019/03/02/Algorithm-%E5%9F%BA%E5%9B%A0%E6%BC%94%E7%AE%97%E6%B3%95Genetic-Algorithm/"/>
   <updated>2019-03-02T15:58:00+08:00</updated>
   <id>http://localhost:4000/algorithm/2019/03/02/Algorithm]基因演算法Genetic Algorithm</id>
   <content type="html">&lt;p&gt;基因演算法（Genetic Algorithm）是一種求函數極值的最佳化（函數的最大或最小值）的方法。&lt;/p&gt;

&lt;p&gt;它的想法是來自於基因遺傳，透過細胞分裂將好的基因保留，不好的基因淘汰，一代傳一代，最後留下最適合生存的物種，所謂「適者生存」。
實現的方式就像基因的機制那樣，透過&lt;em&gt;隨機&lt;/em&gt;選擇後，再進行 crossover 和 mutation，經過多次迭代後，最後結果將會收斂到一個最佳解。但這最佳解不ㄧ定是 global maximum（minimum），通常是 local maximum（minimum）。&lt;/p&gt;

&lt;p&gt;（但其實這與基因的真實行為完全無關，就像是 Neural Network 和人類神經反應的真實行為無關一樣。）&lt;/p&gt;

&lt;hr /&gt;
&lt;h3 id=&quot;演算法流程圖&quot;&gt;演算法流程圖&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/genetic%20algorithm.gif&quot; alt=&quot;genetic algorithm.gif&quot; height=&quot;380px&quot; width=&quot;600px&quot; /&gt;
&lt;a href=&quot;https://dotblogs.com.tw/dragon229/2013/01/03/86692&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;一開始隨機產生n個變數 (n由使用者決定)&lt;/li&gt;
  &lt;li&gt;利用適應函數（fitness function）計算所有變數的適應值&lt;/li&gt;
  &lt;li&gt;依每個的適應值進行「選擇、複製」&lt;/li&gt;
  &lt;li&gt;對留下的變數進行交配（crossover）及突變（mutation）的動作&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;範例&quot;&gt;範例&lt;/h3&gt;

&lt;p&gt;以下範例是來自&lt;a href=&quot;http://www.csie.ntnu.edu.tw/~u91029/Optimization.html&quot;&gt;演算法筆記的 Optimization&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1.
[初始化]
一開始先隨便弄出幾個x。本例是四個。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1010101010
1011001011
1110101011
0010101000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2.
[fitness function]
根據問題特性，定義好壞程度。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;f(1010101010) = 678
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;3.
[selection]
隨便找個位置切一刀，每個x都被分成兩段。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1010101  010
1011001  011
1110101  011
0010101  000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;4.
[crossover]
隨便找兩組你覺得夠優良的x，交叉相接變成新答案。
重複一直做，直到x數目跟原先一樣多。本例是四個。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1010101 \/ 010  -&amp;gt;  1010101 -- 011
1011001 /\ 011      1011001 -- 010 


1010101011
1011001010
1110101010
1010101000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;5.
[mutation]
每個x都隨便找一個地方把數字改掉，也可以不改。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1010111011
1011001000
1110101010
1010101001
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;6.
重複3. 4. 5.，直到裡面有一個x是你滿意的，令f(x)最大的那個x。&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;隨機產生N個x。&lt;/li&gt;
  &lt;li&gt;計算fitness function。&lt;/li&gt;
  &lt;li&gt;重複以下步驟，直到有一個x讓人滿意。
&lt;br /&gt;
　甲、selection。
&lt;br /&gt;
　乙、crossover。
&lt;br /&gt;
　丙、mutation。
&lt;br /&gt;
　丁、計算fitness function。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;一開始的 x 的足夠豐富，多演化幾次就可以得到不錯的結果。一開始的 x 足夠豐富，可以避免進入區域極值。 mutation 用於增加 x 的豐富性，以跳脫區域極值。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.csie.ntnu.edu.tw/~u91029/Optimization.html&quot;&gt;演算法筆記 - Optimization&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://littledoa.wixsite.com/pcclab/single-post/2016/02/03/Genetic-Algorithm-基因演算法&quot;&gt;Genetic Algorithm 基因演算法&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=UE6YkRWBtZk&quot;&gt;人工智慧系列之基因演算法&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Python]filter、map、reduce、lambda</title>
   <link href="http://localhost:4000blog//python/2019/02/27/Python-filter-map-reduce-lambd/"/>
   <updated>2019-02-27T12:02:00+08:00</updated>
   <id>http://localhost:4000/python/2019/02/27/[Python]filter、map、reduce、lambd</id>
   <content type="html">&lt;ul&gt;
  &lt;li&gt;lambda 可以直接定義一些簡單的 funciton。&lt;/li&gt;
  &lt;li&gt;filter、map和reduce這三個函數有點像 R 裡頭的 apply 家族系列。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;lambda&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;我其實覺得就是定義 funciton，只是是定義一些簡單，可以一行完成的 funciton。&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 回傳輸入的變數 + 1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fun&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 上面的 func 其實就等於&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;fun&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;# 輸入兩個變數&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fun&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;# 含 if&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fun&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;filter(function, sequence)&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;對 sequence 中的 item 依序執行 function(item)，然後將執行結果為 True 的 item 組成一個 list/string/tuple（與 sequence 類型相同）回傳。
這時候 function 可以使用 lambda 定義或是平常的 def 定義。&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 回傳是數字，除 0 外都是 True&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fun&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# function 為 def&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; 
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# function 為 lambda&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; 
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;map(function, sequence)&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;對 sequence 中的 item 依序執行 function(item)，執行結果以 list 回傳。&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# funciton 只有一個參數&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 每次都回傳 1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;# function 有兩個參數&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;reduce(function, sequence, starting_value)&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;對 sequence 中的 item 順序迭代調用 function，最後回傳一個值。&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;functools&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;reduce&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 在 python3 是必須的&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 求 list 的和&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;
&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;https://www.cnblogs.com/longdouhzt/archive/2012/05/19/2508844.html&quot;&gt;Python特殊语法：filter、map、reduce、lambda [转]&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Machine Learning]Reinforcement Learning</title>
   <link href="http://localhost:4000blog//machine%20learning/2019/02/25/Machine-Learning-Reinforcement-Learning/"/>
   <updated>2019-02-25T21:31:00+08:00</updated>
   <id>http://localhost:4000/machine%20learning/2019/02/25/[Machine Learning]Reinforcement Learning</id>
   <content type="html">&lt;h3 id=&quot;複習&quot;&gt;複習&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;機器學習可以被分為三大類：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Supervised Learning:
&lt;br /&gt;
Learn to generalize and classify new data based on &lt;em&gt;labelled&lt;/em&gt; training data. 像是 regression 和 classification 就屬於 Supervised Learning。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Unsupervised Learning:
&lt;br /&gt;
Discover structure and relationships in complex high-dimensional data. 像是 cluster。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Reinforcement Learning:
&lt;br /&gt;
Generate policies/strategies that lead to a (possibly delayed) reward. Learn by interacting with the environment! 和人類學習的過程很像，會根據環境而行動，並做調整（像是學騎腳踏車）。這篇主要就是要介紹 Reinforcement Learning。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reinforcement Learning 可以做什麼？&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;2016 年 &lt;a href=&quot;https://zh.wikipedia.org/wiki/AlphaGo&quot;&gt;AlphaGo&lt;/a&gt; 擊敗世界棋王使用的就是 Reinforcement Learning&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=W_gxLKSsSIE&quot;&gt;Robot Learns to Flip Pancakes&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;pole balancing&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Differences to other methods&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Difference to supervised learning
    &lt;ol&gt;
      &lt;li&gt;Time! Reinforcement Learning 的學習時間會比 Supervised Learning 費時（當然要有缺點，不然大家幹嘛還要用 Supervised Learning），所以如果有 labels 通常還是會選用 Supervised Learning，但當事前沒有 labels，不知道結果的時候就可以使用 Reinforcement Learning。&lt;/li&gt;
      &lt;li&gt;Can become better than the system designer, unlike a supervised system that can never become better than the teacher. 因為 Supervised Learning 是根據 system designer 給的 labels 下去計算，但 Reinforcement Learning 是機器自己學習所獲得的結果，就像是，雖然教練教學生打球，但學生的學習成果可能比教練還好。&lt;/li&gt;
      &lt;li&gt;Feedback is usually not immediate but is given after many actions - delayed feedback! 像是下棋，要等到結果贏或輸才會知道是得到 positive reward 還是 negative reward。&lt;/li&gt;
      &lt;li&gt;Feedback is given as a scalar reward, not as the correct action to make. Supervised Learning 的 feedback 是結果是否正確，但 Reinforcement Learning 得到的 feedback 是 reward（can be positive or negative）。&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Difference to control theory
    &lt;ol&gt;
      &lt;li&gt;No physical model of the world, e.g., in pole balancing&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;機器怎麼學？&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;不像 Supervised Learning 有 lable 可以知道結果是正確還是錯誤， Reinforcement Learning 的學習方法是透過 reward 來知道學習結果正確或不正確（就像是狗狗學習技能，如果做對了就給東西吃一樣）。所以透過打分數的結果來知道怎麼樣的行為是正確的而進行調整，往正確的學習道路邁進。（所以每次學習結果所獲得的 reward 就變得有點像是 Supervised Learning 的 labels 的感覺，只是這個 labels 是從學習的過程中獲得的）&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;reinforcement-learning-如何進行&quot;&gt;Reinforcement Learning 如何進行？&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/reinforcement%20learning.png&quot; alt=&quot;reinforcement learning.png&quot; height=&quot;380px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Reinforcement Learning 問題的基本設定&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;A, S, R, P&amp;gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Action space : A&lt;/li&gt;
  &lt;li&gt;State space : S&lt;/li&gt;
  &lt;li&gt;Reward: R : S × A × S → R&lt;/li&gt;
  &lt;li&gt;Transition : P :S × A → S&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;A 代表的是 Agent 的所有動作（action）；S 是 state，是 Agent 所能感知的狀態； R 是 reward 代表獎勵或懲罰，是一個實數；P 是 Agent 所交互的世界，也被稱為 model。&lt;/p&gt;

&lt;p&gt;根據上圖（&lt;a href=&quot;https://www.slideshare.net/yenlung/reinforcement-learning-90737484&quot;&gt;Source&lt;/a&gt;），電腦是 agent，地球代表 environment（環境），reward（獎勵）是環境所提供的反饋，reward 由模型設計者定義，可以是 positive 或是 negative，reward 的定義對強化學習來說是個很重要的一環。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Policy&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Policy 就是 agent 根據每個 state 所做出的不同的 action，也就是根據不同的狀態 agent 會採取不同的「策略」。定義為 &lt;script type=&quot;math/tex&quot;&gt;\pi&lt;/script&gt;，是 RL（Reinforcement Learning） 最核心的問題。可以將 policy 看成是當 agent 感知到 state(S) 採取 action(A) 的 mapping。policy 可以分為隨機的（stochastic policy）和確定性的（deterministic policy）。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;stochastic policy: &lt;script type=&quot;math/tex&quot;&gt;\pi(a\mid s),~ and \sum\pi(a\mid s) = 1&lt;/script&gt;&lt;/li&gt;
  &lt;li&gt;deterministic policy: &lt;script type=&quot;math/tex&quot;&gt;\pi(s)&lt;/script&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Reward&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Reward 是 RL 非常重要的一環，沒有 reward，agent 就不會知道到底學習正確還是錯誤。透過 reward，agent 才知道剛剛採取的 action 好不好。以下圖（&lt;a href=&quot;https://zhuanlan.zhihu.com/p/25239682&quot;&gt;Source&lt;/a&gt;）為例，最一開始的 state 是 &lt;script type=&quot;math/tex&quot;&gt;s_0&lt;/script&gt;，agent 做了 &lt;script type=&quot;math/tex&quot;&gt;a_0&lt;/script&gt; 的 action，這時候產生了一個 reward &lt;script type=&quot;math/tex&quot;&gt;r_1&lt;/script&gt;，然後因為剛剛的 &lt;script type=&quot;math/tex&quot;&gt;a_0&lt;/script&gt; 這時候 state 來到 &lt;script type=&quot;math/tex&quot;&gt;s_1&lt;/script&gt;，而 agent 要採取下一步 &lt;script type=&quot;math/tex&quot;&gt;a_1&lt;/script&gt; 的時候就會根據剛剛的 &lt;script type=&quot;math/tex&quot;&gt;r_1&lt;/script&gt; 來反應。agent 就這樣一步一步根據 reward 的結果來學習。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/reward.jpg&quot; alt=&quot;reward.jpg&quot; height=&quot;120px&quot; width=&quot;800px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;但其實並不是所有的學習都會像這個例子一樣立即獲得 reward，像下棋就會是整局結束後才得到 reward。&lt;/p&gt;

&lt;p&gt;另外，需要注意的是，Reward &lt;script type=&quot;math/tex&quot;&gt;\ne&lt;/script&gt; Goal。也就是說，agent 的目標並不是「當前」reward 最大，而是「平均累計」回報最大。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;總結來說，&lt;em&gt;Reinforcement Learning 的目標就是找到一個最佳的 Policy（策略），讓最後平均的 reward 最大！&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;所以現在問題就來了，&lt;em&gt;要如何衡量這個 policy 好不好？哪些 policies 是我們想要 explore 的？&lt;/em&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;value-function&quot;&gt;Value function&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Value function - How good is a policy?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;定義從長期來看 action 平均回報的好壞。例如，象棋中吃掉對方的車看起來即時收益很大，但如果因為吃掉對方的車自己的將卻被吃了，那麼從長期看這個 action 就不是一個好的選擇。&lt;/p&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;V_\pi(s)&lt;/script&gt; 表示的是策略 &lt;script type=&quot;math/tex&quot;&gt;\pi&lt;/script&gt;，狀態 s 的長期期望收益。&lt;script type=&quot;math/tex&quot;&gt;Q_\pi(s, a)&lt;/script&gt; 是策略 &lt;script type=&quot;math/tex&quot;&gt;\pi&lt;/script&gt; 在狀態 s 下，採取動作 a 的長期期望收益。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;長期回報期望：&lt;script type=&quot;math/tex&quot;&gt;% &lt;![CDATA[
G_t = \sum_{n=0}^{N}\gamma^nr_{t+n}, ~ where ~ 0 &lt; \gamma &lt; 1 %]]&gt;&lt;/script&gt; （因為 &lt;script type=&quot;math/tex&quot;&gt;\gamma&lt;/script&gt; 介於 0 和 1 之間，所以 makes immediate rewards more important than distant rewards）&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Value function：&lt;script type=&quot;math/tex&quot;&gt;V_\pi(s) = E_\pi[G_t\mid S_t = s]&lt;/script&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Q function：&lt;script type=&quot;math/tex&quot;&gt;Q_\pi(s, a) = E_\pi[G_t\mid S_t = s, A_t = a]&lt;/script&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;How to learn V(s)?&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Monte Carlo approach&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Temporal Difference approach&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Summary&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;For a given policy, the value (expected reward) V(s) of each state is unknown before we learn it by interacting with the environment.&lt;/li&gt;
  &lt;li&gt;V(s) is found iteratively, starting for example with V(s)←0, using the Monte Carlo or Temporal Difference methods.&lt;/li&gt;
  &lt;li&gt;The Temporal Difference method generally converges much faster.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;q-learning&quot;&gt;Q-Learning&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Which policies should we explore?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;上面介紹了 V(s) 是狀態 s 的長期期望收益，那 agent 要如何決定根據它來決定要做什麼 action 採取什麼 policies 呢？這時候我們就會加上 action 這個變數來看，也就是上面提到的 Q(s, a)。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;script type=&quot;math/tex&quot;&gt;V^*(s) = \max_{a} Q(s_{k+1}, a)&lt;/script&gt; denote the value function for the optimal policy&lt;/li&gt;
  &lt;li&gt;&lt;script type=&quot;math/tex&quot;&gt;Q(s, a)&lt;/script&gt; is expected future reward of doing action a in state s and then following the optimal policy &lt;script type=&quot;math/tex&quot;&gt;Q(s_k, a) = r(s_k, a) + \gamma V^*(s_{k+1})&lt;/script&gt;&lt;/li&gt;
  &lt;li&gt;&lt;script type=&quot;math/tex&quot;&gt;Q(s, a)&lt;/script&gt; 未知，必須透過學習得到。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;Q(s_k, a_j) \leftarrow (1 - \eta) Q(s_k, a_j) + \eta (r + \gamma \max_{a} Q(s_{k+1}, a))&lt;/script&gt;, &lt;script type=&quot;math/tex&quot;&gt;\eta&lt;/script&gt; is learning rate&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/itplus/article/details/9361915&quot;&gt;這篇文章&lt;/a&gt;翻譯了這個&lt;a href=&quot;http://mnemstudio.org/path-finding-q-learning-tutorial.htm&quot;&gt;原文&lt;/a&gt;，我覺得非常好理解。但要整篇整理在這裡太麻煩了，所以自己看吧。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
Linköping University Neural Networks and Learning Systems TBMI26 / 732A55 2019 Lectures.
&lt;br /&gt;
&lt;a href=&quot;https://zhuanlan.zhihu.com/p/25239682&quot;&gt;深度强化学习（Deep Reinforcement Learning）入门：RL base &amp;amp; DQN-DDPG-A3C introduction&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://zh.wikipedia.org/wiki/强化学习&quot;&gt;wikipedia - 強化學習&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.slideshare.net/yenlung/reinforcement-learning-90737484&quot;&gt;強化學習 Reinforcement Learning&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://morvanzhou.github.io/tutorials/machine-learning/reinforcement-learning/&quot;&gt;莫凡python&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://medium.com/雞雞與兔兔的工程世界/機器學習-ml-note-reinforcement-learning-強化學習-dqn-實作atari-game-7f9185f833b0&quot;&gt;[機器學習 ML NOTE] Reinforcement Learning 強化學習(DQN原理)&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.zhihu.com/question/26408259&quot;&gt;如何用简单例子讲解 Q - learning 的具体过程？&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://blog.csdn.net/itplus/article/details/9361915&quot;&gt;A Painless Q-learning Tutorial (一个 Q-learning 算法的简明教程)&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Machine Learning]Covolutional Neural Networks(CNN)(1)</title>
   <link href="http://localhost:4000blog//machine%20learning/2019/02/25/Machine-Learning-Covolutional-Neural-Networks(CNN)/"/>
   <updated>2019-02-25T16:29:00+08:00</updated>
   <id>http://localhost:4000/machine%20learning/2019/02/25/[Machine Learning]Covolutional Neural Networks(CNN)</id>
   <content type="html">&lt;p&gt;這篇為 Coursera 上 &lt;a href=&quot;https://www.coursera.org/learn/convolutional-neural-networks/home/welcome&quot;&gt;Convolutional Neural Networks&lt;/a&gt; 這門課第一週的 Computer Vision、Edge Detection Example 和 More Edge Detection 筆記。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;前言&quot;&gt;前言：&lt;/h2&gt;

&lt;p&gt;因為 Deep Learning 的快速發展，所以電腦視覺（computer vision）這幾年也迅速的超展開。像是自動駕駛就受惠於 computer vision 的進步，讓自駕車能更準確的偵測路人和其他車輛，提升安全性；或是人臉辨識系統也變得更厲害，像是手機的人臉辨識解鎖；或是使用 Deep Learning 辨別照片是屬於風景照、人、動物還是車輛等等（像是 iphone 的相簿現在就很變態的會自動歸類照片是什麼）；甚至在藝術作品上都有 Deep Learning 的蹤影。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;為什麼要使用-covolutional-neural-networkscnn&quot;&gt;為什麼要使用 Covolutional Neural Networks(CNN)？&lt;/h2&gt;

&lt;h3 id=&quot;computer-vision-problem&quot;&gt;Computer Vision Problem&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Computer%20Vision%20Problem.png&quot; alt=&quot;Computer Vision Problem.png&quot; height=&quot;400px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;以上圖的例子來看，第一張是 64x64 的照片，第二張畫素則是 1000x1000，這時候如果再加上 RGB 三原色的維度，兩張照片的維度分別會是 64x64x3 和 1000x1000x3。以 Neural Network 來實作的話（右下角），input layer 的 Xn 的 n = 1000x1000x3，如果第一層的 hidden 是 1000 個 nodes，這時候轉換的 W 的維度就會是 1000x3000000，這是不是很 CRAZY？&lt;/p&gt;

&lt;p&gt;所以這時候就會碰到以下的問題。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;缺點&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;很難避免 overfitting&lt;/li&gt;
  &lt;li&gt;計算上需要大量的電腦效能和 CPU，實在太不切實際了&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;因此，為了解決的這個問題，我們就需要用到 CNN。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;cnn-的流程圖&quot;&gt;CNN 的流程圖&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://res.mdpi.com/entropy/entropy-19-00242/article_deploy/html/images/entropy-19-00242-g001.png&quot;&gt;Sourse&lt;/a&gt;
&lt;img src=&quot;http://localhost:4000/blog/img/posts/CNN.png&quot; alt=&quot;CNN.png&quot; height=&quot;300px&quot; width=&quot;630px&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;how-the-convolution-operation-works&quot;&gt;How the convolution operation works?&lt;/h2&gt;

&lt;p&gt;現在先來看 convolutional layer 的部分，也是 CNN 非常重要的一個環節。這邊使用 Edge detection 作為範例操作 convolution operation 是如何運作的。&lt;/p&gt;

&lt;h3 id=&quot;edge-detection-example&quot;&gt;Edge detection example&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/edge%20detect.png&quot; alt=&quot;edge detect.png&quot; height=&quot;400px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;在辨識下圖時我們可能會想要做垂直的邊緣辨識和水平的邊緣辨識。那要如何操作呢？&lt;/p&gt;

&lt;h3 id=&quot;vertical-edge-detection&quot;&gt;Vertical edge detection&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/convolutional%20operation.png&quot; alt=&quot;convolutional operation.png&quot; height=&quot;400px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;最左邊的圖是一張 6x6 pixel 的黑白圖，每個 pixel 的數字表示灰階的深度，數字越小代表顏色越深。中間是一個 3x3 的 filter，在有些地方會被稱為 kernel，但這門課都會稱作 filter。這樣的兩個 matrix 做 convolution 運算後（用 * 表示），會產生一個 4x4 的 matrix。&lt;/p&gt;

&lt;p&gt;運算方法則是，將 3x3 的 filter 與圖片的左上方 match（如圖片淺藍底），對應到的格子相乘，最後再將九個數字相加。依序移動 3x3 的 filter，如此最後就會產生一個 4x4 的 matrix。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/convolution%20operation%20result.png&quot; alt=&quot;convolution operation result.png&quot; height=&quot;150px&quot; width=&quot;210px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;而中間的 filter 可以看到是一個由左至右從淺到深的圖。因為現在做的是 Vertical edge detection，所以才會選擇這樣的 filter。&lt;/p&gt;

&lt;p&gt;再看一個例子，
&lt;img src=&quot;http://localhost:4000/blog/img/posts/vertical%20edge%20detection.png&quot; alt=&quot;vertical edge detection.png&quot; height=&quot;400px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我們可以看到，最右邊最後產生的是一個中間一條白色的圖，這就偵測到了我們的想找垂直邊緣的圖（最左邊）的正中間有個邊界。（這個例子看起來邊緣很寬，是因為我們這個圖只有 6x6，如果今天用大一點的圖 1000x1000 就會發現這樣的偵測效果是很好的）&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;different-transitions&quot;&gt;Different transitions&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/vertical%20detection%20different%20transitions.png&quot; alt=&quot;vertical detection different transitions.png&quot; height=&quot;400px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;剛剛的例子是由亮到暗（上），現在的例子是由暗到亮（下），會發現時候最後運算出來的 matrix 也會不同，根據中間的數字我們可以知道，這張圖是由亮到暗還是由暗到亮。下圖的中間偵測得到邊緣數字是 -30，如果今天需要偵測的結果需要知道深淺的變化，那數字就是重要的，但如果今天只是要抓邊緣，也可以將 -30 取絕對值，一樣能抓到轉換的邊界。&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;vertical-and-horizontal-edge-detection&quot;&gt;Vertical and horizontal edge detection&lt;/h3&gt;

&lt;p&gt;看完了垂直的範例，我們再看一下偵測水平邊緣的 filter。
&lt;img src=&quot;http://localhost:4000/blog/img/posts/vertical%20and%20horizontal%20detection.png&quot; alt=&quot;vertical and horizontal detection.png&quot; height=&quot;400px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;different-filters&quot;&gt;Different filters&lt;/h2&gt;

&lt;p&gt;從上面的結果可以發現，不同的 filter 可以讓我們偵測出不同的狀況。這邊提了一下兩個 filter，&lt;em&gt;Sobel filter&lt;/em&gt; 和 &lt;em&gt;Scharr filter&lt;/em&gt;。其實我們可以不需要直接使用現成的 filter，而是可以訓練出一個 filter 針對我們的需求，這之後會再提。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;https://www.coursera.org/learn/convolutional-neural-networks/home/welcome&quot;&gt;Coursera - Convolutional Neural Networks(deeplearning.ai)&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>字元編碼，ASCII、Unicode、UTF-8</title>
   <link href="http://localhost:4000blog//others/2019/01/22/ASCII-Unicode-%E5%92%8C-UTF-8/"/>
   <updated>2019-01-22T16:38:00+08:00</updated>
   <id>http://localhost:4000/others/2019/01/22/ASCII，Unicode 和 UTF-8</id>
   <content type="html">&lt;p&gt;關於編碼，相信大家很常聽到 ASCII、Unicode、UTF-8 這幾個名詞，這篇要根據我的理解來介紹這三個名詞。若有錯歡迎指正:)
&lt;br /&gt;
2022/03/15 上完 Harvard CS50 的 Lecture 0 後做了一些新增與修改。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;字元編碼&quot;&gt;字元編碼&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;在電腦的世界是使用二進位（binary）的方式來進行運算，也就是 0 與 1 兩個 digits（each binary digit called bit）。&lt;/li&gt;
  &lt;li&gt;而電腦是使用「關」與「開」來表示二進位中的 0 與 1。&lt;/li&gt;
  &lt;li&gt;在現代電腦中是由上百萬的電晶體（transistors）來控制這樣的「關」與「開」（0 與 1）。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;ascii&quot;&gt;ASCII&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/ASCII&quot;&gt;ASCII&lt;/a&gt; 是電腦早期發展時由美國制定的一套編碼規則，且沿用至今。它的目的是用來統一規範，規定數字與字母大小寫、符號等等的對應關係，而每一個數字由 8 個 bits 表示。最後一次更新是在1986年，至今為止共定義了 128 個字元。&lt;/p&gt;

&lt;p&gt;像是 &lt;code class=&quot;highlighter-rouge&quot;&gt;HI!&lt;/code&gt; 就是由數字 72、73 和 33 所組成的。由二進位表示就是，&lt;code class=&quot;highlighter-rouge&quot;&gt;01001000&lt;/code&gt;、&lt;code class=&quot;highlighter-rouge&quot;&gt;01001001&lt;/code&gt;、&lt;code class=&quot;highlighter-rouge&quot;&gt;00100001&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Extended ASCII&lt;/strong&gt;
&lt;br /&gt;
但因為一個 byte 共有 8 個 bits，也就是說還有很多個位元並未使用到，所以後來又產生了 Extended ASCII。很多歐洲國家有一些字母並未在 ASCII 中，所以除了 ASCII 為固定的字元外，每個國家根據自己所需給與字元，但也造成每個國家並未統一編碼。（&lt;a href=&quot;https://zh.wikipedia.org/zh-tw/EASCII&quot;&gt;Wikipedia&lt;/a&gt;）&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;unicode&quot;&gt;Unicode&lt;/h2&gt;
&lt;p&gt;隨著網際網路的發展，世界各國交換訊息，未統一的編碼便造成了很大的問題。這時候有了 Unicode 的誕生。&lt;/p&gt;

&lt;p&gt;Unicode 協會將所有的文字與符號都分配一個數字，這個數字的寫起來像是，U+0645，而這個數字就稱為 Code point。U+ 的意思是 Unicode，
數字則是用十六進位表示。&lt;/p&gt;

&lt;p&gt;但 Unicode 編碼使用至少兩個位元儲存字元，若是今天只有英文，仍舊是每個字元使用兩個位元儲存，這表示浪費了很多的資源。所以這時候有有人想出了更好的辦法。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;utf-8&quot;&gt;UTF-8&lt;/h2&gt;
&lt;p&gt;有人發明了 UTF-8 這種儲存方式。&lt;/p&gt;

&lt;p&gt;UTF-8 編碼把一個 Unicode 字元根據不同的數字大小編碼成 1-6 個字節，常用的英文本母被編碼成 1 個字節，漢字通常是 3 個字節。如果今天要傳輸的內容都是英文，這時使用 UTF-8 編碼就能省下空間。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;比較&lt;/strong&gt;
&lt;br /&gt;
Unicode 是一種編碼方式，和 ASCII 是同一個概念，而 UTF-8 是一種存儲方式，在存儲和傳輸上節約空間、提高性能的一種編碼形式&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html&quot;&gt;字符编码笔记：ASCII，Unicode 和 UTF-8&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://blog.chunnorris.cc/2015/04/unicode.html&quot;&gt;淺談電腦編碼與 Unicode (一) 基礎概念篇&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://hk.saowen.com/a/6615242f89d424bc28e35ea8efc115707b2ec7dcf43bb52491bca9805f99a118&quot;&gt;常見三種字符編碼的區別：ASCII、Unicode、UTF-8&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.pttweb.cc/bbs/ISU_CSIE94B/M.1152573430.A.88F&quot;&gt;[轉錄] [doc] 每個軟體開發者都絕對一定要會的Unicode及字元集必備知&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://cs50.harvard.edu/x/2022/notes/0/&quot;&gt;CS50 2022 - Lecture 0&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Python]pyinstaller出現錯誤訊息AttributeError:type object pandas._TSObject has no attribute _reduce_cython_</title>
   <link href="http://localhost:4000blog//python/2019/01/02/Python-pyinstaller%E5%87%BA%E7%8F%BE%E9%8C%AF%E8%AA%A4%E8%A8%8A%E6%81%AFAttributeError-type-object-pandas._TSObject-has-no-attribute-_reduce_cython_/"/>
   <updated>2019-01-02T12:47:00+08:00</updated>
   <id>http://localhost:4000/python/2019/01/02/Python]pyinstaller出現錯誤訊息AttributeError:type object pandas._TSObject has no attribute _reduce_cython_</id>
   <content type="html">&lt;p&gt;在打包含有 pandas 套件的程式碼時產生了以下的錯誤訊息，
&lt;img src=&quot;http://localhost:4000/blog/img/posts/pyinstaller%20pandas.png&quot; alt=&quot;pyinstaller pandas.png&quot; height=&quot;400px&quot; width=&quot;580px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;根據&lt;a href=&quot;https://github.com/pyinstaller/pyinstaller/pull/2998&quot;&gt;Hooks: Add hook-pandas.py to fix issue #2978. #2998&lt;/a&gt;的討論串，有人回答&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;when run pyinstaller -F xxx.py in windows10 , I get error AttributeError: type object 'pandas._libs.tslib._TSObject' has no attribute '__reduce_cython__', and solve it by degrade pandas version to 0.20.0.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;我將 pandas 套件的版本降至 0.20.3 也確實解決問題了。&lt;/p&gt;

&lt;p&gt;先檢查一下 pandas 版本&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip show pandas
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;將版本降至 0.20.3&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip install pandas==0.20.3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;這時候打包完後執行應該就不會有問題了！&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;https://github.com/pyinstaller/pyinstaller/pull/2998&quot;&gt;Hooks: Add hook-pandas.py to fix issue #2978. #2998&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://blog.csdn.net/qq_41185868/article/details/80601983&quot;&gt;成功解决pyinstaller打包AttributeError:type object pandas.&lt;em&gt;TSObject has no attribute _reduce_cython&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Python]讀取與寫入xlsx檔案</title>
   <link href="http://localhost:4000blog//python/2019/01/02/Python-%E8%AE%80%E5%8F%96%E8%88%87%E5%AF%AB%E5%85%A5xlsx%E6%AA%94%E6%A1%88/"/>
   <updated>2019-01-02T11:49:00+08:00</updated>
   <id>http://localhost:4000/python/2019/01/02/[Python]讀取與寫入xlsx檔案</id>
   <content type="html">&lt;p&gt;這裡要介紹使用 pandas 套件讀取與寫入 xlsx 檔案。&lt;/p&gt;

&lt;p&gt;在開始前請先安裝 pandas 套件，&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip install pandas
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;讀取檔案&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read_excel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;filename.xlsx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;header&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 獲取列數&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 獲取儲存格內容&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 修改儲存格內容&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;test&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 但修改後必須要儲存才會修正檔案內容&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# df.to_excel('test_result.xlsx', sheet_name = 'sheet1')&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;若在執行以上程式碼時產生錯誤訊息：&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Pandas pd.read_excel giving ImportError: Install xlrd &amp;gt;= 0.9.0 for Excel support
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;這時候只要安裝 xlrd 套件就能解決問題。&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip install xlrd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;寫入檔案&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pandas&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pd&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Create a Pandas dataframe from some data.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DataFrame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Data'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;45&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]})&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Create a Pandas Excel writer using XlsxWriter as the engine.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;writer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ExcelWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'pandas_simple.xlsx'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;engine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'xlsxwriter'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Convert the dataframe to an XlsxWriter Excel object.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_excel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;writer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sheet_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Sheet1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Close the Pandas Excel writer and output the Excel file.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;writer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;以上的程式碼是參考&lt;a href=&quot;https://xlsxwriter.readthedocs.io/example_pandas_simple.html#&quot;&gt;這裡&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;我存的檔案內容是中文，這時候產生了像這樣的錯誤訊息&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Python pandas to excel UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 11
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;只要將 &lt;code class=&quot;highlighter-rouge&quot;&gt;pd.ExcelWriter&lt;/code&gt; 裡的參數 &lt;code class=&quot;highlighter-rouge&quot;&gt;engine='xlsxwriter'&lt;/code&gt; 改成 &lt;code class=&quot;highlighter-rouge&quot;&gt;engine='openpyxl'&lt;/code&gt; 就可以了。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;https://xlsxwriter.readthedocs.io/example_pandas_simple.html&quot;&gt;Example: Pandas Excel example&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/48066517/python-pandas-pd-read-excel-giving-importerror-install-xlrd-0-9-0-for-excel&quot;&gt;Python: Pandas pd.read_excel giving ImportError: Install xlrd &amp;gt;= 0.9.0 for Excel support&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/47698744/python-pandas-to-excel-unicodedecodeerror-ascii-codec-cant-decode-byte-0xe2&quot;&gt;Python pandas to excel UnicodeDecodeError: ‘ascii’ codec can’t decode byte 0xe2 in position 11&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://ithelp.ithome.com.tw/articles/10197119&quot;&gt;PYTHON pandas 操作Excel 基本介紹&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python]全形與半形轉換</title>
   <link href="http://localhost:4000blog//python/2019/01/02/Python-%E5%85%A8%E5%BD%A2%E8%88%87%E5%8D%8A%E5%BD%A2%E8%BD%89%E6%8F%9B/"/>
   <updated>2019-01-02T11:32:00+08:00</updated>
   <id>http://localhost:4000/python/2019/01/02/Python]全形與半形轉換</id>
   <content type="html">&lt;p&gt;因為全形字元的 unicode 編碼從 65281~65374，而半形字元的 unicode 編碼從 33~126，也就是同樣的字在全形與半形數字會差 65248。&lt;/p&gt;

&lt;p&gt;例如，半形的驚嘆號（!）是 unicode 編碼是 33，則全形的驚嘆號（！）unicode 就會編碼是 33 + 65248 = 65281&lt;/p&gt;

&lt;p&gt;但要將數字解析成半形時是使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;chr()&lt;/code&gt; function，而全形則是使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;unichr()&lt;/code&gt; function。&lt;/p&gt;

&lt;p&gt;以下將 33~126 全部列出來，並轉換成全形。&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;xrange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;33&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;127&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;chr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;65248&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;unichr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;65248&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果，&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;33 ! 65281 ！
34 &quot; 65282 ＂
35 # 65283 ＃
36 $ 65284 ＄
37 % 65285 ％
38 &amp;amp; 65286 ＆
39 ' 65287 ＇
40 ( 65288 （
41 ) 65289 ）
42 * 65290 ＊
43 + 65291 ＋
44 , 65292 ，
45 - 65293 －
46 . 65294 ．
47 / 65295 ／
48 0 65296 ０
49 1 65297 １
50 2 65298 ２
51 3 65299 ３
52 4 65300 ４
53 5 65301 ５
54 6 65302 ６
55 7 65303 ７
56 8 65304 ８
57 9 65305 ９
58 : 65306 ：
59 ; 65307 ；
60 &amp;lt; 65308 ＜
61 = 65309 ＝
62 &amp;gt; 65310 ＞
63 ? 65311 ？
64 @ 65312 ＠
65 A 65313 Ａ
66 B 65314 Ｂ
67 C 65315 Ｃ
68 D 65316 Ｄ
69 E 65317 Ｅ
70 F 65318 Ｆ
71 G 65319 Ｇ
72 H 65320 Ｈ
73 I 65321 Ｉ
74 J 65322 Ｊ
75 K 65323 Ｋ
76 L 65324 Ｌ
77 M 65325 Ｍ
78 N 65326 Ｎ
79 O 65327 Ｏ
80 P 65328 Ｐ
81 Q 65329 Ｑ
82 R 65330 Ｒ
83 S 65331 Ｓ
84 T 65332 Ｔ
85 U 65333 Ｕ
86 V 65334 Ｖ
87 W 65335 Ｗ
88 X 65336 Ｘ
89 Y 65337 Ｙ
90 Z 65338 Ｚ
91 [ 65339 ［
92 \ 65340 ＼
93 ] 65341 ］
94 ^ 65342 ＾
95 _ 65343 ＿
96 ` 65344 ｀
97 a 65345 ａ
98 b 65346 ｂ
99 c 65347 ｃ
100 d 65348 ｄ
101 e 65349 ｅ
102 f 65350 ｆ
103 g 65351 ｇ
104 h 65352 ｈ
105 i 65353 ｉ
106 j 65354 ｊ
107 k 65355 ｋ
108 l 65356 ｌ
109 m 65357 ｍ
110 n 65358 ｎ
111 o 65359 ｏ
112 p 65360 ｐ
113 q 65361 ｑ
114 r 65362 ｒ
115 s 65363 ｓ
116 t 65364 ｔ
117 u 65365 ｕ
118 v 65366 ｖ
119 w 65367 ｗ
120 x 65368 ｘ
121 y 65369 ｙ
122 z 65370 ｚ
123 { 65371 ｛
124 | 65372 ｜
125 } 65373 ｝
126 ~ 65374 ～

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;https://codertw.com/程式語言/367570/&quot;&gt;Python實現全形半形字元互轉的方法&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Machine Learning]Linear Regression</title>
   <link href="http://localhost:4000blog//machine%20learning/2018/12/27/Machine-Learning-Linear-Regression/"/>
   <updated>2018-12-27T10:09:00+08:00</updated>
   <id>http://localhost:4000/machine%20learning/2018/12/27/[Machine Learning]Linear Regression</id>
   <content type="html">&lt;p&gt;Linear Regression 屬於 Supervised Learning(監督式學習)，用來預測連續型(continuous)的變數。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;simple-linear-regression&quot;&gt;Simple Linear Regression&lt;/h2&gt;

&lt;p&gt;Simple Linear Regression 假設 \(X, Y\) 存在線性關係，且可以使用以下的式子來表示 \(X, Y\)的關係。&lt;/p&gt;

&lt;blockquote&gt;

  &lt;script type=&quot;math/tex; mode=display&quot;&gt;Y \approx \beta_0 + \beta_1 X&lt;/script&gt;
&lt;/blockquote&gt;

&lt;p&gt;而現實中我們無法知道參數 \(\beta_0, \beta_1\)，這時候我們會使用 train data 找出估計參數 \(\hat{\beta_0}, \hat{\beta_1}\)。簡單線性回歸的估計式可以寫成，&lt;/p&gt;

&lt;blockquote&gt;

  &lt;script type=&quot;math/tex; mode=display&quot;&gt;\hat{y} = \hat{\beta_0} + \hat{\beta_1} x&lt;/script&gt;
&lt;/blockquote&gt;

&lt;p&gt;其中，\(\hat{y}\) 是當 \(X = x\) 時 \(Y\)的預測值。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Estimating the Coefficients&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;現在有一堆 data， \((x_i, y_i), \thinspace i = 1, 2, 3, …, n\)，根據上面的迴歸式可以將這些 data 表示成，&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;y_i \approx \hat{\beta_0} + \hat{\beta_1} x_i, \thinspace for \thinspace i = 1, 2, 3, ..., n&lt;/script&gt;

&lt;p&gt;已經知道迴歸模型可以用上面的式子表示，那現在的任務是要找到 \(\hat{\beta_0}\) 和 \(\hat{\beta_1}\)，只要找到這兩個參數就可以預測 \(y\) 了。&lt;/p&gt;

&lt;p&gt;找 \(\hat{\beta_0}, \hat{\beta_1}\) 的方法叫 &lt;strong&gt;The Least Square Method&lt;/strong&gt;（最小平方法）。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/linear%20regression.png&quot; alt=&quot;linear regression.png&quot; height=&quot;450px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;以上圖為例，紅色的點為 observations，深藍色的線是用最小平方法找到的迴歸線。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;The Least Square Method 是什麼？&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;式子 \( \hat{y_i} = \hat{\beta_0} + \hat{\beta_1} x_i \) 為 \(X = x_i\) 時 \(Y\) 的預測值。&lt;/p&gt;

&lt;p&gt;我們使用 Residual(殘差) 來看這個預測的結果與實際數值的差距，定義為 \(e_i = y_i - \hat{y_i}\) (上圖中紅點到深藍色線的灰色線段們)。&lt;/p&gt;

&lt;p&gt;將所有 Residual 相加便能&lt;/p&gt;

&lt;p&gt;RSS =&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;http://www-bcf.usc.edu/~gareth/ISL/&quot;&gt;An Introduction to Statistical Learning with Applications in R&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Machine Learning]Regression splines</title>
   <link href="http://localhost:4000blog//machine%20learning/2018/12/09/Machine-Learning-Regression-splines/"/>
   <updated>2018-12-09T20:17:00+08:00</updated>
   <id>http://localhost:4000/machine%20learning/2018/12/09/[Machine Learning]Regression splines</id>
   <content type="html">&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/splines%20scatter%20plot.png&quot; alt=&quot;splines scatter plot.png&quot; height=&quot;380px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;上圖是一個 x, y 的分佈圖，紅線是這些點分部的方程式。但現實中，我們並無法真的知道紅線的方程式，我們可能使用一次方程式、二次方程式甚至更高次方的方程式去嘗試（如下圖
）。
&lt;img src=&quot;http://localhost:4000/blog/img/posts/splines%20line.png&quot; alt=&quot;splines line.png&quot; height=&quot;380px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我們可以將擬合的多項式方程式（polynomial function）寫成，&lt;/p&gt;

&lt;p&gt;\(y = \beta_0 + \beta_1 x^1 + \beta_2 x^2 + … + \beta_n x^n + \epsilon\)&lt;/p&gt;

&lt;p&gt;但只是一味的提高多項式的次方只是增加模型的複雜度會導致 overfitting 的問題，在 testing data 上的結果也不會太好。&lt;/p&gt;

&lt;p&gt;這時候我們可以使用 Piecewise 將 data 劃分成多個區間，根據每個區間的 data 給予一個模型去擬合。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Basis function&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;\(y_i = \beta_0 + \beta_1 b_1(x_i) + \beta_2 b_2(x_i) + … + \beta_n b_n(x_i) + \epsilon_i\)&lt;/p&gt;

&lt;p&gt;透過 \(b_1(X)\)、\(b_2(X)\)、……、\(b_n(X)\) 可以將非線性的自變量轉換成線性。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Piecewise Function&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;將 data 劃分多個區段後，每個區段再各自找到可以擬合的 model，model 可以是一次方程式、二次方程式或是三次方程式等等，不過三次方最常使用。&lt;/p&gt;

&lt;p&gt;如下圖每個區段都是用一次方程式去擬合。\(\xi\) 為區段的分隔點，稱為 knot，每個分段函數稱為 piecewise function。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/piecewise%20linear.png&quot; alt=&quot;piecewise linear.png&quot; height=&quot;600px&quot; width=&quot;500px&quot; /&gt;
From: 《Elements of Statistical Learning》&lt;/p&gt;

&lt;p&gt;但這些 piecewise function 是有條件的。
&lt;br /&gt;
雖然 piecewise function 是每個區段各自擬合出來的 function，但所有區段 function 必須整個為連續，也就是在 \(\xi\) 的交界處的值必須相同。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Cubic Spline&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;這裡則是使用三次方程式。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/piecewise%20cubic%20polynomials.png&quot; alt=&quot;piecewise cubic polynomials.png&quot; height=&quot;600px&quot; width=&quot;500px&quot; /&gt;
From: 《Elements of Statistical Learning》&lt;/p&gt;

&lt;p&gt;cubic spline 除了邊界的值相同外，還必須要一階和二階倒數相同。&lt;/p&gt;

&lt;p&gt;看上圖左上的圖加上邊界連續後成為右上，雖然看起來是連續的函數，但並不是完美的曲線，如果再加上一階導數相同就變成左下，再加上二階導數就可以畫出右下的圖。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;這個 R code 是畫出最上面圖的程式碼，使用 &lt;a href=&quot;https://www.youtube.com/watch?v=bESJ81dyYro&quot;&gt;Introduction to Splines&lt;/a&gt; 裡頭的範例。&lt;/p&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;set.seed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# function&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f_x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;seq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f_x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;eps&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rnorm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sd&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# epsilon&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f_x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;eps&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data.frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f_x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f_x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# plot&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggplot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom_point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f_x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colour&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;red&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;theme_bw&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggplot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom_point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom_smooth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;lm&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;se&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stat_smooth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;lm&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formula&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;se&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colour&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;green&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# stat_smooth(method = &quot;lm&quot;, formula = y ~ x + I(x^2) + I(x^3), se = FALSE, colour = &quot;gold1&quot;) +&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# stat_smooth(method = 'loess', se = FALSE, colour = &quot;red&quot;) +&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;theme_bw&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;https://zhuanlan.zhihu.com/p/34825299&quot;&gt;一文读懂回归样条（regression splines），附Python代码&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=bESJ81dyYro&quot;&gt;Introduction to Splines&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=V1JRs6AP1AI&quot;&gt;Spline Regression | Non Linear Model | Polynomial Regression&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://zh.wikipedia.org/wiki/样条函数&quot;&gt;wikipedia - 樣條函數&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://datascienceplus.com/cubic-and-smoothing-splines-in-r/&quot;&gt;Cubic and Smoothing Splines in R&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://www-bcf.usc.edu/~gareth/ISL/ISLR%20Seventh%20Printing.pdf&quot;&gt;《An Introduction to Statistical Learning with Applications in R》&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Machine Learning]Principal Component Analysis(PCA)</title>
   <link href="http://localhost:4000blog//machine%20learning/2018/12/08/Machine-Learning-Principal-Component-Analysis(PCA)/"/>
   <updated>2018-12-08T11:29:00+08:00</updated>
   <id>http://localhost:4000/machine%20learning/2018/12/08/[Machine Learning]Principal Component Analysis(PCA)</id>
   <content type="html">&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/PCA.png&quot; alt=&quot;PCA.png&quot; height=&quot;260px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;From: «Pattern Recognition and Machine Learning» P.561&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;What is PCA?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Principal Component Analysis(PCA)，中文翻作「主成分分析」。&lt;/p&gt;

&lt;p&gt;PCA 是一種將多維度降維的方法。
&lt;br /&gt;
一個變數其實可能是多個潛在變因（laten variables）組成，但我們無法實際測量出那些 laten variables，而 PCA 就是要拆解出影響較大的變因。使用較少的變數解釋多個 variables。&lt;/p&gt;

&lt;p&gt;舉個例子，股市的點數上上下下，我們所能觀測到的是點數這個變數，但其實影響點數變動的潛在變因可能包含了很多市場因素，且每個因素可能又是互相影響。&lt;/p&gt;

&lt;p&gt;如果用數學符號表示，\(x_i\) 是我們有的變數，\(z_i\) 是裡頭含有的潛在變因，\(x_i\) 是 \(z_i\) 的線性組合（linear combination）。
&lt;br /&gt;
\(x_1 = a_{11} z_1 + a_{12} z_2 + a_{13} z_3 + \epsilon_1\)
&lt;br /&gt;
\(x_2 = a_{21} z_1 + a_{22} z_2 + a_{23} z_3 + \epsilon_2\)
&lt;br /&gt;
\(x_3 = a_{31} z_1 + a_{32} z_2 + a_{33} z_3 + \epsilon_3\)
&lt;br /&gt;
……&lt;/p&gt;

&lt;p&gt;可以將上式改寫成，
&lt;br /&gt;
\(z_1 = x_1 u_{i1} + x_2 u_{i2} + x_3 u_{i3}\)
&lt;br /&gt;
……&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;如何降維？&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;根據 «Pattern Recognition and Machine Learning» 這本書第 561 頁給了 PCA 兩種定義&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;PCA can be defined as the orthogonal projection of the data onto a lower dimensional linear space, known as the principal subspace, such that the variance of the projected data is maximized (Hotelling, 1933).&lt;/li&gt;
  &lt;li&gt;PCA can be defined as the linear projection that minimizes the average projection cost, defined as the mean squared distance tbtween the data points and their projections (Pearson, 1901).&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;可以用上圖來理解，或是 &lt;a href=&quot;https://www.youtube.com/watch?v=FgakZw6K1QQ#t=4m35s&quot;&gt;StatQuest: Principal Component Analysis (PCA), Step-by-Step&lt;/a&gt; 這段。&lt;/p&gt;

&lt;p&gt;根據上面的定義，可以看到，降維的方法是要做 &lt;a href=&quot;https://www.khanacademy.org/math/linear-algebra/alternate-bases/orthogonal-projections/v/linear-algebra-projections-onto-subspaces&quot;&gt;orthogonal projection&lt;/a&gt;，且找到投影向量讓投影後的資料變異量最大。&lt;/p&gt;

&lt;p&gt;這邊我使用 &lt;a href=&quot;https://www.youtube.com/watch?v=FgakZw6K1QQ&quot;&gt;StatQuest: Principal Component Analysis (PCA), Step-by-Step&lt;/a&gt; 影片的內容來介紹。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;maximized 什麼？
&lt;img src=&quot;http://localhost:4000/blog/img/posts/PCA_maximizing.png&quot; alt=&quot;PCA_maximizing.png&quot; height=&quot;320px&quot; width=&quot;600px&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;假如現在座標上有個綠色的點，以座標\((0, 0)\)原點，其長度為 a（影片沒有表示這是 a 向量，方便起見，後面以 a, b, c 向量表示），c 向量為 a 向量的投影方向與長度。根據畢氏定理，可以畫出一個正三角形，現在三角形的三邊長分別為 a, b, c（因為我懶得再圖上修正了，現在又變回長度）。而 PCA 要找的投影向量就是，最小化 \(b^2\) 的值，或是最大化 \(c^2\) 的值。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;投影&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/PCA_projection.png&quot; alt=&quot;PCA_projection.png&quot; height=&quot;320px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;根據上圖，這個二維座標上有好幾個點，我們現在就是要找到一條能讓投影後 variance 最大的投影向量（紅色虛線），如下圖。要找到 SS（eigenvalue） 最小的投影向量。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/SS.png&quot; alt=&quot;SS.png&quot; height=&quot;320px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;在投影前，我們會先將資料平移 \(x_i - \mu_i\)，也就是不改變點之間的相對位置，這樣不但不會影響找投影向量的結果，在計算上也比較容易。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Variation 變異量&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;變異量 = \(SS/(n-1), n \)是點的數量&lt;/p&gt;

&lt;p&gt;有了變異量以後，我們通常會想要知道每個投影向量的變異量占比。&lt;/p&gt;

&lt;p&gt;假如現在有 PC1 其變異量為 15，PC2 的變異量為 3，則 PC1 與 PC2 的變異量總和為 18。&lt;/p&gt;

&lt;p&gt;所以 PC1 = 15*100%/18 = 83%，PC2 = 3*100%/18 = 17%。&lt;/p&gt;

&lt;p&gt;在做 PCA 的時候，我們會根據轉換的 \(PC_i\) 的比重，來決定要考慮要使用幾個 \(PC_i\)。
如果可以解釋百分之九十基本上就可以拿來使用。&lt;/p&gt;

&lt;p&gt;假如今天有一筆多維度的資料，但轉換後 PC1 與 PC2 可以表示百分之九十的變異量，那麼這時候只要使用 PC1 與 PC2 就好，且還可以在平面座標上看點的分佈。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;基本上 PCA 就是在做座標變換，將原變數投影成新變數。接著以最少的新變數來代表原始資料最大的成分（variation 涵蓋量最大）。&lt;/p&gt;

&lt;p&gt;其原則如下&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;新變數是原變數的線性組合&lt;/li&gt;
  &lt;li&gt;保留原變數間的最大變異量（variance）&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=FgakZw6K1QQ&quot;&gt;StatQuest: Principal Component Analysis (PCA), Step-by-Step&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://medium.com/@chih.sheng.huang821/機器-統計學習-主成分分析-principle-component-analysis-pca-58229cd26e71&quot;&gt;機器/統計學習:主成分分析(Principal Component Analysis, PCA)&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://zh.wikipedia.org/wiki/主成分分析&quot;&gt;wikipedia - 主成分分析&lt;/a&gt;
&lt;br /&gt;
The Elements of Statistical Learning
&lt;br /&gt;
Pattern Recognition and Machine Learning&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Machine Learning]Boosting and Adaboost</title>
   <link href="http://localhost:4000blog//machine%20learning/2018/12/03/Machine-Learning-Boosting-and-Adaboost/"/>
   <updated>2018-12-03T17:12:00+08:00</updated>
   <id>http://localhost:4000/machine%20learning/2018/12/03/Machine Learning]Boosting and Adaboost</id>
   <content type="html">&lt;h2 id=&quot;boosting&quot;&gt;Boosting&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/boosting.png&quot; alt=&quot;boosting.png&quot; height=&quot;230px&quot; width=&quot;600px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;From: &lt;a href=&quot;https://blog.bigml.com/2017/03/14/introduction-to-boosted-trees/&quot;&gt;Introduction to Boosted Trees&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Boosting 也是一種 Ensemble learning，它會結合多個弱分類器（weak classifiers）成為一個較準確的分類器，也可以應用在 regression 上。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;和 Bagging 有什麼不同？&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Bagging 各個 classifier 產生的過程是獨立的，但 Boosting 後產生的 classifier 與前面的 classifier 有關。也就是說，Bagging 的 classifier 可以並行產生，但 Boosting 必須要有順序的產生。所以時間上來說，Bagging 可以節省比較多的時間。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;與前面的分類器有關？&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;在 Boosting 中，每一次產生 classifier 後，後面的 classifier 會根據前面 classifier 的結果調整每個點的權重。&lt;/p&gt;

&lt;p&gt;在前一個 classifier 分類錯誤後，在後一個 classifier 的權重會比較重，而表現較好的則會權重減少。這就是和 Bagging 最大的不同，Bagging 中所有的點都是隨機選取，且權重都是一樣的。&lt;/p&gt;

&lt;p&gt;簡單來說，Boosting learns features from data.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;步驟&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;用最原始的 training data 跑一個 classifiers&lt;/li&gt;
  &lt;li&gt;利用這個 classifiers 提高分類錯誤的點的權重，降低分類正確的點的權重。&lt;/li&gt;
  &lt;li&gt;重複第二步驟 N 次，最後使用權重的平均值。&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;adaboost&quot;&gt;AdaBoost&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/AdaBoost.png&quot; alt=&quot;AdaBoost.png&quot; height=&quot;350px&quot; width=&quot;700px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;From: &lt;a href=&quot;https://medium.com/@chih.sheng.huang821/機器學習-ensemble-learning之bagging-boosting和adaboost-af031229ebc3&quot;&gt;機器學習: Ensemble learning之Bagging、Boosting和AdaBoost&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AdaBoost 應用了 boosting 的方法。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;概念&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;假設現在有 n 個樣本，要執行 boosting T 次。&lt;/p&gt;

&lt;p&gt;第一次將所有樣本的權重都設為 \(\alpha_i\) = 1/n, i = 1, …, n&lt;/p&gt;

&lt;p&gt;對所有 t = 1, …, T&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;根據樣本的權重 \(\alpha_i\) 建立出 classifier \(f_t(x)\)&lt;/li&gt;
  &lt;li&gt;使用 \(f_t(x)\) 後計算 \(\epsilon_t\) 誤差&lt;/li&gt;
  &lt;li&gt;利用 \(\epsilon_t\) 算出係數 \(w_t\)&lt;/li&gt;
  &lt;li&gt;再重新計算 \(\alpha_i\)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;最後的 model 就會是：&lt;/p&gt;

&lt;p&gt;\(\hat{y} = sign \sum_{t=1}^{T} w_i f_t(x)\)&lt;/p&gt;

&lt;p&gt;AdaBoost 的優勢就是讓 model 能夠從錯中學，使用提升與降低權重的方式讓分類錯誤的點可以在下一次的 model 中被改進。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;http://leijun00.github.io/2014/10/decision-tree-2/&quot;&gt;决策树（二）&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://medium.com/@chih.sheng.huang821/機器學習-ensemble-learning之bagging-boosting和adaboost-af031229ebc3&quot;&gt;機器學習: Ensemble learning之Bagging、Boosting和AdaBoost&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://blog.csdn.net/niuniuyuh/article/details/54346930&quot;&gt;AdaBoost和随机森林的区别&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.coursera.org/learn/ml-classification/home/week/5&quot;&gt;Machine Learning -  University of Washington&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://blog.csdn.net/mach_learn/article/details/39501849&quot;&gt;机器学习算法优缺点及其应用领域&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Machine Learning]Random Forest</title>
   <link href="http://localhost:4000blog//machine%20learning/2018/12/03/Machine-LearningDecision-Tree/"/>
   <updated>2018-12-03T14:07:00+08:00</updated>
   <id>http://localhost:4000/machine%20learning/2018/12/03/[Machine LearningDecision Tree</id>
   <content type="html">&lt;p&gt;基本上 Random Frost 是要改善 Decision Tree 容易 overfitting 的問題，它結合了 Decision Tree 和 bagging 的方法。&lt;/p&gt;

&lt;p&gt;Random Forest 是建立很多顆決策樹，再利用多數決選出最好的選項，和 &lt;a href=&quot;https://shihs.github.io/blog/machine%20learning/2018/12/03/Machine-Learning-Bagging/&quot;&gt;bagging&lt;/a&gt; 這篇提到的方法有點類似，但有些小差異。&lt;/p&gt;

&lt;p&gt;使用的方法是 bagging（結合多個 model），所以這也是 Ensemble learning。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Random Forest步驟&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;假如有一 training data，有 N 個樣本，p 個features。
&lt;br /&gt;
今天要利用這個 training data 建立一個 Random Forest model，裡頭共有 B 棵決策樹，&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;使用 boostrap 從 training data 中抽出 N 個樣本產生一組 data&lt;/li&gt;
  &lt;li&gt;在這組 data 中隨機從 p 個 featrues 中選取 m (m &amp;lt; p) 個 features，再從這 m 個 features 找出最好的一個分割結果，如此產生一個 node&lt;/li&gt;
  &lt;li&gt;重複步驟 2，直到完成這個 model 為止&lt;/li&gt;
  &lt;li&gt;重複步驟 1~3 B 次，共會產生 B 棵擁有不同 feature 的決策樹&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;最後要進行 predict 時，分類問題使用多數決，回歸問題使用平均數決定。&lt;/p&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;因為每一棵樹的隨機選取的樣本與 feature 都不同，所以每棵樹的結果都不會相同。&lt;/li&gt;
  &lt;li&gt;Random Frost 建立的 decision tree 不需要 pruning。在 decision tree 剪枝是爲了避免 overfitting，但在 Random Frost 使用 bagging 的方式就已經避免 overfitting 了。&lt;/li&gt;
  &lt;li&gt;因為每一棵決策樹都是隨機篩選 feature 的結果，所以可以想像每棵樹就像是精通某個領域的專家。當有個新的數據近來，經由各個領域的專家投票表決，做出最後的選擇。&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Random Forest 中有兩個參數需要人為控制，一個是樹的數量（B），一般建議取很大。另一個是 feature 的大小（m）。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;優點：
    &lt;ol&gt;
      &lt;li&gt;不用做特徵（feature）選擇。&lt;/li&gt;
      &lt;li&gt;訓練完後可以知道哪些 feature 比較重要。&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=J4Wdy0Wc_xQ&quot;&gt;StatQuest: Random Forests Part 1 - Building, Using and Evaluating&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://blog.csdn.net/edogawachia/article/details/79357844&quot;&gt;随机森林（Random Forest）算法原理&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://blog.csdn.net/niuniuyuh/article/details/54346930&quot;&gt;AdaBoost和随机森林的区别&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Machine Learning]Bagging</title>
   <link href="http://localhost:4000blog//machine%20learning/2018/12/03/Machine-Learning-Bagging/"/>
   <updated>2018-12-03T12:50:00+08:00</updated>
   <id>http://localhost:4000/machine%20learning/2018/12/03/[Machine Learning]Bagging</id>
   <content type="html">&lt;h2 id=&quot;bagging&quot;&gt;Bagging&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/bagging.png&quot; alt=&quot;bagging.png&quot; height=&quot;450px&quot; width=&quot;500px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;From: Hastie, T., Tibshirani, R. and Friedman, J. The Elements of Statistical Learning. Springer, 2009. p.285&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Bagging 是什麼？&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Bootstrap aggregating (bagging) is a machine learning ensemble meta-algorithm to improve classification and regression models in terms of stability and classification accuracy. It also reduces variance and helps to avoid ‘overfitting’. Although it is usually applied to decision tree models, it can be used with any type of model. (&lt;a href=&quot;https://docs.rapidminer.com/latest/studio/operators/modeling/predictive/trees/parallel_decision_tree.html&quot;&gt;Decision Tree - Bagging&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;簡單來說，Bagging是一種 Ensemble learning方法，它集結一些 model 來做最後的決策。通常會是集結表現沒那麼好的 model，讓這些 model 一起做決定，一種三個臭皮匠勝過一個諸葛亮的感覺。&lt;/p&gt;

&lt;p&gt;Decision tree 是一個常見的 weak classifier，所以如果在 decision tree 上使用 bagging，可以讓最後表現結果比較好，也避免 overfitting 的情況。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Boostrap&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;在開始說明 bagging 步驟前先介紹 bootstrap。&lt;/p&gt;

&lt;p&gt;bootstrap 是一種抽樣方法。假設今天有一組資料，裡頭共有 N 個樣本，我們想要有 m 個大小為 N 的樣本作為訓練資料。方法是，每次從這 N 個樣本隨機抽取，且每次都是取後放回(也就是有些樣本可能被抽到一次以上，有些樣本可能沒被抽到)，同樣的方法重複 m 次，這樣我們就會有 m 組樣本數為 N 的 y 資料集。&lt;/p&gt;

&lt;p&gt;這樣的方法在樣本數量少時很有用。如果樣本小，但我們用 train-validation-test 這樣的方式訓練資料，訓練的樣本資料非常小，會造成 bias 較大的問題。而使用 bootstrap 不會減少樣本的數量，也能保留 test data。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;如何操作？&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;使用 boostrap 方法從 training data 中採集 B 組樣本數與 training data 相同的資料集。&lt;/li&gt;
  &lt;li&gt;這 B 組資料集都建立一個 model， \(f_b(x)\)，共產生 B 個 model。&lt;/li&gt;
  &lt;li&gt;最後預測的結果就是將這 B 個 model 做統合。在分類問題上，可以平均各個 model 的 posterior class probabilities，或是使用 majority voting。（選機率比較大的結果或是多數決）；在回歸上，則取平均值。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;從最上圖可以看到，不論是使用機率或是投票決定，bagging 選出的結果的 test error 都要比個別的 model 表現較好。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;除了 Bagging 外，Ensemble learning 還有另一種常見的方法 Boosting，這篇先到這裡之後繼續介紹。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;https://medium.com/@chih.sheng.huang821/機器學習-ensemble-learning之bagging-boosting和adaboost-af031229ebc3&quot;&gt;機器學習: Ensemble learning之Bagging、Boosting和AdaBoost&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://blog.csdn.net/edogawachia/article/details/79357844&quot;&gt;随机森林（Random Forest）算法原理&lt;/a&gt;
&lt;br /&gt;
The Elements of Statistical Learning
&lt;br /&gt;
Pattern Recognition and Machine Learning&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Machine Learning]Decision Tree</title>
   <link href="http://localhost:4000blog//machine%20learning/2018/12/03/Machine-Learning-Decision-Tree-%E5%92%8C-bagging/"/>
   <updated>2018-12-03T11:05:00+08:00</updated>
   <id>http://localhost:4000/machine%20learning/2018/12/03/[Machine Learning]Decision Tree 和 bagging</id>
   <content type="html">&lt;h2 id=&quot;decision-tree&quot;&gt;Decision Tree&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/decision_tree.png&quot; alt=&quot;decision_tree.png&quot; height=&quot;190px&quot; width=&quot;500px&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Decision Tree是什麼？&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;簡單來說，decision tree 是一個分類模型。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Tree-based methods partition the feature space into a set of rectangles, and then fit a simple model (like a constant) in each one.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;這是 Pattern Recognition and Machine Learning 裡頭的定義。&lt;/p&gt;

&lt;p&gt;根據上圖，想像一下，在右邊的二維座標平面上有一堆散布的點，而 decision tree，就是將這個平面一一分割，每一個框框都是一個分類結果。但我們可以用右邊那樣一層一層的樹枝結構狀來表示右邊難懂的圖。（這裡的例子是二維平面，當變數 \(x_i\) 增加時，這樣的概念可以推廣到多維空間）&lt;/p&gt;

&lt;p&gt;每一個分支都像是一個 if-else 問題，如果是就選某一邊，不是就選另外一邊。&lt;/p&gt;

&lt;p&gt;上圖左，我們可以看到有兩個變數，\(x_1\), \(x_2\)，第一關是 \(x_1 &amp;gt; \theta_1 \)，如果小於就往左邊分，如果大於就往右邊分，以此類推往下繼續細分，最後給予分類結果。最後共分成 A, B, C, D, E 五個類別，也就是右邊的五個框框。&lt;/p&gt;

&lt;p&gt;Decision Tree 又可以分為&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Regression trees - 最後分類結果為連續變數&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Classification trees - 最後分類結果為類別變數&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;名詞&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Root node (The Root) - 第一個起始的點&lt;/li&gt;
  &lt;li&gt;(Internal) Nodes - 中間的節點。上方會有箭頭指向 node，且 node 也會往下指向其他點。&lt;/li&gt;
  &lt;li&gt;Leaves (terminal nodes) - 最後的節點，也就是最後的分類結果。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;如何分類？&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;假如今天我有一份 data，decision tree 是如何決定要先使用哪一個變數與什麼值作為分割呢？&lt;/p&gt;

&lt;p&gt;&lt;em&gt;分割的原則是，這樣的分割要能得到最大的資訊增益 (Information gain, IG)&lt;/em&gt; (&lt;a href=&quot;https://medium.com/@yehjames/資料分析-機器學習-第3-5講-決策樹-decision-tree-以及隨機森林-random-forest-介紹-7079b0ddfbda&quot;&gt;[資料分析&amp;amp;機器學習] 第3.5講 : 決策樹(Decision Tree)以及隨機森林&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;資訊量根據最後的分類結果可以使用，&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Regression trees:
    &lt;ul&gt;
      &lt;li&gt;MSE (mean-squared error)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Classification trees:
    &lt;ul&gt;
      &lt;li&gt;Entropy (Deviance)&lt;/li&gt;
      &lt;li&gt;Gini impurity&lt;/li&gt;
      &lt;li&gt;Missclassification error&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;在 Classification tree 裡，Entropy 和 Gini impurity 是常用的兩種方式，
詳細的公式請參考 &lt;a href=&quot;https://en.wikipedia.org/wiki/Decision_tree_learning#Gini_impurity&quot;&gt;Wikipedia&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;假如今天碰到兩種 model 算出來的資訊量都ㄧ樣，請選擇比較簡單的那個 model。（分支、leaves node 較少）&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;R 範例&lt;/strong&gt;
這裡使用 tree 這個 library 做範例，另外還有像是 rpart 也是做 decision 常用的 package。&lt;/p&gt;
&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tree&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;iris&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 使用 Entropy (Deviance)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tree&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Species&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sepal.Length&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Petal.Length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iris&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;deviance&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pretty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;summary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;


&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 使用 Gini impurity&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tree&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Species&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sepal.Length&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Petal.Length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iris&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;gini&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pretty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;summary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;優缺點&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;優點：
    &lt;ol&gt;
      &lt;li&gt;Simple to understand and interpret. 容易理解與解釋&lt;/li&gt;
      &lt;li&gt;Able to handle both numerical and categorical data. 可以用在類別與 numerical 資料&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;缺點
    &lt;ol&gt;
      &lt;li&gt;Low bias and high variance with respect to the training data.
（當 decision tree model 變得太過複雜時，太多 nodes，就會導致 overfitting (&lt;a href=&quot;https://en.wikipedia.org/wiki/Bias–variance_tradeoff&quot;&gt;bias-variance trade off&lt;/a&gt; 的狀況）&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;所以為了讓 model 不要 overfitting，我們可以使用 pruning 的方式，砍掉底下的樹枝。&lt;/p&gt;

&lt;p&gt;在 R 可以使用，&lt;code class=&quot;highlighter-rouge&quot;&gt;prune.tree()&lt;/code&gt;，並且可以使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;best&lt;/code&gt; 這個參數來決定最後要保留多少 leaves。&lt;/p&gt;

&lt;p&gt;使用剛剛最後的 &lt;code class=&quot;highlighter-rouge&quot;&gt;fit&lt;/code&gt;示範&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;prune_fit&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prune.tree&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;best&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prune_fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prune_fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pretty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;summary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prune_fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;這時候 leaves 由原本的 9，修剪到了剩下 5，但 Misclassification error rate 卻是相同的。修剪過後的 model 較簡單，且 variance 也會比較小，在預測上表現也會較佳。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;https://medium.com/@yehjames/資料分析-機器學習-第3-5講-決策樹-decision-tree-以及隨機森林-random-forest-介紹-7079b0ddfbda&quot;&gt;[資料分析&amp;amp;機器學習] 第3.5講 : 決策樹(Decision Tree)以及隨機森林&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=7VeUPuFGJHk&quot;&gt;StatQuest: Decision Trees&lt;/a&gt;
&lt;br /&gt;
The Elements of Statistical Learning
&lt;br /&gt;
Pattern Recognition and Machine Learning&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[R]如何在 ggplot2 圖形上希臘字母？</title>
   <link href="http://localhost:4000blog//r/2018/11/10/R-%E5%A6%82%E4%BD%95%E5%9C%A8-ggplot2-%E5%9C%96%E5%BD%A2%E4%B8%8A%E5%B8%8C%E8%87%98%E5%AD%97%E6%AF%8D/"/>
   <updated>2018-11-10T16:15:00+08:00</updated>
   <id>http://localhost:4000/r/2018/11/10/[R]如何在 ggplot2 圖形上希臘字母？</id>
   <content type="html">&lt;p&gt;&lt;strong&gt;1. 圖形文字&lt;/strong&gt;
&lt;br /&gt;
Text Labels: Use parse = T inside geom_text or annotate.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2. 座標軸標籤&lt;/strong&gt;
&lt;br /&gt;
Axis Labels: Use expression(alpha) to get greek alpha.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;3. Legend&lt;/strong&gt;
&lt;br /&gt;
Legend Labels: Use bquote(alpha == .(value)) in legend label.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;4. Fecet圖形&lt;/strong&gt;
&lt;br /&gt;
Facet 圖形比較特殊，要將 &lt;code class=&quot;highlighter-rouge&quot;&gt;labeller = label_parsed&lt;/code&gt;
&lt;br /&gt;
Facet Labels: Use labeller = label_parsed inside facet.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/5293715/how-to-use-greek-symbols-in-ggplot2&quot;&gt;來源&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[R]Environments (1)</title>
   <link href="http://localhost:4000blog//r/2018/10/20/R-Environment/"/>
   <updated>2018-10-20T15:26:00+08:00</updated>
   <id>http://localhost:4000/r/2018/10/20/[R]Environment</id>
   <content type="html">&lt;p&gt;這篇要介紹 R 的環境(Environments)。&lt;/p&gt;

&lt;p&gt;我個人覺得環境是一個寫程式很重要但一開始會很困惑的東西，之前一直處於似懂非懂的狀態。
&lt;br /&gt;
其實如果只是用 R 來跑一些數據分析，其實不理解環境並不會造成什麼太大的問題，但如果能夠懂當然絕對是有利無弊。
&lt;br /&gt;
最近有了寫 R package 的經驗後，讓我開始對「環境」比較了解，所以這篇想要將我的理解記錄下來。&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;1-什麼是環境environments&quot;&gt;1. 什麼是環境（Environments）？&lt;/h3&gt;

&lt;p&gt;當我們每次打開 R studio 這時候便是打開了某個環境，接著我們產生了一些變數，這些變數便是在這個環境底下。&lt;/p&gt;

&lt;p&gt;很抽象嗎？
&lt;br /&gt;
打開 R studio 時，在右上的框框（或是在某個位置）有個「Environment」，然後可以看到如下圖的「Gloabal Environment」，並且在下面的框框可以看到我們產生的變數（圖中的 x）。
&lt;img src=&quot;http://localhost:4000/blog/img/posts/enrionment%20variable.png&quot; alt=&quot;enrionment variable.png&quot; height=&quot;395px&quot; width=&quot;380px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;這就表示，我們現在在「Gloabal Environment」這個環境底下，且 x 這個變數在「Gloabal Environment」環境中。&lt;/p&gt;

&lt;p&gt;當我們把「Gloabal Environment」這個圖往下拉，可以看到像下圖這樣（每個人的可能都不太一樣）
&lt;img src=&quot;http://localhost:4000/blog/img/posts/enrionment.png&quot; alt=&quot;enrionment.png&quot; height=&quot;395px&quot; width=&quot;380px&quot; /&gt;
依序往下就會是「Gloabal Environment」的 「parent 環境」。&lt;/p&gt;

&lt;p&gt;（「parent 環境」是殺毀？！）&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;環境就像是房間&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;我覺得可以把「環境」想像是一個房間。
&lt;br /&gt;
當妳/你在操作 R ，產生任何變數，做任何動作，都是在這個房間裡面操作（通常一打開 R studio 都會是在 Global 環境）。所以這些變數全部都會被放在這個房間裡。或是想像在一個房間裡縫娃娃這些娃娃做完都會被放在這個房間裡。&lt;/p&gt;

&lt;p&gt;那「parent 環境」就會是，妳/你走出這個房間來到客廳，也就是說，這個房間是被包在家裡的，走出家裡，整個家是被包在建築物裡的，然後社區，然後某條路，某個區，某個縣市……就是一個俄羅斯娃娃的感覺。往上一層就會是「parent 環境」、「grand parent 環境」…..以此類推。&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;2-r-是如何在環境裡找變數的&quot;&gt;2. R 是如何在環境裡找變數的？&lt;/h3&gt;

&lt;p&gt;根據上面的解釋我們知道，每次操作 R 的時候我們都會是在某個環境底下。
&lt;br /&gt;
那這和 R 要找變數有什麼關係呢？&lt;/p&gt;

&lt;p&gt;在這之前我們先來看我現在有幾間房間呢？&lt;/p&gt;
&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] &quot;.GlobalEnv&quot;        &quot;tools:rstudio&quot;     &quot;package:stats&quot;     &quot;package:graphics&quot;  &quot;package:grDevices&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [6] &quot;package:utils&quot;     &quot;package:datasets&quot;  &quot;package:methods&quot;   &quot;Autoloads&quot;         &quot;package:base&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;這表示，最底下的環境是&lt;code class=&quot;highlighter-rouge&quot;&gt;.GlobalEnv&lt;/code&gt;(Gloabal Environment)，它的 parent 變數是&lt;code class=&quot;highlighter-rouge&quot;&gt;tools:rstudio&lt;/code&gt;，再往上是&lt;code class=&quot;highlighter-rouge&quot;&gt;package:stats&lt;/code&gt;……等等，最後會是&lt;code class=&quot;highlighter-rouge&quot;&gt;package:base&lt;/code&gt;，但其實最上層會是 Empty environment。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;在房間裡找東西？&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;如果今天妳/你人在一個房間裡找東西妳/你會怎麼找？
&lt;br /&gt;
一定會先在房間裡搜尋一遍，如果怎麼都找不到，就會去客廳找，再找不到就到這棟建築物找……一直往外找對吧？&lt;/p&gt;

&lt;p&gt;所以同樣的，如果今天我們想要找個變數 x，結果 R 發現找不到，那它就會往 parent 環境（search()的順序）找，再找不到就會再往上找，如果一直找到最上層還是沒有，就會跳出像這樣的錯誤。&lt;/p&gt;
&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Error: object 'x' not found&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;找的方式就像是這個圖，&lt;a href=&quot;http://adv-r.had.co.nz/Environments.html&quot;&gt;source&lt;/a&gt;
&lt;img src=&quot;http://localhost:4000/blog/img/posts/search%20path.png&quot; alt=&quot;search path.png&quot; height=&quot;160px&quot; width=&quot;500px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;parent 是誰？&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;我們可以用&lt;code class=&quot;highlighter-rouge&quot;&gt;parent.env()&lt;/code&gt;來查看上一層環境，&lt;/p&gt;
&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;now.env&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;environment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parent.env&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parent.env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now.env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;grandparent.env&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parent.env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parent.env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;3-可以增加環境嗎&quot;&gt;3. 可以增加環境嗎？&lt;/h3&gt;
&lt;p&gt;如果仔細看剛剛&lt;code class=&quot;highlighter-rouge&quot;&gt;search()&lt;/code&gt;的結果會發現，那些都是 package 呢！
&lt;br /&gt;
其實在每次使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;library()&lt;/code&gt;或是&lt;code class=&quot;highlighter-rouge&quot;&gt;require()&lt;/code&gt; attache 一個 pacakge 後環境就會被改變，這時 Gloabal Environment 的 parent 環境就會變成這個 package。（請自行實驗）&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;（題外話）
&lt;br /&gt;
&lt;strong&gt;library() v.s require()&lt;/strong&gt;
這兩者到底有什麼差別呢？&lt;/p&gt;

&lt;p&gt;基本上兩個的差別只有在於找不到這個 package 時，&lt;code class=&quot;highlighter-rouge&quot;&gt;library()&lt;/code&gt; 會產生 Error 暫停程式，&lt;code class=&quot;highlighter-rouge&quot;&gt;require()&lt;/code&gt;會 FALSE 並吐出 Warning ，然後繼續執行程式。
&lt;br /&gt;
所以可以把&lt;code class=&quot;highlighter-rouge&quot;&gt;require()&lt;/code&gt;包在 if 裡，如果沒有這個 package 就安裝，程式也能繼續執行。&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Error in library(x) : there is no package called ‘x’&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Loading required package: x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Warning message:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# In library(package, lib.loc = lib.loc, character.only = TRUE, logical.return = TRUE,  :&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#  there is no package called ‘x’&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;（題外話結束）&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;也就是說，如果我們今天使用&lt;code class=&quot;highlighter-rouge&quot;&gt;library()&lt;/code&gt;或是&lt;code class=&quot;highlighter-rouge&quot;&gt;require()&lt;/code&gt;就會讓環境改變。
&lt;br /&gt;
所以如果今天是要 create package 的話，千萬不要將 &lt;code class=&quot;highlighter-rouge&quot;&gt;library()&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;require()&lt;/code&gt;包在任何 function，這樣非常危險，可能會造成 &lt;a href=&quot;http://r-pkgs.had.co.nz/namespace.html&quot;&gt;Namespace&lt;/a&gt; 的混亂。（如果看不懂可以先忽略這段）&lt;/p&gt;

&lt;p&gt;那如果今天需要用到這個包，但是又不想讓它加到 search path（parent 環境）裡怎麼辦？&lt;/p&gt;

&lt;p&gt;這時候請使用&lt;code class=&quot;highlighter-rouge&quot;&gt;::&lt;/code&gt;。例如，今天想要呼叫 pkg1 裡頭的 fun()，&lt;/p&gt;
&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;pkg1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fun&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;::&lt;/code&gt;還有一個很好用的時刻，就是當今天有兩個不同的 package 擁有兩個同樣名稱的 function 時，先載入的 package 順序會被放在後面，所以如果直接呼叫 funciton ，一定會用到後載入的 package 的 function。&lt;/p&gt;

&lt;p&gt;如果現在是 pkg1 和 pkg2 都有 fun()，那我們可以這樣用，&lt;/p&gt;
&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# 呼叫 pkg1 的 fun&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pkg1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fun&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 呼叫 pkg2 的 fun&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pkg2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fun&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;這樣就絕對不會出錯了。
不過記得，要使用&lt;code class=&quot;highlighter-rouge&quot;&gt;::&lt;/code&gt;必須要有 install 這個 package 才能使用。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Attaching v.s Loading&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;library() 和 require() 這兩個 function 的動作都是 &lt;strong&gt;Attaching&lt;/strong&gt;，也就是會將這 package 加到 parent 環境 (search path)。
&lt;br /&gt;
但 &lt;code class=&quot;highlighter-rouge&quot;&gt;::&lt;/code&gt;則是 &lt;strong&gt;Loading&lt;/strong&gt;，也就是說，這個 pacakge 在 loading 後可以在記憶體（memory）中被找到，但不會被加到 parent 環境 (search path) 中。
&lt;a href=&quot;http://r-pkgs.had.co.nz/namespace.html#search-path&quot;&gt;source&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;下次介紹
&lt;br /&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;new.env()&lt;/code&gt;和 function 中的環境&lt;/li&gt;
  &lt;li&gt;&amp;lt;- 和 «- 的差別&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;http://adv-r.had.co.nz/Environments.html&quot;&gt;Advance R - Environments&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://r-pkgs.had.co.nz/namespace.html&quot;&gt;R package - Namespace&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;https://www.gl-li.com/2017/09/14/build-a-r-package-for-yourself/&quot;&gt;Build a R package for yourself&lt;/a&gt;
&lt;br /&gt;
&lt;a href=&quot;http://tinyheero.github.io/jekyll/update/2015/07/26/making-your-first-R-package.html&quot;&gt;Making Your First R Package&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[R]variable types</title>
   <link href="http://localhost:4000blog//r/2018/10/19/R-variable-types/"/>
   <updated>2018-10-19T10:32:00+08:00</updated>
   <id>http://localhost:4000/r/2018/10/19/[R]variable types</id>
   <content type="html">&lt;p&gt;We know there are several common types in R, such as, vector, list, matrix, and data.frame.
&lt;br /&gt;
Here I’m going to see these 4 types more details.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;What are the differences between vector, list, matrix, and data.frame?&lt;/li&gt;
  &lt;li&gt;What are the outputs of &lt;code class=&quot;highlighter-rouge&quot;&gt;is.atomic()&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;is.vector()&lt;/code&gt;?&lt;/li&gt;
  &lt;li&gt;What are the outputs of &lt;code class=&quot;highlighter-rouge&quot;&gt;typeof()&lt;/code&gt;?&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;1-what-are-the-differences-between-vector-list-matrix-and-dataframe&quot;&gt;1. What are the differences between &lt;em&gt;vector&lt;/em&gt;, &lt;em&gt;list&lt;/em&gt;, &lt;em&gt;matrix&lt;/em&gt;, and &lt;em&gt;data.frame&lt;/em&gt;?&lt;/h3&gt;

&lt;p&gt;We can seperate these four types to two groups from different aspects.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;(a) Elements type aspect&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Homogeneous data: &lt;em&gt;vector&lt;/em&gt;, &lt;em&gt;matrix&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;Heterogeneous data: &lt;em&gt;list&lt;/em&gt;, &lt;em&gt;data.frame&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Which means all elements in &lt;em&gt;vector&lt;/em&gt; and &lt;em&gt;matrix&lt;/em&gt; have to be the same type (integer, double, or character ect.).
But elements in &lt;em&gt;list&lt;/em&gt; and &lt;em&gt;data.frame&lt;/em&gt; can be different types.&lt;/p&gt;

&lt;p&gt;For example:
&lt;br /&gt;
Vector has same type of elements&lt;/p&gt;
&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# vector&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#  v&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] 1 2 3 4&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v_ch&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;c&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# v_ch&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;What if we give a vector different type of elements?&lt;/p&gt;
&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# v&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#[1] &quot;1&quot; &quot;2&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As you can see, R forces 1 to be character.&lt;/p&gt;

&lt;p&gt;But what is the priority? Why not “2” become numeric?&lt;/p&gt;

&lt;p&gt;Because &lt;strong&gt;the hierarchy for coercion&lt;/strong&gt; is:
&lt;br /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;logical &amp;lt; integer &amp;lt; numeric &amp;lt; character&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;So this is why numeric would be force to character.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://campus.datacamp.com/courses/introduction-to-r-for-finance/vectors-and-matrices?ex=3&quot;&gt;reference&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;(b) Dimension aspect&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;1 Dimension: &lt;em&gt;vector&lt;/em&gt;, &lt;em&gt;list&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;2 Dimensions: &lt;em&gt;matrix&lt;/em&gt;, &lt;em&gt;data.frame&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;2-what-are-the-outputs-of-isatomic-and-isvector&quot;&gt;2. What are the outputs of &lt;code class=&quot;highlighter-rouge&quot;&gt;is.atomic()&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;is.vector()&lt;/code&gt;?&lt;/h3&gt;

&lt;p&gt;Let’s see the outputs of these four types.&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# vector&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# list&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mat&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;matrix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ncol&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# matrix&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data.frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# data.frame&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;(a) is.atomic()&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# &amp;gt; is.atomic(v)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] TRUE&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# &amp;gt; is.atomic(l)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] FALSE&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# &amp;gt; is.atomic(mat)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] TRUE&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# &amp;gt; is.atomic(df)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] FALSE&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As you can see the results, &lt;code class=&quot;highlighter-rouge&quot;&gt;is.atomic()&lt;/code&gt; gives boolean values.
&lt;br /&gt;
And the output is to see if the object is &lt;em&gt;Homogeneous data&lt;/em&gt; or &lt;em&gt;Hetergeneous data&lt;/em&gt;.
&lt;br /&gt;
Hence, &lt;em&gt;vector&lt;/em&gt; and &lt;em&gt;matrix&lt;/em&gt; get TRUE, &lt;em&gt;list&lt;/em&gt; and &lt;em&gt;data.frame&lt;/em&gt; get FALSE.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;(b) is.vector()&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# is.vector(v)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] TRUE&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# is.vector(l)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] TRUE&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# is.vector(mat)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] FALSE&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# is.vector(df)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] FALSE&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In contrast with is.atomic(), &lt;code class=&quot;highlighter-rouge&quot;&gt;is.vector()&lt;/code&gt; checks from Dimension aspect.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;3-what-are-the-outputs-of-typeof&quot;&gt;3. What are the outputs of &lt;code class=&quot;highlighter-rouge&quot;&gt;typeof()&lt;/code&gt;&lt;/h3&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# vector&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# all elements are numeric&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v_ch&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;c&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# all elements are characters&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# list&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# all elements are numeric&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l_ch&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# all elements are characters&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# matrix&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mat&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;matrix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ncol&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# all elements are numeric&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mat_ch&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;matrix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ncol&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# all elements are characters&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# data.frame&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data.frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Let’s see the results,&lt;/p&gt;
&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# ---vector-------------&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# &amp;gt; typeof(v)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] &quot;integer&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# &amp;gt; typeof(v_ch)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] &quot;character&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# ---list-------------&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# &amp;gt; typeof(l)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] &quot;list&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# &amp;gt; typeof(l_ch)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] &quot;list&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# ---matrix-------------&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# &amp;gt; typeof(mat)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] &quot;integer&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# &amp;gt; typeof(mat_ch)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] &quot;character&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# ---data.frame-------------&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# &amp;gt; typeof(df)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# [1] &quot;list&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From the result of ouputs, we can see it checks if the object is &lt;em&gt;Homogeneous data&lt;/em&gt; or not.
&lt;br /&gt;
If it is &lt;em&gt;Homogeneous data&lt;/em&gt; then &lt;code class=&quot;highlighter-rouge&quot;&gt;typeof()&lt;/code&gt; will show the type of elements.
&lt;br /&gt;
But if the object is &lt;em&gt;Hetergeneous data&lt;/em&gt;, it will give only &lt;em&gt;list&lt;/em&gt; as output result.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;More detail about Data Structure can be found &lt;a href=&quot;http://adv-r.had.co.nz/Data-structures.html&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Reference:
&lt;br /&gt;
&lt;a href=&quot;https://zhuanlan.zhihu.com/p/25551827&quot;&gt;R深入|数据类型&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[R]RStudtio編碼問題</title>
   <link href="http://localhost:4000blog//r/2018/10/04/R-RStudtio%E7%B7%A8%E7%A2%BC%E5%95%8F%E9%A1%8C/"/>
   <updated>2018-10-04T23:42:00+08:00</updated>
   <id>http://localhost:4000/r/2018/10/04/[R]RStudtio編碼問題</id>
   <content type="html">&lt;p&gt;解決編碼問題可以說最惱人的事了……&lt;br /&gt;
在使用中文或是其他歐語系語言時經常碰到編碼問題，這篇我根據我自己的一些經驗整理了一些在使用 RStudio 時解決編碼問題的辦法。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;根據我的經驗，我覺得編碼問題可以分成三種，&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;R 程式碼編碼問題&lt;/li&gt;
  &lt;li&gt;檔案編碼問題&lt;/li&gt;
  &lt;li&gt;系統編碼問題&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;1-r-程式碼編碼問題&quot;&gt;1. R 程式碼編碼問題&lt;/h3&gt;
&lt;p&gt;當你打開一份 R Script 時，發現 script 中的中文都是亂碼時，這時應該是這份 script 檔案的編碼與你電腦的 RScript 預設的不同。&lt;/p&gt;

&lt;p&gt;這時選擇 File -&amp;gt; Reopen with Encoding… 更改編碼(UTF-8、BIG5、ASCII試試)，問題應該就可以解決了。&lt;/p&gt;

&lt;p&gt;或是可以直接更改預設的讀檔編碼，到 Tools -&amp;gt; Global Options… -&amp;gt; (左邊選單) Code -&amp;gt; Saving 更改 Default text encoding。&lt;/p&gt;

&lt;h3 id=&quot;2-檔案編碼問題&quot;&gt;2. 檔案編碼問題&lt;/h3&gt;
&lt;p&gt;當你讀進一份檔案，可能碰到以下幾種狀況&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;a. 讀檔時出現編碼錯誤&lt;br /&gt;
解決方法： &lt;br /&gt;
(1)讀檔時設定 fileEncoding：讀檔時提供檔案本身編碼資訊，&lt;a href=&quot;https://shihs.github.io/blog/r/2018/01/17/R-read.csv出現編碼錯誤訊息/&quot;&gt;參考&lt;/a&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;(2)更改檔案編碼：先更改檔案本身的編碼，再使用 RStudio 讀取檔案。&lt;br /&gt;
   如果是 Windows，我個人推薦直接使用記事本更改最方便。另存新檔直接存成需要的編碼。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;(3)更改預設讀檔編碼：如第一個提到的 R 程式碼編碼問題的解決方案，直接更改預設的編碼，設定成 UTF-8 應該是最好的。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;b. 順利讀進檔案，但無法正確顯示&lt;br /&gt;
讀檔時，使用 encoding 參數來決定要顯示什麼語言&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;read.csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;filename.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encoding&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;latin1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;3-系統編碼問題&quot;&gt;3. 系統編碼問題&lt;/h3&gt;
&lt;p&gt;順利讀進檔案，已更改輸入時的編碼，但顯示仍舊錯誤。&lt;br /&gt;
這問題是在讀一份含有瑞典文的檔案時碰到的，已經更改過檔案的編碼，但開啟後仍無法正確顯示瑞典文。&lt;/p&gt;

&lt;p&gt;可以檢查一下系統本身的編碼是不是 UTF-8&lt;/p&gt;
&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;sessionInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 裡的 local&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 或是&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sys.getlocale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# MAC 會長得大概像這樣&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# &quot;en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;如果不是，更改系統的語系，以下更改為 UTF-8&lt;/p&gt;
&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# for windows&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sys.setlocale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;LC_ALL&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;locale&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# for mac&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sys.setlocale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;LC_ALL&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;locale&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;en_US.UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;另外，要查看 vector 的編碼可以使用&lt;/p&gt;
&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# x is a vector&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Encoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;我個人認為，解決編碼問題最重要的就是要先知道編碼出錯的問題在哪。&lt;br /&gt;
是檔案本身編碼問題，還是系統的問題，那是要修改檔案還是要修改系統？&lt;br /&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Algorithm]Hamiltonian path and Travelling Salesman Problem(TSP)</title>
   <link href="http://localhost:4000blog//algorithm/2018/09/28/Algorithm-Hamiltonian-path-and-Travelling-Salesman-Problem(TSP)/"/>
   <updated>2018-09-28T10:36:00+08:00</updated>
   <id>http://localhost:4000/algorithm/2018/09/28/[Algorithm]Hamiltonian path and Travelling Salesman Problem(TSP)</id>
   <content type="html">&lt;p&gt;以下簡單地整理網路上查到的 Hamiltonian path 與 Travelling Salesman Problem 介紹。&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;hamiltonian-path&quot;&gt;Hamiltonian path&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;What is Hamiltonian path?&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;https://en.wikipedia.org/wiki/Hamiltonian_path&quot;&gt;Hamiltonian path&lt;/a&gt; is a path that visit every node only once. It can be an undirected or directed graph. Also it&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Hamiltonian cycle&lt;/strong&gt;&lt;br /&gt;
If a Hamiltonian path is a cycle then we call it A Hamiltonian cycle (or Hamiltonian circuit).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Hamiltonian path problem&lt;/strong&gt;&lt;br /&gt;
Determining whether such paths and cycles exist in graphs is the Hamiltonian path problem, which is NP-complete&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;travelling-salesman-problem&quot;&gt;Travelling Salesman Problem&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;What is Travelling Salesman Problem(TSP)?&lt;/strong&gt;&lt;br /&gt;
There is a man traveling. He departures from a city and he wants to visit every cities(nods) with the shortest distance. In the end, he will go back to the origin city, and he can only stop in each city once.&lt;/p&gt;

&lt;p&gt;Which means, TSP is looking for the shortest distance of &lt;em&gt;Hamiltonian cycle&lt;/em&gt;.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;reference:&lt;br /&gt;
&lt;a href=&quot;http://www.csie.ntnu.edu.tw/~u91029/Circuit.html&quot;&gt;演算法筆記&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://en.wikipedia.org/wiki/Travelling_salesman_problem&quot;&gt;Wikipedia - TSP&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://en.wikipedia.org/wiki/Hamiltonian_path&quot;&gt;Wikipedia - Hamiltonian path&lt;/a&gt;&lt;br /&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[R]scale 與 dist function</title>
   <link href="http://localhost:4000blog//r/2018/09/27/R-scale-%E8%88%87-dist-function/"/>
   <updated>2018-09-27T18:04:00+08:00</updated>
   <id>http://localhost:4000/r/2018/09/27/[R]scale 與 dist function</id>
   <content type="html">&lt;p&gt;這篇文章會介紹 R 中的 scale 與 dist 兩個 function。&lt;/p&gt;

&lt;p&gt;在做資料分析前會需要先標準化&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;scale&quot;&gt;scale&lt;/h3&gt;
&lt;p&gt;scale 的主要作用在標準化數據，共有三個 arguments，&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;x: 必須要是 matrix，以「行」為每組數據計算&lt;/li&gt;
  &lt;li&gt;center: TRUE or FALSE。中心化，TRUE 會減去數據的平均值&lt;/li&gt;
  &lt;li&gt;scale: TRUE or FALSE。 TRUE 會將數據中的每個值除以數據的標準差&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;預設 center 和 scale 都是 TRUE，也就是算出來的值是 &lt;a href=&quot;https://zh.wikipedia.org/wiki/標準分數&quot;&gt;z-score&lt;/a&gt;。&lt;/p&gt;

&lt;blockquote&gt;

  &lt;p&gt;\(z = \frac{x - \mu}{\sigma}, \sigma \neq 0\)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;其中：&lt;br /&gt;
\(x\)：數據&lt;br /&gt;
\(\mu\)：平均值&lt;br /&gt;
\(\sigma\)：標準差&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;matrix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nrow&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;dist&quot;&gt;dist&lt;/h3&gt;
&lt;p&gt;dist 是在算數據間的距離，主要的 arguments有&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;x: 可以是 matrix, data.frame ，但必須要是 numeric。&lt;/li&gt;
  &lt;li&gt;methods: 共有六種計算距離的方法，”euclidean”, “maximum”, “manhattan”, “canberra”, “binary” 和 “minkowski”，預設是使用 euclidean 距離。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;以「列」為數據，兩兩計算，&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;matrix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nrow&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>[R]如何在R Package加上code coverage (codecov)?</title>
   <link href="http://localhost:4000blog//r/2018/09/14/R-%E5%A6%82%E4%BD%95%E5%9C%A8R-Package%E5%8A%A0%E4%B8%8Acode-coverage-(codecov)/"/>
   <updated>2018-09-14T18:04:00+08:00</updated>
   <id>http://localhost:4000/r/2018/09/14/[R]如何在R Package加上code coverage (codecov)?</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/代碼覆蓋率&quot;&gt;code coverage&lt;/a&gt;(代碼覆蓋率)?&lt;/p&gt;

&lt;p&gt;這篇是根據&lt;a href=&quot;https://walczak.org/2017/06/how-to-add-code-coverage-codecov-to-your-r-package/&quot;&gt;這篇&lt;/a&gt;的步驟操作。
如果要找 package 內容物該有的東西可以參考我完成的一個 &lt;a href=&quot;https://github.com/shihs/LiUAdRLab3&quot;&gt;R package&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;以下會將步驟一一列下。&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;1-完成-r-package-與建立-test-測試&quot;&gt;1. 完成 R package 與建立 test 測試&lt;/h3&gt;
&lt;p&gt;建立 &lt;a href=&quot;http://r-pkgs.had.co.nz&quot;&gt;R package&lt;/a&gt; 可以參考大神的書，test 則可以參考這本書的 &lt;a href=&quot;http://r-pkgs.had.co.nz/tests.html&quot;&gt;testing 章節&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;基本上使用，&lt;/p&gt;
&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;use_testthat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;就會自己建立一個 &lt;a href=&quot;https://github.com/shihs/LiUAdRLab3/tree/master/tests&quot;&gt;tests 資料夾&lt;/a&gt;，再把要測試的程式碼加進下一層的 &lt;a href=&quot;https://github.com/shihs/LiUAdRLab3/tree/master/tests/testthat&quot;&gt;testthat 資料夾&lt;/a&gt;內。&lt;/p&gt;

&lt;p&gt;最後進行測試，&lt;/p&gt;
&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;2-建立所有-code-coverage-需要的檔案與內容&quot;&gt;2. 建立所有 code coverage 需要的檔案與內容&lt;/h3&gt;

&lt;p&gt;先跑一下程式碼，&lt;/p&gt;
&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;use_coverage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;跑完後會出現以下的步驟提示，&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;* Creating `codecov.yml` from template.
* Adding `codecov.yml` to `.Rbuildignore`.
* Add to `README.md`: 
[![Coverage Status](https://img.shields.io/codecov/c/github/shihs/LiUAdRLab3/master.svg)](https://codecov.io/github/shihs/LiUAdRLab3?branch=master)
* Add to `.travis.yml`:
after_success:
  - Rscript -e 'covr::codecov()'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;基本上就一步一步照著做就對了，前面兩件事程式已經幫你處理好了，&lt;br /&gt;
從第三步開始就行。&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;3-將-github-與-codecov-連結&quot;&gt;3. 將 Github 與 codecov 連結&lt;/h3&gt;

&lt;p&gt;使用 Github 帳號登入 &lt;a href=&quot;https://codecov.io&quot;&gt;codecov.io &lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;連結你要使用 codecov 的 reposity，
會出現像這樣的&lt;a href=&quot;https://walczak.org/wp-content/uploads/2017/06/token.png&quot;&gt;畫面&lt;/a&gt;得到一組 token，
將 token 複製，在 R 中跑以下程式碼，&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;install.packages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;covr&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;covr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;codecov&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;YOUR_TOKEN_GOES_HERE&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;大功告成！&lt;/p&gt;

&lt;p&gt;這時候會看到你剛剛貼上的 coverage 圖案出現 code coverage 的結果。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;如果想要先在 R studio 上看測試結果可以使用，&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;covr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;viewer 視窗就會顯示測試結果了。&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[R][Git]如何在 Rstudio 上連接 R project 與 Github</title>
   <link href="http://localhost:4000blog//r/git/2018/09/08/R-Git-%E5%A6%82%E4%BD%95%E9%80%A3%E6%8E%A5Rstudio%E8%88%87githu/"/>
   <updated>2018-09-08T10:53:00+08:00</updated>
   <id>http://localhost:4000/r/git/2018/09/08/[R][Git]如何連接Rstudio與githu</id>
   <content type="html">&lt;p&gt;本篇介紹如何將 Rstudio 中的 R project 與 Github 連結，讓每次專案在進行中都可以簡單快速的 commit 與 push。&lt;/p&gt;

&lt;p&gt;在進入主題前，請先安裝好 R、Rstudio 和 Git ，並且申請好 Github 帳號。&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;前置作業&quot;&gt;前置作業&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;設置 SSH RSA key&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;1.複製 public key&lt;br /&gt;
Tool &amp;gt; Global Options &amp;gt; Git/SVN &amp;gt; Create RSA Key &amp;gt; View public key &lt;br /&gt;
點開 View public key 後，複製裡頭所有的東西。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Rstudio%20SSH.png&quot; alt=&quot;Rstudio SSH.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;2.將 public key 貼到 github&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/github%20ssh.png&quot; alt=&quot;github ssh.png&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;開始建立-connection&quot;&gt;開始建立 connection&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;建立專案&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;請先建立一個專案，這裡就不多加解釋了。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;在本機建立 repository&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Build &amp;gt; Configure public Tools &amp;gt; Git/SVN&lt;br /&gt;
將 Version control system 由 None 改為 Git&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/version%20control%20system.png&quot; alt=&quot;version control system.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;這時候就會發現 Rstudio 的視窗長得不太一樣了。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/rstudio%20git.png&quot; alt=&quot;rstudio git.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;下方視窗應該會有一些還未 commit 的檔案，但因為我都已經 commit 了，所以沒有內容。&lt;br /&gt;
且這時候 pull 和 push 鍵應該還無法操作。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Github 同步&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;終於來到最後一哩路。&lt;/p&gt;

&lt;p&gt;到 Github 上創建一個新的 repository，且名稱要和 project 相同，只要單純創建 repository 就好，什麼檔案都不要。&lt;/p&gt;

&lt;p&gt;最後，打開 Rstudio 工具列的， Tools &amp;gt; Shell&lt;/p&gt;

&lt;p&gt;然後在 Shell 裡輸入，&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-git&quot;&gt;git remote add origin https://github.com/你的github帳號/你的專案名稱.git
git push -u origin master
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;完成後就會發現專案已經和 Github 連結了！專案的檔案都出現在 Github 上了。&lt;br /&gt;
這時候 pull 和 push 鍵也已經可以操作了。&lt;/p&gt;

&lt;p&gt;未來只要更新專案內容，就可以直接在 Rstudio 上 commit 和 push 就好了！&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;補充&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;移除 project 與該 repository 的 connection &lt;code class=&quot;highlighter-rouge&quot;&gt;rm -rf .git&lt;/code&gt;&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;參考：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Hadley Wickham 的 &lt;a href=&quot;http://r-pkgs.had.co.nz/git.html&quot;&gt;R Package Git 章節&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>[統計]什麼是 CDF (Cumulative Distribution Function)?</title>
   <link href="http://localhost:4000blog//%E7%B5%B1%E8%A8%88/2018/09/04/%E7%B5%B1%E8%A8%88-%E4%BB%80%E9%BA%BC%E6%98%AFCDF/"/>
   <updated>2018-09-04T11:50:00+08:00</updated>
   <id>http://localhost:4000/%E7%B5%B1%E8%A8%88/2018/09/04/[統計]什麼是CDF?</id>
   <content type="html">&lt;p&gt;在進入連續型隨機變數（Continuous Random Variable）前先插播介紹何謂 CDF。&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;cdf-cumulative-distribution-function&quot;&gt;CDF (Cumulative Distribution Function)&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;定義 Definition&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The cumulative distribution function (CDF) of random variable \(X\) is defined as&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;F_X(x) = P(X \leq x), \forall x \in {\Bbb R}&lt;/script&gt;

&lt;p&gt;&lt;a href=&quot;https://www.probabilitycourse.com/chapter3/3_2_1_cdf.php&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;

  &lt;p&gt;Mathematical Statistics with Applications 這本書將 CDF 稱為 distribution function，&lt;br /&gt;
&lt;a href=&quot;https://zh.wikipedia.org/wiki/累积分布函数&quot;&gt;wikipedia&lt;/a&gt; 則翻譯為&lt;strong&gt;累積分布函數&lt;/strong&gt;。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;以下再分 &lt;em&gt;1.離散型函數&lt;/em&gt; 與 &lt;em&gt;2.連續型函數&lt;/em&gt; 來看，&lt;/p&gt;

&lt;hr /&gt;
&lt;h3 id=&quot;離散型隨機變數的-cdf&quot;&gt;離散型隨機變數的 CDF&lt;/h3&gt;

&lt;p&gt;以擲兩枚硬幣為例，出現 head 為 1，tail 為 0，&lt;br /&gt;
其隨機變數 \(X\) 的 PMF 函數為&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
P_X(x) = \left\{ \begin{array}{rcl}
1/4,&amp; \;for\; x = 0 \\
1/2,&amp; \;for\; x = 1 \\
1/4,&amp; \;for\; x = 2 \\
0,&amp; otherwise \\
\end{array}\right. %]]&gt;&lt;/script&gt;

&lt;p&gt;PMF 函數圖為，
&lt;img src=&quot;http://localhost:4000/blog/img/posts/PMF_two%20coins.png&quot; alt=&quot;PMF_two coins.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;則它的 CDF 累積分佈函數為
&lt;script type=&quot;math/tex&quot;&gt;% &lt;![CDATA[
F_X(x) = \left\{ \begin{array}{rcl}
0,&amp; &amp;for\; x &lt; 0 \\
1/4,&amp; &amp;for\; 0 \leq x &lt; 1 \\
3/4,&amp; &amp;for\; 1 \leq x &lt; 2 \\
1,&amp;  &amp;for\; x \geq 2\\
\end{array}\right. %]]&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;CDF 函數圖為，
&lt;img src=&quot;http://localhost:4000/blog/img/posts/CDF_two%20coins.png&quot; alt=&quot;CDF_two coins.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;可以發現，離散型的 CDF \(F_X(x)\) 為不連續的函數圖。&lt;/p&gt;

&lt;p&gt;關於離散型的 CDF 這&lt;a href=&quot;https://www.probabilitycourse.com/videos/chapter3/video3_5.php&quot;&gt;影片&lt;/a&gt;有更詳細的說明。&lt;/p&gt;

&lt;hr /&gt;
&lt;h3 id=&quot;連續型隨機變數的-cdf&quot;&gt;連續型隨機變數的 CDF&lt;/h3&gt;

&lt;p&gt;那如果今天有個隨機變數 \(X\)，它的 CDF \(F(X)\) 為連續函數呢？&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;定義 Definition&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;A random variable \(X\) with CDF \(F(X)\) is said to be continuous if \(F(X)\) is a continuous function for all \(X \in {\Bbb R} \). &lt;a href=&quot;https://www.probabilitycourse.com/chapter4/4_1_0_continuous_random_vars_distributions.php&quot;&gt;Source&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;
&lt;p&gt;參考：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.probabilitycourse.com&quot;&gt;Introduce To Proability, Statistics and Random Process&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;
</content>
 </entry>
 
 <entry>
   <title>[統計]離散型(Discrete)隨機變數與其機率分佈(3)</title>
   <link href="http://localhost:4000blog//%E7%B5%B1%E8%A8%88/2018/09/04/%E7%B5%B1%E8%A8%88-%E9%9B%A2%E6%95%A3%E5%9E%8B(Discrete)%E9%9A%A8%E6%A9%9F%E8%AE%8A%E6%95%B8%E8%88%87%E5%85%B6%E6%A9%9F%E7%8E%87%E5%88%86%E4%BD%88(3)/"/>
   <updated>2018-09-04T11:36:00+08:00</updated>
   <id>http://localhost:4000/%E7%B5%B1%E8%A8%88/2018/09/04/[統計]離散型(Discrete)隨機變數與其機率分佈(3)</id>
   <content type="html">&lt;p&gt;這一系列我是以 
Wackerley, Mendenhall and Scheaffer 的 &lt;br /&gt;
Mathematical Statistics with Applications, 7th edition 這本書為主，&lt;br /&gt;
有些名詞與定理解釋會再參考其他書籍與網路作為輔助（下方有參考連結）。&lt;/p&gt;

&lt;p&gt;這一篇要介紹常見的離散型分佈（Discrete Distribution），這篇主要是參考  &lt;a href=&quot;https://www.probabilitycourse.com/chapter3/3_1_5_special_discrete_distr.php&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;
&lt;h3 id=&quot;伯努利分佈-bernoulli-distribution&quot;&gt;伯努利分佈 Bernoulli Distribution&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;定義 Definition&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A random variable \(X\) is said to be a &lt;em&gt;bernoulli&lt;/em&gt; random variable with peremeter \(p\), shown as &lt;strong&gt;\(X \sim Bernoulli(p)\)&lt;/strong&gt;, if its PMF is given by&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
P_X(x) = \left\{ \begin{array}{rcl}
p,&amp; \;for\; x = 1 \\
1-p,&amp; \;for\; x = 0 \\
0,&amp; otherwise \\
\end{array}\right. %]]&gt;&lt;/script&gt;

&lt;ul&gt;
  &lt;li&gt;where \(0 &amp;lt; p &amp;lt; 1\)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;簡單來說，一個事件只有兩種可能。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;生活中有非常多的例子都會是 Bernoulli Distribution，譬如，&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;考試有及格、不及格&lt;/li&gt;
  &lt;li&gt;丟擲一枚銅板有正面、反面&lt;/li&gt;
  &lt;li&gt;小孩子性別可能是男生、女生&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Bernoulli.png&quot; alt=&quot;Bernoulli.png&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;
&lt;h3 id=&quot;幾何分布-geometric-distribution&quot;&gt;幾何分布 Geometric Distribution&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;定義 Definition&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A random variable \(X\) is said to be a &lt;em&gt;geometric&lt;/em&gt; random variable with peremeter \(p\), shown as &lt;strong&gt;\(X \sim Geometric(p)\)&lt;/strong&gt;, if its PMF is given by&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
P_X(x) = \left\{ \begin{array}{rcl}
p(1-p)^{k-1},&amp; \;for\; k = 1, 2, 3,...... \\
0,&amp; otherwise \\
\end{array}\right. %]]&gt;&lt;/script&gt;

&lt;ul&gt;
  &lt;li&gt;where \(0 &amp;lt; p &amp;lt; 1\)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Geometric Distribution 的例子：擲一枚銅板，且此銅板擲到 Head 的機率為 \(p\)。今天擲這枚到出現第一個 Head 為止，則其機率分佈為 Geometric Distribution。&lt;br /&gt;
另外，每一次擲這枚銅板都會是獨立的 Bernoulli 試驗。&lt;/p&gt;

&lt;p&gt;所以，Geometric Distribution 就是很多次的 Bernoulli 試驗直到成功為止。&lt;/p&gt;

&lt;p&gt;以 \(p = 0.3\) 為例，其 Geometric Distribution 的 PMF 會是這樣，&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Geometric.png&quot; alt=&quot;Geometric.png&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;
&lt;h3 id=&quot;二項分布-binomial-distribution&quot;&gt;二項分布 Binomial Distribution&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;定義 Definition&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A random variable \(X\) is said to be a &lt;em&gt;binomial&lt;/em&gt; random variable with peremeter \(n\) and \(p\), shown as &lt;strong&gt;\(X \sim Binomial(n, p)\)&lt;/strong&gt;, if its PMF is given by&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
P_X(x) = \left\{ \begin{array}{rcl}
\left( \begin{array}{c} n \\ k \end{array} \right) p^k(1-p)^{n-k},&amp; \;for\; k = 0, 1, 2,..., n \\
0,&amp; otherwise \\
\end{array}\right. %]]&gt;&lt;/script&gt;

&lt;ul&gt;
  &lt;li&gt;where \(0 &amp;lt; p &amp;lt; 1\)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Binomial Distribution 也是很多次獨立 Bernoulli 試驗的結果，但和 Geometric Distribution 不一樣的是，Binomial Distribution 會執行 \(n\) 次的 Bernoulli 試驗，且成功了 \(k\) 次。&lt;/p&gt;

&lt;p&gt;所以它的 PMF 會有 &lt;script type=&quot;math/tex&quot;&gt;\left( \begin{array}{c} n \\ k \end{array} \right)&lt;/script&gt;，表示執行了\(n\) 次，其中有 \(k\) 次成功，且這 \(k\) 次並沒有限定在哪個位置。&lt;/p&gt;

&lt;p&gt;可以以丟擲 \(n\) 枚銅板來想，其中 \(k\) 枚硬幣為 Head，\((n-k)\) 為 Tail。&lt;/p&gt;

&lt;p&gt;以 \(n = 10,\; p = 0.3\) 為例，其 PMF 圖會是，&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Binomial.png&quot; alt=&quot;Binomial.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Binomial random variable as a sum of Bernoulli random variables&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;If \(X_1,\;X_2,\;X_3,…,\;X_n\) are independent \(Bernoulli(p)\) random variable,  then the random variable \(X\) defined by \(X = X_1 + X_2 + X_3 + … + X_n\) has a \(Binomial(n,p)\) distribution.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;也就是，二項分布可以看成是每個獨立的伯努利分佈的和。&lt;/p&gt;

&lt;hr /&gt;
&lt;h3 id=&quot;布瓦松分布-poisson-distribution&quot;&gt;布瓦松分布 Poisson Distribution&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;定義 Definition&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A random variable \(X\) is said to be a &lt;em&gt;poisson&lt;/em&gt; random variable with peremeter \(\lambda\), shown as &lt;strong&gt;\(X \sim Poisson(\lambda)\)&lt;/strong&gt;, if its range is \(R_X = \{ 0, 1, 2, 3,… \} \), and if its PMF is given by&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
P_X(x) = \left\{ \begin{array}{rcl}
\frac{e^{-\lambda} \lambda^k}{k!} ,&amp; k \in R_X \\
0,&amp; otherwise \\
\end{array}\right. %]]&gt;&lt;/script&gt;

&lt;p&gt;Poisson Distribution 的意義為：單位時間內，事件出現平均 \(lambda\) 次的機率分布。&lt;/p&gt;

&lt;p&gt;既然上面的式子為 PMF，那我們來檢驗
&lt;strong&gt;\(\sum_{k \in R_X}{P_k(x)} = 1\)&lt;/strong&gt;
是否正確。&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align}
\sum_{k \in R_X}{P_k(x)} &amp;= \sum_{k=0}^{\infty} \frac{e^{-\lambda} \lambda^k}{k!} \\
&amp;= e^{-\lambda} \sum_{k=0}^{\infty} \frac{\lambda^k}{k!} \\
\end{align} %]]&gt;&lt;/script&gt;

&lt;blockquote&gt;

  &lt;p&gt;Note: 根據 Taylor Series(泰勒展開式) &lt;strong&gt;\(\; e^{x} = \sum_{k=0}^{\infty} \frac{x^k}{k!}\)&lt;/strong&gt;，上列式子可以寫成，&lt;/p&gt;
&lt;/blockquote&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align}
&amp;= e^{-\lambda} e^{\lambda} \\
&amp;= 1 \\
\end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;

  &lt;p&gt;The number of emails that I get in a weekday can be modeled by a Poisson distribution with an average of 0.2 emails per minute.&lt;/p&gt;
  &lt;ol&gt;
    &lt;li&gt;What is the probability that I get no emails in an interval of length 5 minutes?&lt;/li&gt;
    &lt;li&gt;What is the probability that I get more than 3 emails in an interval of length 10 minutes?&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;Poisson as an approximation for binomial&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Let \(X \sim Binomial(n, p = \frac{\lambda}{n})\), where \(\lambda &amp;gt; 0\) is fixed. Then for any \(k \in {0, 1, 2,…} \), we have&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\lim_{n \rightarrow \infty} P_X(k) = \frac{e^{-\lambda} \lambda^k}{k!}&lt;/script&gt;

&lt;p&gt;\(X \sim Poisson(\lambda = 5)\) 的函數圖形，&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Poisson.png&quot; alt=&quot;Poisson.png&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;參考：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.amazon.com/Mathematical-Statistics-Applications-Dennis-Wackerly/dp/0495110817&quot;&gt;Mathematical Statistics with Applications 7th Edition&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.probabilitycourse.com&quot;&gt;Introduce To Proability, Statistics and Random Process&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://ccckmit.wikidot.com/st:main&quot;&gt;陳鍾誠的網站&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>[統計]離散型(Discrete)隨機變數與其機率分佈(2)</title>
   <link href="http://localhost:4000blog//%E7%B5%B1%E8%A8%88/2018/09/02/%E7%B5%B1%E8%A8%88-%E9%9B%A2%E6%95%A3%E5%9E%8B(Discrete)%E9%9A%A8%E6%A9%9F%E8%AE%8A%E6%95%B8%E8%88%87%E5%85%B6%E6%A9%9F%E7%8E%87%E5%88%86%E4%BD%88(2)/"/>
   <updated>2018-09-02T11:21:00+08:00</updated>
   <id>http://localhost:4000/%E7%B5%B1%E8%A8%88/2018/09/02/[統計]離散型(Discrete)隨機變數與其機率分佈(2)</id>
   <content type="html">&lt;p&gt;這一系列我是以 
Wackerley, Mendenhall and Scheaffer 的 &lt;br /&gt;
Mathematical Statistics with Applications, 7th edition 這本書為主，&lt;br /&gt;
有些名詞與定理解釋會再參考其他書籍與網路作為輔助（下方有參考連結）。&lt;/p&gt;

&lt;p&gt;這篇關於期望值的介紹在書中的 3.3，但這篇內容有很大部分也來自 &lt;a href=&quot;https://www.probabilitycourse.com/chapter3/3_2_2_expectation.php&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;
&lt;h3 id=&quot;期望值-expectation&quot;&gt;期望值 Expectation&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;定義 Definition&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Let \(X\) be a discrete random variable with range \(R_X = \{ x_1, x_2, x_3,… \} \)(finite or countably infinite). The expectation of \(X\) is defined as&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;E(X) = \sum_{\substack{x_k \in R_X}}x_kP(X=x_k)=\sum_{\substack{x_k \in R_X}}x_kP_X(x_k)&lt;/script&gt;

&lt;p&gt;且期望值 \(E(X)\) 會等於平均數 \(\mu\)&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;E(X) = \mu&lt;/script&gt;

&lt;p&gt;說明：&lt;/p&gt;

&lt;blockquote&gt;

  &lt;p&gt;There is a discrete random variable with range \(R_X = \{ x_1, x_2, x_3,… \} \). Suppose that we repeat this experiment a very large number of times \(N\), and that the trials are independent. Let \(N_1\) be the number of times we observe \(x_1\), \(N_2\) be the number of times we observe \(x_2, ….\), \(N_k\) be the number of times we observe \(x_k\).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_X(x_1) \approx\frac{N_1}{N} \\
P_X(x_2) \approx\frac{N_2}{N} \\
\cdots\\
P_X(x_k) \approx\frac{N_k}{N} \\
\cdots&lt;/script&gt;

&lt;blockquote&gt;

  &lt;p&gt;從以上式子我們可以得到 \(N_k = NP_X(x_k)\)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align}
\mu &amp; = \frac{N_1x_1 + N_2x_2 + N_3x_3 + ...}{N} \\
&amp; \approx \frac{x_1NP_X(x_1) + x_2NP_X(x_2) + x_3NP_X(x_3) + ...}{N} \\
&amp; = x_1P_X(x_1) + x_2P_X(x_2) + x_3P_X(x_3) + ... \\
&amp; = E(X)
\end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;以上就是 \(E(X) = \mu\) 的說明。&lt;/p&gt;

&lt;p&gt;另外，可能會看到一些不同的寫法表示期望值&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;E(X)=E[X]=EX=\mu=\mu_X&lt;/script&gt;

&lt;p&gt;這部分內容主要來源為 &lt;a href=&quot;https://www.probabilitycourse.com/chapter3/3_2_2_expectation.php&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;
&lt;h3 id=&quot;law-of-the-unconscious-statistician-lotus&quot;&gt;Law of the unconscious statistician (LOTUS)&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;THEOREM 3.2&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Let \(X\) be a discrete random variable with probability function \(P(x)\) and \(g(X)\) be a real-valued function of \(Y\). Then the expected value of \(g(X)\) is given by&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;E[g(X)] = \sum_{\substack{x \in R_X}}g(x)P(x)&lt;/script&gt;

&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt; &lt;br /&gt;
&lt;a href=&quot;https://www.probabilitycourse.com/chapter3/3_2_3_functions_random_var.php&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;

  &lt;p&gt;Let \(X\) be a discrete random variable with range \(R_X = \{ 0, \frac{\pi}{4}, \frac{\pi}{2}, \frac{3\pi}{4}, \pi… \} \), such that \(P_X(0)=P_X(\frac{\pi}{4})=P_X(\frac{\pi}{2})=P_X(\frac{3\pi}{4})=P_X(\pi)=\frac{1}{5}\).  Find \(E[sin(X)]\).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Solution:&lt;/p&gt;

&lt;blockquote&gt;

  &lt;p&gt;根據 LOTUS，
&lt;script type=&quot;math/tex&quot;&gt;% &lt;![CDATA[
\begin{align}
E[\sin(X)] &amp; = \sum_{\substack{x \in R_X}}\sin(x)P(x) \\
&amp; = \sin(0)P_X(0) +  \sin(\frac{\pi}{4})P_X(\frac{\pi}{4}) + \sin(\frac{\pi}{2})P_X(\frac{\pi}{2}) + \sin(\frac{3\pi}{4})P_X(\frac{3\pi}{4}) + \sin(\pi)P_X(\pi)\\
&amp; = 0 \times \frac{1}{5} + \frac{\sqrt{2}}{2} \times \frac{1}{5} + 1 \times \frac{1}{5} + \frac{\sqrt{2}}{2} \times \frac{1}{5} + 0 \times \frac{1}{5} \\
&amp; = \frac{\sqrt{2} + 1}{2}
\end{align} %]]&gt;&lt;/script&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;h3 id=&quot;變異數-variance&quot;&gt;變異數 Variance&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;定義 Definition&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;If \(X\) is a random variable with mean \(E[X] = \mu\), the variance of \(X\) is defined as&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;Var(X) = E[(X - \mu)^2]&lt;/script&gt;

&lt;ul&gt;
  &lt;li&gt;且根據 LOTUS，這個式子可以再寫成&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;Var(X) = E[(X - \mu)^2] = \sum_{\substack{x \in R_X}}(x - \mu)^2P(x)&lt;/script&gt;

&lt;hr /&gt;
&lt;h3 id=&quot;期望值的運算&quot;&gt;期望值的運算&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;THEOREM 3.3&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Let X be a discrete random variable with probability function \(p(x)\) and \(c\) be a constant. Then&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;E(c) = c.&lt;/script&gt;

&lt;p&gt;&lt;strong&gt;THEOREM 3.4&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Let X be a discrete random variable with probability function \(p(x)\) and \(g(X)\) be a function of X, and c be as constant. Then&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;E[cg(X)] = cE[g(X)].&lt;/script&gt;

&lt;p&gt;&lt;strong&gt;THEOREM 3.5&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Let X be a discrete random variable with probability function \(p(x)\) and \(g_1(X), g_2(X), …, g_k(X)\) be \(k\) functions of \(X\). Then&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;E[g_1(X)+g_2(X)+...+g_k(X)] = E[g_1(X)] + E[g_2(X)] + ... + E[g_k(X)]&lt;/script&gt;

&lt;p&gt;根據以上定理，可以再產生&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;THEOREM 3.6&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Let X be a discrete random variable with probability function \(p(x)\) and mean \(E(X) = \mu\). Then&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align}
V(X) = \sigma^2 &amp; = E[(X - \mu)^2] \\
&amp; = E(X^2) - \mu^2 \\
&amp; = E(X^2) - E^2(X) \\
\end{align} %]]&gt;&lt;/script&gt;

&lt;p&gt;證明：&lt;/p&gt;

&lt;blockquote&gt;

  &lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{align}
\sigma^2 &amp; = E[(X - \mu)^2] &amp; \\
&amp; = E[(X^2 - 2\mu X + \mu^2] \\
&amp; = E(X^2) - E(2\mu X) + E(\mu^2) \\
&amp; = E(X^2) - 2\mu E(X) + \mu^2 \\
&amp; = E(X^2) - 2\mu^2 + \mu^2 \\
&amp; = E(X^2) - \mu^2 \\
&amp; = E(X^2) - E^2(X) \\
\end{align} %]]&gt;&lt;/script&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;p&gt;參考：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.amazon.com/Mathematical-Statistics-Applications-Dennis-Wackerly/dp/0495110817&quot;&gt;Mathematical Statistics with Applications 7th Edition&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.probabilitycourse.com&quot;&gt;Introduce To Proability, Statistics and Random Process&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://ccckmit.wikidot.com/st:main&quot;&gt;陳鍾誠的網站&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>[統計]離散型(Discrete)隨機變數與其機率分佈(1)</title>
   <link href="http://localhost:4000blog//%E7%B5%B1%E8%A8%88/2018/09/01/%E7%B5%B1%E8%A8%88-%E9%9B%A2%E6%95%A3%E5%9E%8B(Discrete)%E9%9A%A8%E6%A9%9F%E8%AE%8A%E6%95%B8%E8%88%87%E5%85%B6%E6%A9%9F%E7%8E%87%E5%88%86%E4%BD%88(1)/"/>
   <updated>2018-09-01T19:28:00+08:00</updated>
   <id>http://localhost:4000/%E7%B5%B1%E8%A8%88/2018/09/01/[統計]離散型(Discrete)隨機變數與其機率分佈(1)</id>
   <content type="html">&lt;p&gt;這一系列我是以 
Wackerley, Mendenhall and Scheaffer 的 &lt;br /&gt;
Mathematical Statistics with Applications, 7th edition 這本書為主，&lt;br /&gt;
有些名詞與定理解釋會再參考其他書籍與網路作為輔助（下方有參考連結）。&lt;/p&gt;

&lt;p&gt;這篇內容為書中的 3.1 與 3.2。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;在開始前，何謂「隨機變數」？&lt;/p&gt;
&lt;h3 id=&quot;隨機變數-random-variable&quot;&gt;隨機變數 Random Variable&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;定義 Definition&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;隨機變數 \(X\) 是一個以樣本空間 \(S\) 為定義域（Domain）的實數值函數。 &lt;a href=&quot;http://ccckmit.wikidot.com/st:randomvariable&quot;&gt;Source&lt;/a&gt;&lt;br /&gt;&lt;/li&gt;
  &lt;li&gt;A random variable \(X\) is a funcion from sample space to real number. &lt;a href=&quot;https://www.probabilitycourse.com/chapter3/3_1_1_random_variables.php&quot;&gt;Source&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;

  &lt;p&gt;\( X: S  \to {\Bbb R}, \ S \ is \ sample \ space  \) &lt;br /&gt;
\( i.e. \ \forall \ s \in S, \ X(s) \in {\Bbb R}  \)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;Example:&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;

  &lt;p&gt;擲兩枚硬幣，其樣本空間為 \( R = \{HH, HT, TH, TT\}  \)，共有 \(2^2\) 種可能。 &lt;br /&gt;
若將 H 定義為 1，T 定義為 0，則其隨機變數 \(X\) 的值為 \( \{0, 1, 2\}\)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;而隨機變數又分為 1. &lt;em&gt;離散型&lt;/em&gt; 與 2. &lt;em&gt;連續型&lt;/em&gt;，這一章節我們只會討論離散型。&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;離散型隨機變數-discrete-random-variable&quot;&gt;離散型隨機變數 Discrete Random Variable&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;定義 Definition&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;A random variable \(Y\) is said to be discrete if it can assume only a finite or countably infinite number of distinct values. (DEFINITION 3.1)&lt;/li&gt;
  &lt;li&gt;\(X\) is a discrete random variable, if its range is countable. &lt;a href=&quot;https://www.probabilitycourse.com/chapter3/3_1_2_discrete_random_var.php&quot;&gt;Source&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;根據定義，離散型隨機變數（Discrete Random Variable）必須為可數（countable）。&lt;/p&gt;

&lt;p&gt;所以像是擲銅板或是擲骰子就會是離散型隨機變數。&lt;/p&gt;

&lt;p&gt;以擲一顆骰子一次為例，其可能值為 \(\{1, 2, 3, 4, 5, 6\}\), 我們用 \(X\)來表示其隨機變數，&lt;br /&gt;
但因為隨機變數為 function，所以我們可以用 \(R_X\)來表示它的範圍，&lt;/p&gt;

&lt;blockquote&gt;

  &lt;p&gt;\( Range(X) = R_X = \{1, 2, 3, 4, 5, 6\}  \) &lt;br /&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;機率質量函數-probability-mass-function-pmf&quot;&gt;機率質量函數 Probability Mass Function (PMF)&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;定義 Definition&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Let \(X\) be a discrete random variable with range \(R_X = \{ x_1, x_2, x_3,… \} \) (finite or countably infinite). The function&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;P_X(x_k) = P(X=x_k),\; for \; k = 1, 2, 3,...&lt;/script&gt;

&lt;ul&gt;
  &lt;li&gt;is called the probability mass function (PMF) of \(X\). &lt;a href=&quot;https://www.probabilitycourse.com/chapter3/3_1_3_pmf.php&quot;&gt;Source&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;機率質量函數 Probability Mass Function (PMF) 可以用來表達樣本空間中某事件的機率。&lt;/p&gt;

&lt;p&gt;譬如說，擲一顆公平的骰子，骰子點數為 1 的機率我們可以這樣表示，&lt;/p&gt;

&lt;blockquote&gt;

  &lt;p&gt;\( P(X = 1) = 1/6  \)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;另外，\( P_X(x) \)還有兩個很重要的&lt;strong&gt;性質&lt;/strong&gt; &lt;a href=&quot;https://www.probabilitycourse.com/chapter3/3_1_3_pmf.php&quot;&gt;Source&lt;/a&gt;，&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;\( 0 \leqslant P_X(x) \leqslant 1 , \forall x \)&lt;/li&gt;
  &lt;li&gt;\( \sum_{\substack{x \in R_X}}P_X(x) = 1 \)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;簡單來說就是，&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;任何事件發生的機率都只會介於 0 和 1 之間&lt;/li&gt;
  &lt;li&gt;所有事件機率總和等於 1&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;離散型 PMF 圖&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;擲兩枚硬幣，出現 head 為 1，tail 為 0 ，其 PMF 函數為&lt;/p&gt;

&lt;blockquote&gt;

  &lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
P_X(x) = \left\{ \begin{array}{rcl}
1/4,&amp; \;for\; x = 0 \\
1/2,&amp; \;for\; x = 1 \\
1/4,&amp; \;for\; x = 2 \\
0,&amp; otherwise \\
\end{array}\right. %]]&gt;&lt;/script&gt;
&lt;/blockquote&gt;

&lt;p&gt;函數圖為，&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/PMF_two%20coins.png&quot; alt=&quot;PMF_two coins.png&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;參考：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.amazon.com/Mathematical-Statistics-Applications-Dennis-Wackerly/dp/0495110817&quot;&gt;Mathematical Statistics with Applications 7th Edition&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.probabilitycourse.com&quot;&gt;Introduce To Proability, Statistics and Random Process&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://ccckmit.wikidot.com/st:main&quot;&gt;陳鍾誠的網站&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>[R]如何更改R介面語言的設定</title>
   <link href="http://localhost:4000blog//r/2018/08/27/R-%E5%A6%82%E4%BD%95%E4%BF%AE%E7%95%8C%E9%9D%A2%E8%AA%9E%E8%A8%80%E7%9A%84%E8%A8%AD%E5%AE%9A/"/>
   <updated>2018-08-27T23:18:00+08:00</updated>
   <id>http://localhost:4000/r/2018/08/27/[R]如何修界面語言的設定</id>
   <content type="html">&lt;p&gt;當安裝完 R 後，原本設定的語言為中文，但現在想要將中文改為英文該如何操作？&lt;/p&gt;

&lt;p&gt;以下為 mac 的 ios 系統解法，&lt;/p&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;defaults write org.R-project.R force.LANG en_US.UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;然後關閉 R 再重新打開就會改為英文介面囉！&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Python]執行pyinstaller產生的執行檔出現No module錯誤訊息</title>
   <link href="http://localhost:4000blog//python/2018/07/13/Python-%E5%9F%B7%E8%A1%8Cpyinstaller%E7%94%A2%E7%94%9F%E7%9A%84exe%E6%AA%94%E5%87%BA%E7%8F%BENo-module%E9%8C%AF%E8%AA%A4%E8%A8%8A%E6%81%AF/"/>
   <updated>2018-07-13T11:56:00+08:00</updated>
   <id>http://localhost:4000/python/2018/07/13/[Python]執行pyinstaller產生的exe檔出現No module錯誤訊息</id>
   <content type="html">&lt;p&gt;前面介紹過使用 &lt;a href=&quot;https://shihs.github.io/blog/python/2018/05/24/Python-使用pyinstaller套件打包.py檔/&quot;&gt;pyinstaller 將 .py 打包成執行檔&lt;/a&gt;，方便使用者執行程式。&lt;/p&gt;

&lt;p&gt;我在 mac 終端機輸入 &lt;code class=&quot;highlighter-rouge&quot;&gt;pyinstaller -F pyscript.py&lt;/code&gt; 後， &lt;br /&gt;
執行在 dist 資料夾底下的檔案，卻出現
`
no module named ‘somepackagename’
`
的錯誤訊息。&lt;/p&gt;

&lt;p&gt;這表示，在打包這支程式時，並未把需要的套件打包進去？ &lt;br /&gt;
但是我使用 .py 執行時並沒有這樣的問題啊？ &lt;br /&gt;
表示我的電腦確實是有安裝該套件才是。&lt;/p&gt;

&lt;p&gt;原來是因為在打包時 pyinstaller 並不知道這個套件的路徑， &lt;br /&gt;
所以只要加上套件的路徑位置，讓 pyinstaller 執行打包時可以找得到就好。 &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;假如缺少的套件在 &lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/local/lib/python2.7/site-packages&lt;/code&gt;， &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;只要將原本的 &lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;pyinstaller -F pyscript.py&lt;/code&gt; &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;改成 &lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;pyinstaller -F -p /usr/local/lib/python2.7/site-packages pyscript.py&lt;/code&gt; &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;就好了。 &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;可以用， &lt;br /&gt;&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;查看系統路徑，就可以知道套件可能的位置。&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python]彈出視窗 alert box</title>
   <link href="http://localhost:4000blog//python/2018/07/05/Python-%E5%BD%88%E5%87%BA%E8%A6%96%E7%AA%97alert-box/"/>
   <updated>2018-07-05T15:39:00+08:00</updated>
   <id>http://localhost:4000/python/2018/07/05/[Python]彈出視窗alert box</id>
   <content type="html">&lt;p&gt;介紹如何使用 python 寫彈跳視窗，其實網路上可以找到蠻多方法的，我這邊就簡單介紹幾個。&lt;br /&gt;
以下會分為 mac 和 windows 兩個系統來討論。&lt;/p&gt;

&lt;h2 id=&quot;mac&quot;&gt;Mac&lt;/h2&gt;

&lt;h3 id=&quot;1-easygui-套件&quot;&gt;1. easygui 套件&lt;/h3&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 記得先安裝 easygui 套件&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;easygui&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msgbox&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;msgbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Stuff'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;這個套件基本上蠻簡單的，只要使用&lt;code class=&quot;highlighter-rouge&quot;&gt;msgbox()&lt;/code&gt;就好，&lt;br /&gt;
如果只是要在跑程式的時候使用沒有太大問題，&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;更多 &lt;a href=&quot;https://blog.csdn.net/marksinoberg/article/details/51499909&quot;&gt;easygui 套件&lt;/a&gt; 的介紹&lt;/p&gt;

&lt;p&gt;但如果要把程式碼打包時（&lt;a href=&quot;https://shihs.github.io/blog/python/2018/05/24/Python-使用pyinstaller套件打包.py檔/&quot;&gt;pyinstaller套件&lt;/a&gt;） 這個方法就會失效，會出現錯誤訊息&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ImportError: No module named easygui
[3310] Failed to execute script alterwindow
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;所以如果要讓程式碼打包後可以出現彈跳視窗可以使用內建的 system。&lt;/p&gt;

&lt;h3 id=&quot;2-ossystem&quot;&gt;2. os.system()&lt;/h3&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;osascript -e 'Tell application &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;System Events&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; to display dialog &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Some Funky Message&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;這方法其實就是使用 python 執行&lt;strong&gt;系統命令&lt;/strong&gt;。
也就是，其實把 os.system() 括號裡的東西&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;osascript -e 'Tell application &quot;System Events&quot; to display dialog &quot;Some Funky Message&quot;'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;打在 terminal 裡會執行的東西。&lt;/p&gt;

&lt;p&gt;將以上命令打在 terminal 會發現出現一個彈跳視窗，內容是 Some Funcky Message。
&lt;img src=&quot;http://localhost:4000/blog/img/posts/system_msg.jpg&quot; alt=&quot;system_msg.jpg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;所以在 python 裡面同樣執行會產生同樣的結果。&lt;/p&gt;

&lt;p&gt;而這個方法將程式打包後可以正確執行。
&lt;br /&gt;
&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;windows&quot;&gt;Windows&lt;/h2&gt;
&lt;h3 id=&quot;1-easygui-套件-1&quot;&gt;1. easygui 套件&lt;/h3&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 記得先安裝 easygui 套件&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;easygui&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msgbox&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;msgbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Stuff'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;基本上和 mac 一樣，將程式碼打包後也無法正常執行。&lt;/p&gt;

&lt;h3 id=&quot;2-ctypes-套件&quot;&gt;2. ctypes 套件&lt;/h3&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 不需另外安裝&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;ctypes&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ctypes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;windll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MessageBoxA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Your text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Your title&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 或著你可以定義一個 function&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Mbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ctypes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;windll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MessageBoxA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Mbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Your title'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Your text'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 如果是要輸出中文，記得重新 encode&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ctypes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;windll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user32&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MessageBoxA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;內容&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;big5&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;標題&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;big5&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;這個方法也可以打包後執行。&lt;/p&gt;

&lt;p&gt;另外，
會看到有些地方使用&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctypes.windll.user32.MessageBoxW()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;而不是&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ctypes.windll.user32.MessageBoxA()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;但執行後會發現，&lt;code class=&quot;highlighter-rouge&quot;&gt;ctypes.windll.user32.MessageBoxW()&lt;/code&gt;這個方法會出現亂碼。&lt;/p&gt;

&lt;p&gt;這兩個的差別在&lt;code class=&quot;highlighter-rouge&quot;&gt;MessageBoxW&lt;/code&gt;要使用 unicode 編碼，而&lt;code class=&quot;highlighter-rouge&quot;&gt;MessageBoxA&lt;/code&gt;是 ascii 編碼。&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/20783046/python-program-displaying-messages-in-different-language-than-english&quot;&gt;有人回答&lt;/a&gt;這個問題	。&lt;/p&gt;

&lt;p&gt;這邊 mac 和 windows 各介紹了兩種方法，其實還有很多方法啦，只要能符合需求的都是好方法！&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python][爬蟲]使用 pytesseract 與 Image 套件解析驗證碼</title>
   <link href="http://localhost:4000blog//python/%E7%88%AC%E8%9F%B2/2018/07/03/Python-%E8%AE%80%E5%8F%96%E9%A9%97%E8%AD%89%E7%A2%BC/"/>
   <updated>2018-07-03T16:00:00+08:00</updated>
   <id>http://localhost:4000/python/%E7%88%AC%E8%9F%B2/2018/07/03/[Python]讀取驗證碼</id>
   <content type="html">&lt;p&gt;當爬網站碰到需要讀取驗證碼的網站時可以使用
&lt;strong&gt;pytesseract&lt;/strong&gt; 與 &lt;strong&gt;Image&lt;/strong&gt; 套件來讀取圖片上的數字與英文。&lt;/p&gt;

&lt;p&gt;基本流程：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;找到圖片的來源網址&lt;/li&gt;
  &lt;li&gt;下載圖片&lt;/li&gt;
  &lt;li&gt;調整圖片、解析圖片，獲得圖片上的數字與英文&lt;/li&gt;
  &lt;li&gt;帶入參數&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;以
&lt;a href=&quot;https://serv.gcis.nat.gov.tw/pub/cmpy/cmpyInfoListAction.do&quot;&gt;經濟部公司及分公司基本資料查詢系統&lt;/a&gt;
為例，從檢查元素中可以發現，在載入這個頁面時會有一個產生圖片的
&lt;a href=&quot;https://serv.gcis.nat.gov.tw/pub/kaptcha.jpg&quot;&gt;網址&lt;/a&gt;
同時被載入。而這個頁面正是送出 requests 時會產生的驗證碼圖片。&lt;/p&gt;

&lt;p&gt;所以只要能下載這個圖片並解析它，就能將解析出來的結果帶進 post 的參數裡，就能完成一個 post requests 。&lt;/p&gt;

&lt;h3 id=&quot;解析驗證碼完整程式碼&quot;&gt;解析驗證碼完整程式碼&lt;/h3&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 1. 找到圖片的來源網址&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;img_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://serv.gcis.nat.gov.tw/pub/kaptcha.jpg&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stream&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;verify&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 2. 下載圖片&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'pic.jpg'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'wb'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 3. 調整圖片、解析圖片，獲得圖片上的數字與英文&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'pic.jpg'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# adjust pitcure size, it would read more correctly&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;150&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ANTIALIAS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;pic.jpg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;pic.jpg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;captcha&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pytesseract&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_to_string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;-&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;$&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;程式碼步驟解析&quot;&gt;程式碼步驟解析&lt;/h3&gt;

&lt;h4 id=&quot;session&quot;&gt;session()&lt;/h4&gt;
&lt;p&gt;這裡使是 session 是因為要記錄載入頁面的 cookies，以確保讓網站覺得和等下要送出 requests 時事同時載入的。&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;找到圖片的來源網址與存檔&quot;&gt;找到圖片的來源網址與存檔&lt;/h4&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;img_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://serv.gcis.nat.gov.tw/pub/kaptcha.jpg&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stream&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;verify&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'pic.jpg'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'wb'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;這前面兩行很簡單，就是送出驗證碼來源網址的 requests，接著下載該圖檔，會發現這時候產生了一個 pic.jpg 的檔案。&lt;/p&gt;

&lt;h4 id=&quot;調整圖片解析圖片獲得圖片上的數字與英文&quot;&gt;調整圖片、解析圖片，獲得圖片上的數字與英文&lt;/h4&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'pic.jpg'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# adjust pitcure size, it would read more correctly&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;150&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ANTIALIAS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;pic.jpg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;pic.jpg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;captcha&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pytesseract&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_to_string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;-&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;$&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;captcha&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;有時候將下載下來的圖片直接丟進 pytesseract.image_to_string() 解析結果正確率會很低，但如果調整一下圖片的 size 反而會有較正確的結果。所以前面我先使用 resize 調整圖片的大小，並重新存檔。最後再使用 pytesseract.image_to_string() 解析圖片。&lt;/p&gt;

&lt;p&gt;可以根據 pytesseract.image_to_string() 解析出來的結果做些調整以提高正確率。因為發現這個圖片解析出來後常會有些多餘的符號，所以使用 replace 修正。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h4 id=&quot;圖片的-mode-必須要為-rgb&quot;&gt;圖片的 mode 必須要為 RGB&lt;/h4&gt;

&lt;p&gt;另外，可以使用&lt;code class=&quot;highlighter-rouge&quot;&gt;print image&lt;/code&gt;看 open() 後的圖片的資訊。
像是被調整過後的圖片變成&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;PIL.JpegImagePlugin.JpegImageFile image mode=RGB size=150x50 at 0x109355D90&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;圖片的尺寸(size)變成 150x50，mode 為 &lt;strong&gt;RGB&lt;/strong&gt;。這點很重要，因為如果 mode 不是 RGB 就會無法 使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;pytesseract.image_to_string()&lt;/code&gt;解析圖片。&lt;/p&gt;

&lt;p&gt;會碰到錯誤訊息&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/usr/local/lib/python2.7/site-packages/PIL/Image.py:971: UserWarning: Couldn't allocate palette entry for transparency
  &quot;for transparency&quot;)

---省略--

TypeError: int() argument must be a string or a number, not 'tuple'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;譬如我曾經抓到一個圖片，print 出來的圖片資訊是&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;PIL.GifImagePlugin.GifImageFile image mode=P size=60x20 at 0x10F1DCD10&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;這時候必須要把 mode 由 P 轉為 RGB，只要在 open() 後加上一行，&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'pic.gif'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;convert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'RGB'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# print image&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;這是後&lt;code class=&quot;highlighter-rouge&quot;&gt;print image&lt;/code&gt;會發現 mode 已被改為 RGB，且可以正確執行了。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;基本上，根據上面的概念就可以破解驗證碼，只要再根據個別網站的狀況做調整就好。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;經濟部公司及分公司基本資料查詢系統&lt;/strong&gt;爬蟲網站
&lt;a href=&quot;https://github.com/shihs/Taiwan-Company-info-crawler&quot;&gt;完整程式碼&lt;/a&gt;
。或是，另外比較複雜的驗證碼可以參考我的
&lt;a href=&quot;https://github.com/shihs/read-captcha&quot;&gt;github&lt;/a&gt;
。&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python][SQL]Python 連接 SQLite</title>
   <link href="http://localhost:4000blog//python/sql/2018/06/30/Python-SQL-Pytho%E6%8E%A5-SQLite/"/>
   <updated>2018-06-30T13:01:00+08:00</updated>
   <id>http://localhost:4000/python/sql/2018/06/30/[Python][SQL]Pytho接 SQLite</id>
   <content type="html">&lt;p&gt;這篇是 Python 連接 SQL 的一些基本語法，&lt;br /&gt;
內容來自 Udacity 上 &lt;a href=&quot;https://www.udacity.com/course/intro-to-relational-databases--ud197&quot;&gt;Intro to Relational Databases&lt;/a&gt; 的免費課程與我自己整理的資訊。&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sqlite3&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlite3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Cookies&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 連接 SQLite 資料庫&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cursor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cursor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 獲得連接的游標&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 要下的 SQL 指令&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cursor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;select host_key from cookies limit 10;&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;results&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fetchall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resutls&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 結果為 turple&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 每次都要記得 close 連線&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>[SQL][psql]基本觀念(2)</title>
   <link href="http://localhost:4000blog//sql/psql/2018/06/29/SQL-psql-%E5%9F%BA%E6%9C%AC%E4%BB%A4%E8%88%87(2)/"/>
   <updated>2018-06-29T13:52:00+08:00</updated>
   <id>http://localhost:4000/sql/psql/2018/06/29/[SQL][psql]基本令與(2)</id>
   <content type="html">&lt;p&gt;這篇是整理一些 psql 的基本觀念，&lt;br /&gt;
內容來自 Udacity 上 &lt;a href=&quot;https://www.udacity.com/course/intro-to-relational-databases--ud197&quot;&gt;Intro to Relational Databases&lt;/a&gt; 的免費課程與我自己整理的資訊。&lt;/p&gt;

&lt;h3 id=&quot;normalized-design&quot;&gt;Normalized Design&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;What is Normalized Design?&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Every row has the same number of columns. &lt;br /&gt;
每一列都必須有同樣的行數。&lt;/li&gt;
  &lt;li&gt;There is a &lt;strong&gt;unique key&lt;/strong&gt;, and everything in a row says something about the key. &lt;br /&gt;
每個 table 會有一個 unique key，且 table 中的每一行的資訊都必須要和 unique key 有關。&lt;/li&gt;
  &lt;li&gt;Facts that don’t relate to the key belong in different tables. &lt;br /&gt;
與 unique key 無關的訊息要放在另一個 table。&lt;/li&gt;
  &lt;li&gt;Table shouldn’t imply relationships that don’t exist. &lt;br /&gt;
行之間不存在關係的資料不能產生會讓人誤會訊息。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;More about Normalization:&lt;br /&gt;
William Kent’s paper &lt;a href=&quot;http://www.bkent.net/Doc/simple5.htm&quot;&gt;A Simple Guide to Five Normal Forms in Relational Database Theory&lt;/a&gt;&lt;br /&gt;
Wikipedia’s article on &lt;a href=&quot;https://en.wikipedia.org/wiki/Database_normalization&quot;&gt;database normalization&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;unique-key-vs-foreign-key&quot;&gt;Unique Key v.s. Foreign Key&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;What is Unique Key?&lt;/strong&gt;&lt;br /&gt;
唯一值不能重複。譬如像是，學號、身分證字號等等，只存在唯一的值，但像名字這種可能會重複的值就不能當 unique key。&lt;br /&gt;
另外還有一個和 unique key 很像的東西，叫 &lt;strong&gt;primary key&lt;/strong&gt;。它同樣必需要是唯一值不能重複，但他們的差別在於，&lt;strong&gt;unique key 可以有 null，但 primary key 不能有 null&lt;/strong&gt;。&lt;br /&gt;
譬如，在一間公司裡，公司有台灣人和外國人。公司的每位員工都有職編，但只有台灣人會有身分證字號，這時候職編可以作為 primary key 或是 unique key，但身分證字號只能是 unique key。&lt;br /&gt;
詳細說明可以看&lt;a href=&quot;https://www.youtube.com/watch?v=7_9Jb9Fi9nI&quot;&gt;這裡&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;What is Foreign Key?&lt;/strong&gt;&lt;br /&gt;
對照到另一個資料表的 primary key。&lt;br /&gt;
譬如，有一份資料表是學生資料，欄位包含「學號」和「姓名」，另一份是學生的數學成績，包含「學號」、「分數」。
&lt;img src=&quot;http://localhost:4000/blog/img/posts/primary%20key%20vs%20unique%20key.png&quot; alt=&quot;primary key vs unique key.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;右邊的表格對照到左邊姓名那份表格，學號在左邊的表格是 primary key，所以右邊表格中「學號」那個欄位就會是 foreign key。&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Google Map API - Geocoding 地址經緯度</title>
   <link href="http://localhost:4000blog//others/python/2018/06/28/Google-Map-API-Geocoding-%E5%9C%B0%E5%9D%80%E7%B6%93%E7%B7%AF%E5%BA%A6/"/>
   <updated>2018-06-28T14:10:00+08:00</updated>
   <id>http://localhost:4000/others/python/2018/06/28/Google Map API - Geocoding 地址經緯度</id>
   <content type="html">&lt;p&gt;Google Map 提供了很多 &lt;a href=&quot;https://developers.google.com/maps/documentation/&quot;&gt;API&lt;/a&gt;，方便開發者根據自己的需求使用。不過大部分的 API 都需要使用 Google 帳號申請一個 API KEY 。 API KEY 申請時要填上信用卡資訊，有一年的免費使用時間，過了一年以後會自動扣款，但隨時都可以停用，而且時間快到時 Google 也會寄信通知你。&lt;/p&gt;

&lt;p&gt;這次要介紹&lt;code class=&quot;highlighter-rouge&quot;&gt;Geocoding&lt;/code&gt;這個 API 。 根據&lt;a href=&quot;https://developers.google.com/maps/documentation/geocoding/intro&quot;&gt;說明文件&lt;/a&gt;上的介紹&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Geocoding is the process of converting addresses (like &quot;1600 Amphitheatre Parkway, Mountain View, CA&quot;) into geographic coordinates (like latitude 37.423021 and longitude -122.083739), which you can use to place markers on a map, or position the map.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;簡單來說，你可以&lt;strong&gt;根據地址找到該地址在地理上的座標（經緯度）&lt;/strong&gt;，方便應用在地圖上標記位置。&lt;/p&gt;

&lt;p&gt;根據&lt;code class=&quot;highlighter-rouge&quot;&gt;Geocoding&lt;/code&gt;說明文件，這個 API 的 format 有 json 和 xml 兩種格式。
來看文件上給的一個輸出 json 格式的範例，&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;https://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&amp;amp;key=YOUR_API_KEY
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;看起來這個 API 是需要 API KEY 。&lt;/p&gt;

&lt;p&gt;但其實，這個 API 是可以不需要 KEY 的（我不知道為什麼 XD）。
而且使用 API key 反而還會被限制一天可以搜尋的數量……&lt;/p&gt;

&lt;p&gt;所以其實上面的例子只要這樣就好，&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;https://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;當然也可以搜尋中文地址，&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;https://maps.googleapis.com/maps/api/geocode/json?address=台北市中正區重慶南路一段122號
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;就可以獲取該地址完整的地址資訊（包括郵遞區號）與經緯度。
其實只要搜尋「重慶南路一段122號」就可以找到該地址完整的資訊了。&lt;/p&gt;

&lt;h3 id=&quot;使用-python-快速爬取-api-內容&quot;&gt;使用 python 快速爬取 API 內容&lt;/h3&gt;
&lt;p&gt;這邊我寫了一個簡單的 python 程式可以快速地使用這個 API 獲得地址的經緯度。&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;requests&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_latitude_longtitude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# decode url&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;quote&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://maps.googleapis.com/maps/api/geocode/json?address=&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;js&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loads&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;js&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;status&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;OVER_QUERY_LIMIT&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sleep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;js&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;results&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;geometry&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;location&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;lat&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;lng&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;lng&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lng&lt;/span&gt;



&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;重慶南路一段122號&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lng&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get_latitude_longtitude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>[SQL][psql]基本指令(1)</title>
   <link href="http://localhost:4000blog//sql/psql/2018/06/15/psql-%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4/"/>
   <updated>2018-06-15T14:32:00+08:00</updated>
   <id>http://localhost:4000/sql/psql/2018/06/15/[psql]基本指令</id>
   <content type="html">&lt;p&gt;這篇是整理一些 psql 的基本指令，&lt;br /&gt;
內容來自 Udacity 上 &lt;a href=&quot;https://www.udacity.com/course/intro-to-relational-databases--ud197&quot;&gt;Intro to Relational Databases&lt;/a&gt; 的免費課程。&lt;/p&gt;

&lt;h3 id=&quot;basic-commands&quot;&gt;BASIC COMMANDS&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Connect to psql&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ psql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Quit psql&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ \q
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;List all databases&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ \list
# or
$ \l

#  exit from query result viewer
$ q
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;List all datatables in current database&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# connect to the database
$ \connect dbname
# or
$ \c dbname

# list all tables 
$ \dt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
&lt;br /&gt;&lt;/p&gt;
&lt;h3 id=&quot;sql-commands&quot;&gt;SQL COMMANDS&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Create and Drop DATABASE&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CREATE DATABASE dbname;
DROP DATABASE dbname;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Create and Drop TABLE&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Example: Create a table with a text column and a serial column
CREATE TABLE dtname (
	id serial,
	name text
);

# drop table dtname
DROP TABLE dtname;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Insert values&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;INSERT INTO dtname VALUES('This is a test');
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Show all data in a table&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;TABLE dtname
# or
SELECT * FROM dtname
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Set primary key&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# single column primary key
CREATE TABLE dtname (
	id serial primary key,
	name text,
	birthday date
);

# multiple columns primary key
CREATE TABLE postal_places (
	postal_code text,
	country text,
	name text,
	primary key (postal_code, country)
);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Declaring relationships&lt;/strong&gt;
&lt;img src=&quot;http://localhost:4000/blog/img/posts/Declaring%20relationships.jpg&quot; alt=&quot;Declaring relationships.jpg&quot; /&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CREATE TABLE sales (
	sku text references products (sku),
	sale_date date,
	count integer
);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python]Python 中的 *args 和 *kwargs</title>
   <link href="http://localhost:4000blog//python/2018/06/13/Python-args-%E5%92%8C-kwargs/"/>
   <updated>2018-06-13T12:48:00+08:00</updated>
   <id>http://localhost:4000/python/2018/06/13/[Python]*args 和 *kwargs</id>
   <content type="html">&lt;p&gt;簡單來說，&lt;code class=&quot;highlighter-rouge&quot;&gt;*args&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;**kwargs&lt;/code&gt;是 function 的參數，在不確定會有多少參數時使用。&lt;br /&gt;
args 是 arguments 縮寫，kwargs 是 keyword argments 的縮寫。也就是， args 是沒有 keyword 的變數， kwargs 有 keyword。&lt;br /&gt;
如果 &lt;code class=&quot;highlighter-rouge&quot;&gt;*args&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;**kwargs&lt;/code&gt; 同時使用，&lt;strong&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;*args&lt;/code&gt;必需在&lt;code class=&quot;highlighter-rouge&quot;&gt;**kwargs&lt;/code&gt;之前&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;先簡單看以下的例子&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kwargs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;agrs=&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kwargs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kwargs=&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;
		
&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;first&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;second&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;third&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;c&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;結果&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;agrs=1
agrs=2
agrs=3
agrs=4
kwargs=second
kwargs=third
kwargs=first
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&quot;args-和-kwargs-不是重點-才是&quot;&gt;args 和 kwargs 不是重點，* 才是&lt;/h3&gt;

&lt;p&gt;args 和 kwargs 這兩個參數名稱並不是重點，重點是前面的星號 &lt;code class=&quot;highlighter-rouge&quot;&gt;*&lt;/code&gt;。&lt;br /&gt;
所以，if you like 其實參數也可以寫成 &lt;code class=&quot;highlighter-rouge&quot;&gt;*var&lt;/code&gt; 和 &lt;code class=&quot;highlighter-rouge&quot;&gt;**vars&lt;/code&gt;，&lt;code class=&quot;highlighter-rouge&quot;&gt;*args&lt;/code&gt; 和 &lt;code class=&quot;highlighter-rouge&quot;&gt;**kwargs&lt;/code&gt; 只是一個大家使用的習慣。&lt;/p&gt;

&lt;h3 id=&quot;args-的用法&quot;&gt;*args 的用法&lt;/h3&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;first_arg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;this is first arguments&quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;arg_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first_arg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;first_arg=&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;first_arg&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;other *args...&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;agrs=&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;arg_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first_arg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;結果&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;first_arg=this is first arguments
other *args...
agrs=1
agrs=2
agrs=3
agrs=4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;kwargs-的用法&quot;&gt;*kwargs 的用法&lt;/h3&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;greet_me&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kwargs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kwargs&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kwargs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iteritems&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s == &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
 
&lt;span class=&quot;n&quot;&gt;greet_me&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;yasoob&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;name == yasoob
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;從以上兩個範例可以看出 args 和 kwargs 用法的差異。&lt;/p&gt;

&lt;h3 id=&quot;使用-list-和-dictionary-當參數&quot;&gt;使用 list 和 dictionary 當參數&lt;/h3&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_arg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arg2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arg3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arg1&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arg2&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arg3&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;#===args===========&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;test_arg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# result&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;arg2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;arg3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#===kwargs===========&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;kwargs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;arg3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;arg2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;arg1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;test_arg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kwargs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# result&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;arg2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;arg3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;根據以上範例，可以發現&lt;code class=&quot;highlighter-rouge&quot;&gt;*arg&lt;/code&gt; print 的順序就是 list 的順序，但 &lt;code class=&quot;highlighter-rouge&quot;&gt;**kwargs&lt;/code&gt; 會根據 dictionary 的 key 來賦予 value。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://pythontips.com/2013/08/04/args-and-kwargs-in-python-explained/&quot;&gt;參考&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Web][CSS]如何刪除 nav tag 底色兩邊的空白？</title>
   <link href="http://localhost:4000blog//web/css/2018/06/11/Web-CSS-%E5%A6%82%E4%BD%95%E5%88%AA%E9%99%A4nav-ta%E5%BA%95%E8%89%B2%E5%85%A9%E9%82%8A%E7%9A%84%E7%A9%BA%E7%99%BD/"/>
   <updated>2018-06-11T14:51:00+08:00</updated>
   <id>http://localhost:4000/web/css/2018/06/11/[Web][CSS]如何刪除nav ta底色兩邊的空白？</id>
   <content type="html">&lt;h3 id=&quot;nav的作用&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;nav&amp;gt;&lt;/code&gt;的作用&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;nav&amp;gt;&lt;/code&gt; 為 HTML 文件的區域元素 (element)，&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;nav&amp;gt;&lt;/code&gt;用來規劃網頁的導覽區域，通常裡頭會放網站其他網頁的連結。&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;nav&amp;gt;&lt;/code&gt; 除了全域屬性外，沒有定義其他屬性 (attribute) 。
&lt;a href=&quot;https://pydoing.blogspot.com/2012/01/html-5-nav.html&quot;&gt;參考&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;像我的&lt;a href=&quot;https://shihs.github.io/&quot;&gt;網頁&lt;/a&gt;上面黑色那條有 “About” 和 “Contact Me” 連結的區域就是在 &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;nav&amp;gt;&lt;/code&gt;裡。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- html --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;nav&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;wrapper-nav&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;nav&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;ul&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;li&amp;gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;#about&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;About&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;&lt;/span&gt;    
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;li&amp;gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;#contact&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Contact Me&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/ul&amp;gt;&lt;/span&gt;           
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/nav&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-css highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;/* css */&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;nav&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;black&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&quot;如何刪除-nav-背景的空白-how-to-remove-the-space-on-both-sides-of-navbar&quot;&gt;如何刪除 &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;nav&amp;gt;&lt;/code&gt; 背景的空白 How to remove the space on both sides of navbar&lt;/h3&gt;
&lt;p&gt;若使用上面的程式碼會發現 &lt;code class=&quot;highlighter-rouge&quot;&gt;nav&lt;/code&gt; 底色變成黑色，但兩邊會有無法移除的空白，這時候有兩種解決方法。皆是在&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;body&amp;gt;&lt;/code&gt;這個 tag 上面做些調整&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;div class=&quot;language-css highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;/* css */&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;margin-left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;auto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;margin-right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;auto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;div class=&quot;language-css highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;/* css */&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;auto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

</content>
 </entry>
 
 <entry>
   <title>[Web][CSS]在不同螢幕解析度下調整css</title>
   <link href="http://localhost:4000blog//web/css/2018/05/24/Web-CSS-%E5%9C%A8%E4%B8%8D%E5%90%8C%E8%9E%A2%E5%B9%95%E8%A7%A3%E6%9E%90%E5%BA%A6%E4%B8%8B%E8%AA%BF%E6%95%B4css/"/>
   <updated>2018-05-24T14:47:00+08:00</updated>
   <id>http://localhost:4000/web/css/2018/05/24/[Web][CSS]在不同螢幕解析度下調整css</id>
   <content type="html">&lt;p&gt;除了電腦外手機、平板都可以瀏覽網頁，這篇要介紹如何依據不同裝置的螢幕寬度來調整 CSS。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.ucamc.com/e-learning/css/102-rwd-css-media-type.html&quot; target=&quot;_blank&quot;&gt;參考網站&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;解析度可以這樣區分&quot;&gt;解析度可以這樣區分&lt;/h2&gt;
&lt;ol&gt;
  &lt;li&gt;手機：解析度為0px~320px&lt;br /&gt;&lt;/li&gt;
  &lt;li&gt;平板電腦：解析度為320px~768px&lt;br /&gt;&lt;/li&gt;
  &lt;li&gt;桌上型電腦：大於768px&lt;br /&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;在-css-上調整&quot;&gt;在 CSS 上調整&lt;/h2&gt;

&lt;p&gt;使用&lt;em&gt;@media&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;設定 Max Width&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-css highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;/* 768px以下(包含)都適用，手機和平板會符合這個設定 */&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@media&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max-width&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;768px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;.class&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nl&quot;&gt;background&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;#ccc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;設定 Min Width&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-css highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;/* 329px以上(包含)都適用，平板和電腦會符合這個設定 */&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@media&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;min-width&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;320px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;.class&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nl&quot;&gt;background&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;#666&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;設定 Max Width and Min Width&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-css highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;/* 介於768px與979px間適用 */&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@media&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;min-width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;768px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max-width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;979px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;.class&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nl&quot;&gt;background&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;#666&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;如此就可以依據螢幕的寬度來顯示適合的方式了。&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python]使用 pyinstaller 套件打包 .py 檔</title>
   <link href="http://localhost:4000blog//python/2018/05/24/Python-%E4%BD%BF%E7%94%A8pyinstaller%E5%A5%97%E4%BB%B6%E6%89%93%E5%8C%85.py%E6%AA%94/"/>
   <updated>2018-05-24T11:05:00+08:00</updated>
   <id>http://localhost:4000/python/2018/05/24/[Python]使用pyinstaller套件打包.py檔</id>
   <content type="html">&lt;p&gt;當我們今天寫好一個 .py 檔，要給使用者執行時當然可以幫使用者在他們的電腦下載 Python 等執行程式時需要的套件，但是，&lt;strong&gt;很麻煩！！！&lt;/strong&gt; &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;不可能每次有一個新的使用者就要重新安裝一次 Python，還要安裝套件(更不要說有時候安裝套件會碰到一些問題)，且要執行 .py 檔對於不會使用 terminal 或是 cmd 的人來說可能會選擇放棄，這就減少了讓妳/你的程式給更多人使用的機會。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;而 &lt;strong&gt;pyinstaller&lt;/strong&gt; 是一個可以把 .py 打包成一個 .exe 檔的工具，讓使用者只要點兩下就能執行妳/你寫好的 Python 檔案。&lt;br /&gt;
&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;前提&quot;&gt;前提&lt;/h2&gt;
&lt;p&gt;pyinstaller可以在 Windows、MacOS、Linux 上使用，但是不是跨平台，所以如果今天使用者是 windows 那麼就必須要在 windows 作業系統底下產生 .exe 檔，若使用者是 macOS 那就必須要在 mac 底下打包產生執行檔。&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;安裝&quot;&gt;安裝&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Windows&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip install pyinstaller
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Mac&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo pip install pyinstaller
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;但我這邊在安裝時出現了一大串的錯誤，其中內容包括&lt;br /&gt; 
&lt;em&gt;[Errno 1] Operation not permitted&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;後來我參考&lt;a href=&quot;https://blog.csdn.net/helloxiaozhe/article/details/78603183&quot; target=&quot;_blank&quot;&gt;這裡&lt;/a&gt;把指令改成&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo pip install pyinstaller --upgrade --ignore-installed
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;就成功安裝了。&lt;br /&gt;
安裝好後，可以在 cmd 或是 terminal 上輸入 pyinstaller 確認。&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;打包-py-檔&quot;&gt;打包 .py 檔&lt;/h2&gt;
&lt;p&gt;假如現在要打包一個 test.py 檔&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Windows&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pyinstaller -F test.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;完成後會產生三個檔案，&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;build 資料夾&lt;/li&gt;
  &lt;li&gt;dist 資料夾&lt;/li&gt;
  &lt;li&gt;test.spec 檔&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;而我們需要的 test.exe 會單獨在 dist 資料夾裡，如果要給其他 Windows 使用者執行 test.py 這支檔案，只需要給他們 .exe 就行了。&lt;br /&gt;
如果 test.py 這支程式是會產生一個檔案，例如 .csv 檔案，則這檔案會直接儲存在和 test.exe 同一個路徑底下。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Mac&lt;/strong&gt;&lt;br /&gt;
Mac的操作基本上和 Windows 指令一樣，&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pyinstaller -F test.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;打包完後產生出來的檔案也會一樣。&lt;br /&gt;
但如果執行 .exe 檔會產生檔案，這時候會發現檔案沒有出現在和 .exe 同一個路徑底下。而是會在 /Users/&lt;em&gt;yourusername&lt;/em&gt; 底下。&lt;br /&gt;
&lt;br /&gt;
可以試試看在 .py 檔裡增加一行&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;print os.getcwd()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;會發現使用 .exe 執行的結果就會是 /Users/&lt;em&gt;yourusername&lt;/em&gt;，所以檔案才會直接產生在這路徑底下。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;但我想要讓檔案直接產生在桌面，因此我的方法是加上這行&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;os.chdir('/Users/'+os.getlogin()+'/Desktop')
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;讓路徑直接換到桌面，這樣儲存檔案就會產生在桌面上了。&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;常用參數&quot;&gt;常用參數&lt;/h2&gt;
&lt;ol&gt;
  &lt;li&gt;pyinstaller -h 查看參數&lt;/li&gt;
  &lt;li&gt;-F 打包成一個exe文件&lt;/li&gt;
  &lt;li&gt;–icon=圖標路徑&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;
關於 pyinstaller 套件，這個&lt;a href=&quot;http://legendtkl.com/2015/11/06/pyinstaller/&quot; target=&quot;_blank&quot;&gt;部落格&lt;/a&gt;我覺得說明蠻詳細的。&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python]下載與安裝 Python2.7 及 pip 套件</title>
   <link href="http://localhost:4000blog//python/2018/05/23/Python-%E4%B8%8B%E8%BC%89%E8%88%87%E5%AE%89%E8%A3%9DPython%E5%8F%8Apip%E5%A5%97%E4%BB%B6/"/>
   <updated>2018-05-23T15:25:00+08:00</updated>
   <id>http://localhost:4000/python/2018/05/23/[Python]下載與安裝Python及pip套件</id>
   <content type="html">&lt;p&gt;安裝前可以先認識 &lt;a href=&quot;https://zh.wikipedia.org/wiki/Python&quot; target=&quot;_blank&quot;&gt;Python&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;這篇文章將會介紹如何在 windows 系統中下載與安裝 python2.7 以及安裝 pip 套件。&lt;/p&gt;

&lt;p&gt;主要步驟其實就是四個：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;下載Python&lt;/li&gt;
  &lt;li&gt;設定環境變數&lt;/li&gt;
  &lt;li&gt;下載get-pip.py&lt;/li&gt;
  &lt;li&gt;設定環境變數&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;1下載-python27&quot;&gt;1.下載 Python2.7&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://www.python.org/downloads/release/python-2714/&quot;&gt;Python2.7.14載點&lt;/a&gt;
根據自己電腦是32位元還是64位元選擇要下載的檔案
&lt;img src=&quot;http://localhost:4000/blog/img/posts/python%20downloads.jpg&quot; alt=&quot;python downloads.jpg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;下載下來後的檔案（我的電腦是32位元）
&lt;img src=&quot;http://localhost:4000/blog/img/posts/python%20installation.jpg&quot; alt=&quot;python installation.jpg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;點兩下安裝，就是一直按下一步就對了
&lt;img src=&quot;http://localhost:4000/blog/img/posts/python%20install%20step.jpg&quot; alt=&quot;python install step.jpg&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;2設定環境變數&quot;&gt;2.設定環境變數&lt;/h3&gt;
&lt;p&gt;設定環境變數的目的是，在執行 Python 時讓系統可以根據環境變數底下的路徑依序去找 Python 程式，而不會不知道要如何執行 Python。&lt;/p&gt;

&lt;p&gt;設定環境變數步驟，&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;電腦(右鍵)-&amp;gt;內容
&lt;img src=&quot;http://localhost:4000/blog/img/posts/environment.jpg&quot; alt=&quot;environment.jpg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;1.進階系統設定 -&amp;gt; 2.環境變數 -&amp;gt; 3.點選PATH-&amp;gt;編輯
&lt;img src=&quot;http://localhost:4000/blog/img/posts/environment%20variable.jpg&quot; alt=&quot;environment variable.jpg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;在變數最後加上安裝路徑「;C:\Python27」（這是預設的安裝路徑，如果安裝過程中有更改位置，這邊要改成安裝的路徑）
&lt;img src=&quot;http://localhost:4000/blog/img/posts/python%20path.jpg&quot; alt=&quot;python path.jpg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;以上步驟完成之後在 cmd 輸入 python，就開始執行 Python 了！ 
&lt;img src=&quot;http://localhost:4000/blog/img/posts/python%20test.jpg&quot; alt=&quot;python test.jpg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
基本上到這裡已經安裝好 Python 了，那為什麼要安裝 pip 呢？&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Python 有很多別人寫好且非常好用的套件，當我們想要使用這些套件前會需要先下載安裝套件，而 pip 是用來下載其他套件非常好用的工具。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;當我們下載完 pip 後，
未來下載套件只需要在 cmd 輸入指令就能搞定。&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip install packagename
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;也許現在還是會有點困惑，但未來真正開始寫 Python 就會明白為什麼大家下載完 Python 都會接著安裝 pip 了。&lt;/p&gt;

&lt;h3 id=&quot;3下載-get-pippy&quot;&gt;3.下載 get-pip.py&lt;/h3&gt;
&lt;p&gt;先下載 &lt;a href=&quot;http://localhost:4000/blog/downloads/get-pip.py&quot;&gt;get-pip.py&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;接著開啟 cmd，使用 cd 將目前位置移到 get-pip.py 的路徑底下，並輸入&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python get-pip.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/run%20pip_get.jpg&quot; alt=&quot;run pip_get.jpg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;這時候只差最後一步了&lt;/p&gt;

&lt;h3 id=&quot;4設定環境變數&quot;&gt;4.設定環境變數&lt;/h3&gt;
&lt;p&gt;這個步驟與剛剛第2個步驟一樣，不過現在要加上的路徑是「;C:\Python27\Script」
&lt;img src=&quot;http://localhost:4000/blog/img/posts/python%20script%20path.jpg&quot; alt=&quot;python script path.jpg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
&lt;br /&gt;
接著使用 pip install 安裝看看套件，例如可以安裝寫爬蟲程式必備的 requests 套件&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip install requests
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;如果沒有問題，一切就大功告成！&lt;br /&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[R]如何使用R讀取Excel檔案</title>
   <link href="http://localhost:4000blog//r/2018/02/26/R-%E5%A6%82%E4%BD%95%E8%AE%80%E5%8F%96Excel%E6%AA%94%E6%A1%88/"/>
   <updated>2018-02-26T18:54:00+08:00</updated>
   <id>http://localhost:4000/r/2018/02/26/[R]如何讀取Excel檔案</id>
   <content type="html">&lt;p&gt;很多資料會使用excel檔案儲存，&lt;br /&gt;
這邊介紹如何使用R讀取主要三種常用的excel附檔名。&lt;br /&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;csv&lt;/li&gt;
  &lt;li&gt;xlsx&lt;/li&gt;
  &lt;li&gt;xls&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;1csv&quot;&gt;&lt;strong&gt;1.csv&lt;/strong&gt;&lt;br /&gt;&lt;/h2&gt;
&lt;p&gt;csv是最簡單的，不需要install任何package，&lt;strong&gt;read.csv&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read.csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;file.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stringsAsFactors&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;假如很不幸，上面的程式碼讀取後你碰到長得像這樣的錯誤訊息&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Error in type.convert(data[[i]], as.is = as.is[i], dec = dec, numerals = numerals,  : invalid multibyte string at '&amp;lt;e8&amp;gt;&amp;lt;8a&amp;gt;&amp;lt;b1&amp;gt;?&amp;lt;ae&amp;gt;'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;那就是碰上了&lt;a href=&quot;https://shihs.github.io/blog/r/2018/01/17/R-read.csv出現編碼錯誤訊息/&quot; target=&quot;_blank&quot;&gt;編碼錯誤&lt;/a&gt;，&lt;br /&gt;
這時候別緊張，只要加上&lt;strong&gt;fileEncoding&lt;/strong&gt;這個參數就好，&lt;br /&gt;&lt;/p&gt;
&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read.csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;paste0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;file.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stringsAsFactors&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileEncoding&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;問題應該就可以被解決了。&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;2xlsx&quot;&gt;&lt;strong&gt;2.xlsx&lt;/strong&gt;&lt;br /&gt;&lt;/h2&gt;
&lt;p&gt;讀取xlsx檔案時依據情況，有兩個套件我會使用，&lt;br /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/openxlsx/openxlsx.pdf&quot; target=&quot;_blank&quot;&gt;openxlsx&lt;/a&gt;&lt;br /&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://cran.r-project.org/web/packages/XLConnect/XLConnect.pdf&quot; target=&quot;_blank&quot;&gt;XLConnect&lt;/a&gt;&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;這兩個套件都可以儲存多個sheet，&lt;br /&gt;
對儲存格做顏色、合併、篩選等等一般可以做的事都可以用程式碼去做。&lt;/p&gt;

&lt;h3 id=&quot;1openxlsx&quot;&gt;&lt;strong&gt;(1)openxlsx&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;&lt;em&gt;讀檔&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;openxlsx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 可以使用sheet參數選擇要的sheet，預設是第一個sheet&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read.xlsx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;file.xlsx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sheet&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sheetName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;寫檔&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;openxlsx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;### 整個xlsx只有一張sheet寫檔可以簡單的使用write.xlsx就好&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write.xlsx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;file.xlsx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;


&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;### 有多個sheet要寫入檔案，或是要調整sheet的style&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;createWorkbook&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 增加sheet&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addWorksheet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;sheetName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 設定欄位寬度&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setColWidths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sheet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cols&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;widths&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 增加style&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;headerStyle&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;createStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fgFill&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;yellow&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;border&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;TopBottomLeftRight&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;halign&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;center&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;textDecoration&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;bold&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fontSize&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sheet&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sheet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;headerStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cols&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gridExpand&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stack&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 加上filter&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;addFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cols&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ncol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 寫檔&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;writeData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sheet&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sheet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 存檔&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;saveWorkbook&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;file.xlsx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;overwrite&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;2xlconnect&quot;&gt;&lt;strong&gt;(2)XLConnect&lt;/strong&gt;&lt;br /&gt;&lt;/h3&gt;
&lt;p&gt;至於XLConnect我是在想要使用資料驗證(data validation)裡的「清單」功能時想要克服的。&lt;/p&gt;

&lt;p&gt;一開始想要直接使用openxlsx的dataValidation function，&lt;br /&gt;
但一直失敗，且找到&lt;a href=&quot;https://rdrr.io/cran/openxlsx/man/dataValidation.html&quot; target=&quot;_blank&quot;&gt;這裡&lt;/a&gt;說明 list 這個功能無法發揮，&lt;br /&gt;
所以我想到先儲存一個 template，將我需要的資料驗證清單做好，&lt;br /&gt;
再使用 loadworkbook 的方法就可以保留 excel 裡原本的樣式。&lt;/p&gt;

&lt;p&gt;原本是直接使用 openxlsx 這個 library 的 loadWorkbook，&lt;br /&gt;
但在調整顏色時一直會有 error 無法解決，&lt;br /&gt;
在改用 XLConnect 這個 library 後就成功使用我想要的cells style與保留資料驗證清單了。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;另外一個碰到的狀況是我也是要使用一份 template 的樣式，&lt;br /&gt;
使用openxlsx和XLConnect的loadWorkbook時都遇到像這樣的錯誤&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Error in substring(x[ind], so, eo) : 
  invalid multibyte string at '&amp;lt;e6&amp;gt;&amp;lt;96&amp;gt;&amp;lt;b0&amp;gt;蝝唳&amp;lt;98&amp;gt;&amp;lt;ab&amp;gt;&amp;lt;94&amp;gt;&quot;/&amp;gt;'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;看起來像是編碼上的錯誤，但這份檔案上完全沒有中文，&lt;br /&gt;
後來我甚至存一份空白的excel檔案都還是會有錯誤。&lt;/p&gt;

&lt;p&gt;我將其他可以使用 loadWorkbook 這個 function 的 xlsx 丟進 Notepad++ 看，&lt;br /&gt;
發現可以讀的檔案是&lt;em&gt;Macintosh(CR)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Macintosh(CR).PNG&quot; alt=&quot;Macintosh(CR).PNG&quot; /&gt;&lt;/p&gt;

&lt;p&gt;不能讀的檔案是&lt;em&gt;Unix(LF)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://localhost:4000/blog/img/posts/Unix(LF).PNG&quot; alt=&quot;Unix(LF).PNG&quot; /&gt;&lt;/p&gt;

&lt;p&gt;但是，將 template 儲存成 Macintosh(CR) 後，&lt;br /&gt;
openxlsx的 loadWorkbook function 還是有同樣的 error，&lt;br /&gt;
而 XLConnect 的錯誤則解除了。&lt;/p&gt;

&lt;p&gt;程式碼範例，&lt;br /&gt;&lt;/p&gt;
&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;XLConnect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 讀取template&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadWorkbook&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;file.xlsx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# d是要儲存的dataframe，getSheets(wb)是sheet的名稱&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;writeWorksheet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getSheets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;startRow&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;startCol&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;header&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 設style&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cs&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;createCellStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 邊框&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setBorder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;side&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;all&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;XLC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;BORDER.THIN&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;XLC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;COLOR.BLACK&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setCellStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sheet&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getSheets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nrow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;col&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cellstyle&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 存檔&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;saveWorkbook&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;savefile.xlsx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;3xls&quot;&gt;3.xls&lt;br /&gt;&lt;/h2&gt;
&lt;p&gt;xls用的是&lt;a href=&quot;https://cran.r-project.org/web/packages/readxl/readxl.pdf&quot; target=&quot;_blank&quot;&gt;readxl&lt;/a&gt;套件，是R界有名的ggplot2作者&lt;a href=&quot;http://hadley.nz/&quot; target=&quot;_blank&quot;&gt;Hadley Wickham&lt;/a&gt;所寫。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;下載完後只要一行指令就好，&lt;/p&gt;
&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readxl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;saleslead&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read_excel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;paste0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2018 sales lead report (for TM only).xls&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sheet&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Raw Data&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;但要注意的是&lt;a href=&quot;http://readxl.tidyverse.org/articles/cell-and-column-types.html#excel-types-r-types-col_types&quot; target=&quot;_blank&quot;&gt;屬性問題&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;其他更多 library 的 function 都可以去CRAN找哦！&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[R]使用 R 寄Outlook Email</title>
   <link href="http://localhost:4000blog//r/2018/02/26/R-%E4%BD%BF%E7%94%A8R%E5%AF%84Outlook-Email/"/>
   <updated>2018-02-26T18:45:00+08:00</updated>
   <id>http://localhost:4000/r/2018/02/26/[R]使用R寄Outlook Email</id>
   <content type="html">&lt;p&gt;之前有介紹過使用mailR這個套件夾帶檔案&lt;a href=&quot;https://shihs.github.io/blog/r/2016/07/17/R-使用R發送email/&quot; target=&quot;_blank&quot;&gt;使用gmail信箱發送信件&lt;/a&gt;。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;這篇要介紹使用RDOCOMClient這個套件來發送outlook夾帶檔案的電子郵件。&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/26811679/sending-email-in-r-via-outlook&quot; target=&quot;_blank&quot;&gt;參考&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RDCOMClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;## init com api&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OutApp&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;COMCreate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Outlook.Application&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;## create an email &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outMail&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OutApp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CreateItem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;## configure  email parameter &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outMail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;To&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;reciever@mail.com&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outMail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;subject&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;subject&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# There are two ways you can write for mail body&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# First:text&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# outMail[[&quot;body&quot;]] = &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# &quot;Dear reciever,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#                      &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Please see attached.&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Best regards,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Sender&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Second:html text&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'
&amp;lt;p&amp;gt;Dear reciever,&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;Please see attached.&amp;lt;/p&amp;gt;
&amp;lt;br&amp;gt;
&amp;lt;br&amp;gt;
&amp;lt;p&amp;gt;Best regards,
&amp;lt;p&amp;gt;Sender&amp;lt;/p&amp;gt;'&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outMail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;HTMLbody&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# attachment&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outMail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Attachments&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;path of your attachment&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;## send it                     &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outMail&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;


&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>[Python][爬蟲]requests 的編碼</title>
   <link href="http://localhost:4000blog//python/%E7%88%AC%E8%9F%B2/2018/02/17/Python-%E7%88%AC%E8%9F%B2-requests-%E7%9A%84%E7%B7%A8%E7%A2%BC/"/>
   <updated>2018-02-17T19:01:00+08:00</updated>
   <id>http://localhost:4000/python/%E7%88%AC%E8%9F%B2/2018/02/17/[Python][爬蟲]requests 的編碼</id>
   <content type="html">&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rep = requests.get(url)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;rep.content ： bytes 型別&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;rep.text    ： unicode 型別&lt;/strong&gt;&lt;br /&gt;
1.是由 requests 以 rep.encoding 自動轉換的！&lt;br /&gt;
2.rep.encoding 是以 Reponse Headers 的 Content-Type 決定！&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python][爬蟲]防止被ban，代理IP怎麼用?</title>
   <link href="http://localhost:4000blog//python/%E7%88%AC%E8%9F%B2/2018/02/07/Python-%E7%88%AC%E8%9F%B2-%E9%98%B2%E6%AD%A2%E8%A2%ABban-%E4%BB%A3%E7%90%86IP%E6%80%8E%E9%BA%BC%E7%94%A8/"/>
   <updated>2018-02-07T11:47:00+08:00</updated>
   <id>http://localhost:4000/python/%E7%88%AC%E8%9F%B2/2018/02/07/[Python][爬蟲]防止被ban，代理IP怎麼用?</id>
   <content type="html">&lt;h2 id=&quot;如何讓爬蟲程式不被ban&quot;&gt;&lt;strong&gt;如何讓爬蟲程式不被ban?&lt;/strong&gt;&lt;/h2&gt;
&lt;ol&gt;
  &lt;li&gt;動態設置user agent&lt;/li&gt;
  &lt;li&gt;使用代理IP&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;a href=&quot;http://willdrevo.com/using-a-proxy-with-a-randomized-user-agent-in-python-requests&quot; target=&quot;_blank&quot;&gt;參考&lt;/a&gt;&lt;br /&gt;
這裡主要介紹如何使用IP代理。&lt;/p&gt;

&lt;h2 id=&quot;proxy代理類型&quot;&gt;&lt;strong&gt;proxy代理類型&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://gohom.win/2016/01/20/proxy-type/&quot; target=&quot;_blank&quot;&gt;參考&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;透明代理(Transparent Proxy)&lt;br /&gt;
REMOTE_ADDR = Proxy IP&lt;br /&gt;
HTTP_VIA = Proxy IP&lt;br /&gt;
HTTP_X_FORWARDED_FOR = Your IP&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;匿名代理(Anonymous Proxy)&lt;br /&gt;
REMOTE_ADDR = proxy IP&lt;br /&gt;
HTTP_VIA = proxy IP&lt;br /&gt;
HTTP_X_FORWARDED_FOR = proxy IP&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;混淆代理(Distorting Proxies)&lt;br /&gt;
REMOTE_ADDR = Proxy IP&lt;br /&gt;
HTTP_VIA = Proxy IP&lt;br /&gt;
HTTP_X_FORWARDED_FOR = Random IP address&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;高匿代理(Elite proxy或High Anonymity Proxy)&lt;br /&gt;
REMOTE_ADDR = Proxy IP&lt;br /&gt;
HTTP_VIA = not determined&lt;br /&gt;
HTTP_X_FORWARDED_FOR = not determined&lt;br /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;代理proxy哪裡找&quot;&gt;&lt;strong&gt;代理proxy哪裡找？&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;這裡提供兩個我覺得品質比較好的proxy代理&lt;br /&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;http://www.goubanjia.com/free/index.shtml&lt;br /&gt;&lt;/li&gt;
  &lt;li&gt;http://www.proxyserverlist24.top/&lt;br /&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/shihs/proxy/blob/master/get_proxies.py&quot; target=&quot;_blank&quot;&gt;程式碼&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;如何確定真的使用代理ip了&quot;&gt;&lt;strong&gt;如何確定真的使用代理IP了？&lt;/strong&gt;&lt;/h2&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;requests&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 隨便google可以找到可以查詢自己IP的網站&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;http://icanhazip.com/&quot;&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# 這個網站可以知道目前瀏覽的IP&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;proxies&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;http&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://xx.xx.xxx:xxxx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;https&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://xx.xx.xxx:xxxx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;###注意&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#要爬取的網站是使用什麼協定？http？https？&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#網址可能會有轉址的情況，最後轉的那個網址才是真正的協定喔&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;proxies&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;proxies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# 如果這個網站print出來的和proxies一樣，那就表示成功了&lt;/span&gt;


&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;抓完proxy後，我將所有proxy儲存在csv檔案中，
要爬取網站的時候，先讀取該檔案，
只要被擋，就random使用proxy替換proxies。&lt;/p&gt;

&lt;p&gt;如果所有proxy都用完再重新爬取，
網站上的proxy都會不停更換，
所以只要更新proxy庫就好。&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python]呼叫其他.py的function</title>
   <link href="http://localhost:4000blog//python/2018/02/02/Python-%E5%91%BC%E5%8F%AB%E5%85%B6%E4%BB%96py%E7%9A%84function/"/>
   <updated>2018-02-02T16:56:00+08:00</updated>
   <id>http://localhost:4000/python/2018/02/02/[Python]呼叫其他py的function</id>
   <content type="html">&lt;p&gt;假如現在正在寫的檔案是main.py，而你想要呼叫fun.py這裡面的function，
要怎麼做呢？&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;### 這是fun.py&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;itsafunction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;This is a function that I want to call.&quot;&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;有兩種情況，&lt;br /&gt;
&lt;strong&gt;1. 這兩個檔案在同一個folder底下&lt;/strong&gt;&lt;br /&gt;
—main.py&lt;br /&gt;
—fun.py&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;### 這是 main.py&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itsafunction&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 使用fun.py的itsafunction()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;itsafunction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;2. 這兩個檔案在不同folder底下&lt;/strong&gt;&lt;br /&gt;
想要呼叫的fun.py在function這個folder底下&lt;br /&gt;
—main.py&lt;br /&gt;
—function—fun.py&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;這時候main.py可以有兩種寫法&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;### 這是main1.py&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fun&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 使用fun.py的itsafunction()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fun&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;itsafunction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;### 這是main2.py&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;function.fun&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itsafunction&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 使用fun.py的itsafunction()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;itsafunction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;但還有一件很重要的事，要&lt;strong&gt;在function這個folder裡加”__init__.py”這個檔案&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;### 這是__init___.py&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 什麼都不用寫，沒錯，就是一個空白的.py檔&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# it's true, it's empty. But it's still important!&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;那如果今天fun.py在function的下一層folder呢?&lt;br /&gt;
—main.py&lt;br /&gt;
—function—another—fun.py&lt;br /&gt;
只要把main.py改成&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;### 這是main.py&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;function.another&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fun&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 使用fun.py的itsafunction()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fun&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;itsafunction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#或者也可以這樣寫&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;function.another.fun&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itsafunction&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 使用fun.py的itsafunction()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;itsafunction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;但最重要的是，&lt;br /&gt;
&lt;strong&gt;function和another這兩個folder裡面都要加上”__init__.py”這個檔案!&lt;/strong&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Tutorial]Computer Networking筆記(22-26)</title>
   <link href="http://localhost:4000blog//tutorial/2018/01/25/Tutorial-Computer-Networking%E7%AD%86%E8%A8%98(22-26)/"/>
   <updated>2018-01-25T20:29:00+08:00</updated>
   <id>http://localhost:4000/tutorial/2018/01/25/[Tutorial]Computer Networking筆記(22-26)</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/playlist?list=PL6gx4Cwl9DGBpuvPW0aHa7mKdn_k9SPKO&quot; target=&quot;_blank&quot;&gt;Computer Networking Tutorial&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;how-binary-code-works&quot;&gt;&lt;strong&gt;How Binary Code Works?&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;bit = binary digit&lt;/li&gt;
  &lt;li&gt;8-bit system 最高到2^8&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;舉例，如果今天我們要表示19這個數字，那就會是&lt;br /&gt;
2^8、2^7、2^6、2^5、2^4、2^3、2^2、2^1、2^0&lt;br /&gt;
 0 、 0 、 0 、 0 、 1 、 0 、 0 、 1 、 1&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;在8 bits的系統裡，可以表示從0到255的數字。&lt;br /&gt;
也就是，111111111&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;所以如果今天有更多的bits就可以儲存更多的data，
這也就是為什麼更大的bits功能較強大了。&lt;/p&gt;

&lt;h2 id=&quot;ip-address&quot;&gt;&lt;strong&gt;IP Address&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;每個device都有ip address。&lt;/p&gt;

&lt;p&gt;IP是一個32 bits的2進位表示的數字，&lt;br /&gt;
中間以「.」隔開成四組號碼。&lt;br /&gt;
像這樣:xxx.xxx.xxx.xxx&lt;br /&gt;
每一組xxx都是8-bit，也就是一個八位數的0、1所組成的數字，&lt;br /&gt;
所以，每一組有2^8(256)個數字，總共就會有2^8&lt;em&gt;2^8&lt;/em&gt;2^8*2^組IP。&lt;br /&gt;
而我們看到的IP則是再把這些2進位的數字轉換成10進位表示。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;這樣的方式就可以讓每個device表達它的位置。&lt;/p&gt;

&lt;h2 id=&quot;ip-addressing-issues&quot;&gt;&lt;strong&gt;IP Addressing Issues&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;The Internet is a network of networks.&lt;/p&gt;

&lt;p&gt;影片舉了一個例子：
想像網路其實是聚集了所有的網絡。
例如，社區網路是一個網絡，學校是一個網絡，公司是一個網絡，
而這三個網絡又都可以連到網路上。&lt;/p&gt;

&lt;p&gt;當今天，公司裡有台電腦送了requests到網路另一端的server，
這時候server收到訊息後，會再傳回response，
可是它要如何透過IP知道到底找到這個送出requests的裝置呢？&lt;/p&gt;

&lt;p&gt;所以其實IP裡頭包含兩個訊息，&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Newwork ID&lt;/li&gt;
  &lt;li&gt;Host ID&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;但是，重點來了！&lt;br /&gt;
那一組32 bits的IP要怎麼表示Newwork ID和Host ID呢？&lt;br /&gt;
如果對分，讓16 bits表示Newwork ID，16 bits表示Host ID，&lt;br /&gt;
這樣就可以有65,536個Newwork ID配上Host ID的組合。&lt;br /&gt;
但這時候有人說，那萬一某個network的host很少，&lt;br /&gt;
那豈不是浪費了很多host的位址嗎！&lt;br /&gt;
但讓host多點bits或少點bits都有可能會遇到浪費或是不夠的問題，&lt;br /&gt;
這時候大家有點爭論不休，&lt;br /&gt;
到底該如何解決呢？&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;所以這時有人提出了一個辦法，&lt;br /&gt;
我們應該要用一個方法表示出Network ID和Host ID的長度。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=D0a9hTEW48Y&quot; target=&quot;_blank&quot;&gt;&lt;em&gt;Subnet mask(子網路遮罩)&lt;/em&gt;&lt;/a&gt;&lt;br /&gt;
當今天在傳送訊息時，&lt;br /&gt;
device不只傳送自己的ip，也傳送subnet mask來表示network id和host id長度，&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;subnet mask一樣是一個32 bits的2進位數字，&lt;br /&gt;
1表示network id，0表示host id。&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=FM169QUIQco&amp;amp;list=PL6gx4Cwl9DGBpuvPW0aHa7mKdn_k9SPKO&amp;amp;index=25&quot; target=&quot;_blank&quot;&gt;(這裡看影片應該會比較好理解)&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=Upk5MU7vGAg&amp;amp;index=26&amp;amp;list=PL6gx4Cwl9DGBpuvPW0aHa7mKdn_k9SPKO&quot; target=&quot;_blank&quot;&gt;詳細範例&lt;/a&gt;&lt;br /&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Tutorial]Computer Networking筆記(16-21)</title>
   <link href="http://localhost:4000blog//tutorial/2018/01/24/Tutorial-Computer-Networking%E7%AD%86%E8%A8%98(16-21)/"/>
   <updated>2018-01-24T21:46:00+08:00</updated>
   <id>http://localhost:4000/tutorial/2018/01/24/[Tutorial]Computer Networking筆記(16-21)</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/playlist?list=PL6gx4Cwl9DGBpuvPW0aHa7mKdn_k9SPKO&quot; target=&quot;_blank&quot;&gt;Computer Networking Tutorial&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;osi-model&quot;&gt;&lt;strong&gt;OSI Model&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/OSI模型&quot; target=&quot;_blank&quot;&gt;OSI Model- Open System Interconnection Reference Model&lt;/a&gt;&lt;br /&gt;
總之，這是一個試圖使各種電腦在世界範圍內互連為網路的標準框架，總共有七層。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://tw.voicetube.com/videos/20018&quot; target=&quot;_blank&quot;&gt;這有另外一個我覺得還不錯的影片&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;modem&quot;&gt;&lt;strong&gt;Modem&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Modem就是我們說的&lt;a href=&quot;https://zh.wikipedia.org/wiki/调制解调器&quot; target=&quot;_blank&quot;&gt;數據機&lt;/a&gt;。&lt;br /&gt;
It’s device that connects the network to the Internet.&lt;br /&gt;
It converges digital signals from router(or any other devices) to analog signals.&lt;br /&gt;
簡單來說，數據機可以將數位訊號變成類比訊號(訊號轉換器的感覺)，&lt;br /&gt;
電話、網路等等會透過數據機來轉換訊號而獲得另一方的訊號。&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;router&quot;&gt;&lt;strong&gt;Router&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Router是&lt;a href=&quot;https://zh.wikipedia.org/wiki/路由器&quot; target=&quot;_blank&quot;&gt;路由器&lt;/a&gt;。&lt;br /&gt;
Router joins network together.&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;switch&quot;&gt;&lt;strong&gt;Switch&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Switch是分享器。&lt;br /&gt;
假如今天路由器的網路插孔不夠，分享器可以增加網路插孔，讓更多的電腦使用。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.mobile01.com/topicdetail.php?f=507&amp;amp;t=1631479&quot; target=&quot;_blank&quot;&gt;路由器和分享器差在哪&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;repeaterextender&quot;&gt;&lt;strong&gt;Repeater/Extender&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Repeater/Extender是中繼器。&lt;br /&gt;
在一個比較大的空間裡，路由器的信號會因為距離而所差別，&lt;br /&gt;
這時候使用中繼器，就可以讓網路訊號放大，讓離路由器較遠的裝置也可以有良好的訊號。&lt;br /&gt;
即便是接網路線，如果網路線過長，訊號也會變差，&lt;br /&gt;
所以如果使用中繼器可以解決距離較遠的問題。&lt;br /&gt;
而路由器本身就有中繼器的功能，所以只要選擇其一使用就好。&lt;br /&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Tutorial]Computer Networking筆記(12-15)</title>
   <link href="http://localhost:4000blog//tutorial/2018/01/20/Tutorial-Computer-Networking%E7%AD%86%E8%A8%98(12-15)/"/>
   <updated>2018-01-20T16:26:00+08:00</updated>
   <id>http://localhost:4000/tutorial/2018/01/20/[Tutorial]Computer Networking筆記(12-15)</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/playlist?list=PL6gx4Cwl9DGBpuvPW0aHa7mKdn_k9SPKO&quot; target=&quot;_blank&quot;&gt;Computer Networking Tutorial&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;topologylayout&quot;&gt;&lt;strong&gt;Topology/Layout&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/网络拓扑&quot; target=&quot;_blank&quot;&gt;Topology/Layout&lt;/a&gt;是網路之間連接的方式，wiki上翻成「網路拓樸」。&lt;br /&gt;
每一種方式都各有有缺點，所以取決於使用的目的來決定適合哪種Layout。&lt;/p&gt;

&lt;p&gt;這個課程介紹三種方式：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Bus Topology(Tutorial 12)&lt;/li&gt;
  &lt;li&gt;Ring Topology(Tutorial 13)&lt;/li&gt;
  &lt;li&gt;Star Topology(Tutorial 14)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;1. Bus Topology&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;https://zh.wikipedia.org/wiki/匯流排拓撲&quot; target=&quot;_blank&quot;&gt;Bus Topology&lt;/a&gt;是最簡單的一種連接方式，最主要中間有一條主幹，&lt;br /&gt;
其他node再與主幹相連。最重要的是，主幹的尾端一定要有terminator，&lt;br /&gt;
才能將傳到尾端的訊號吸收，否則會有回傳的訊號干擾。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;這樣的優點就是，簡單而且便宜，&lt;br /&gt;
適合使用在小範圍的網絡內。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;但缺點是，只有主幹上出了問題，整個網路可能就會出問題。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2. Ring Topology&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;https://zh.wikipedia.org/wiki/環狀拓撲&quot; target=&quot;_blank&quot;&gt;Ring Topology&lt;/a&gt;與Bus Topology不同的是，它是一個沒有終端環狀，&lt;br /&gt;
所有node與該環狀線連結，訊號會順著同一個方向傳遞。&lt;br /&gt;
一般來說，會有兩個環狀(double ring)，訊號會是反方向傳遞。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;這樣的優點就是，它不需要Bus Topology必須的terminator，&lt;br /&gt;
而且如果是雙環，也比較不會有主幹出問題，&lt;br /&gt;
整個網路就壞掉的問題。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;但缺點是，&lt;br /&gt;
它比Bus Topology貴。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;3. Star Topology&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;https://zh.wikipedia.org/wiki/星型网&quot; target=&quot;_blank&quot;&gt;Star Topology&lt;/a&gt;可能是家裡最常見的一種連結方式。&lt;br /&gt;
Star Topology會有許多nodes連結中的device(譬如rounter)，就像是星狀一樣。&lt;br /&gt;
例如，如果中心是rounter，它會在連結internet。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;這種topology的優點是，價格低、easy to expand。&lt;br /&gt;
另一方面，如果有其中的node或是某一個node與中心的device的連結出了問題，其他nodes都不會被影響。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;但缺點是，因為所有nodes都連結中心，&lt;br /&gt;
也就是所有的nodes全部都必須要依賴中心，&lt;br /&gt;
所以只要中心的device壞掉，整個連線就會全部失效。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;4.Mesh Topology&lt;/strong&gt;&lt;br /&gt;
&lt;a href=&quot;https://zh.wikipedia.org/wiki/网状网络&quot; target=&quot;_blank&quot;&gt;Mesh Topology&lt;/a&gt;所有nodes之間都互相連結，就像個網狀。&lt;br /&gt;
這種方式比較會在MAN或WAN見到，不會在LAN使用。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;優點是，因為每個node之間都互相連結，&lt;br /&gt;
所以假如有兩個nodes之間的連結出了問題，&lt;br /&gt;
還可以透過其他nodes傳遞訊號，&lt;br /&gt;
這樣在傳送訊息上也比較保險。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;缺點是，因為每個node之間都要連接，就會需要有很多的cable，&lt;br /&gt;
這時候成本就會提高。有越多的node，成本就會越高。&lt;br /&gt;
另一方面，因為一個node需要和其他所有nodes連結，&lt;br /&gt;
這時候網卡(NIC)就需要更強大，同樣也會造成成本的提高，&lt;br /&gt;
且每一次增加node可能都需要增加NIC。&lt;br /&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[R]read.csv出現編碼錯誤訊息</title>
   <link href="http://localhost:4000blog//r/2018/01/17/R-read.csv%E5%87%BA%E7%8F%BE%E7%B7%A8%E7%A2%BC%E9%8C%AF%E8%AA%A4%E8%A8%8A%E6%81%AF/"/>
   <updated>2018-01-17T10:19:00+08:00</updated>
   <id>http://localhost:4000/r/2018/01/17/[R]read.csv出現編碼錯誤訊息</id>
   <content type="html">&lt;p&gt;在讀取csv檔案時出現錯誤訊息&lt;/p&gt;
&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read.csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;file.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stringsAsFactors&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
 
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Error in type.convert(data[[i]], as.is = as.is[i], dec = dec, numerals = numerals,  : invalid multibyte string at '&amp;lt;e8&amp;gt;&amp;lt;8a&amp;gt;&amp;lt;b1&amp;gt;?&amp;lt;ae&amp;gt;'&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;會出現這樣的錯誤訊息通常是因為編碼問題。&lt;/p&gt;

&lt;p&gt;先將這份檔案丟到Notepad++，
可以看到右下方顯示這份檔案的編碼，
(這份檔案是UTF-8)
所以只要加上
&lt;strong&gt;fileEncoding =”UTF-8”&lt;/strong&gt;
就可以解決這個問題了。&lt;/p&gt;
&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read.csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;paste0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;file.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stringsAsFactors&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileEncoding&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>[R]如何刪除 U+00A0</title>
   <link href="http://localhost:4000blog//r/2018/01/17/R-%E5%A6%82%E4%BD%95%E5%88%AA%E9%99%A4-U+00A0/"/>
   <updated>2018-01-17T09:15:00+08:00</updated>
   <id>http://localhost:4000/r/2018/01/17/[R]如何刪除 <U+00A0></id>
   <content type="html">&lt;p&gt;在資料中有些含有空白的文字讀進R後會變成&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;U+00A0&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;而且不管用什麼方式都取代不了這個符號，
這時候該怎麼辦呢？&lt;/p&gt;

&lt;p&gt;其實只要使用 “\U00A0”就可以了&lt;/p&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# t是含有&quot;&amp;lt;U+00A0&amp;gt;&quot;的字串&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gsub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;\U00A0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>[Tutorial]Computer Networking筆記(9-11)</title>
   <link href="http://localhost:4000blog//tutorial/2018/01/15/Tutorial-Computer-Networking%E7%AD%86%E8%A8%98(9-11)/"/>
   <updated>2018-01-15T22:40:00+08:00</updated>
   <id>http://localhost:4000/tutorial/2018/01/15/[Tutorial]Computer Networking筆記(9-11)</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/playlist?list=PL6gx4Cwl9DGBpuvPW0aHa7mKdn_k9SPKO&quot; target=&quot;_blank&quot;&gt;Computer Networking Tutorial&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;1what-is-nicnetwork-interface-card&quot;&gt;&lt;strong&gt;1.What is NIC(Network Interface Card)?&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;NIC就是網卡，所有電腦都必須要有網卡才能連上網路。&lt;br /&gt;
(just google it, you can find tons of pictures of NIC)&lt;/p&gt;

&lt;h2 id=&quot;2what-is-a-protocol&quot;&gt;&lt;strong&gt;2.What is a Protocol?&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;字典翻譯的意思是，協議草案、禮儀。&lt;br /&gt;
在network裡，protocol是「網路傳輸協定」。&lt;/p&gt;

&lt;p&gt;這裡作者先不講定義，先講一個communication會有什麼要件，&lt;br /&gt;
他用男生想要認識一個女生來舉例。&lt;/p&gt;

&lt;p&gt;一開始男生要搭訕女生他們可能會有像這樣的對話&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Hey  -&amp;gt;&lt;/li&gt;
  &lt;li&gt;&amp;lt;-  Hello&lt;/li&gt;
  &lt;li&gt;Can I get your number?   -&amp;gt;&lt;/li&gt;
  &lt;li&gt;&amp;lt;- 1234-567&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;這樣的對話中會有幾個規則，&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;一次只會有一個人說話&lt;/li&gt;
  &lt;li&gt;男生說話以後，會預期女生會回話&lt;/li&gt;
  &lt;li&gt;問句會有預期的回答(specific messages receive specific responses)&lt;br /&gt;
符合這樣的規則，那麼人之間的對話(communication)才會有可能成立。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;同樣的，用在computer commnication也要有一些規則。&lt;br /&gt;
Protocol are the rules for successful communication among two parties.&lt;/p&gt;

&lt;p&gt;如果今天你的mac想要和web sever communicates這時候protocol會是什麼呢？&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Can I connect to you?   -&amp;gt;&lt;/li&gt;
  &lt;li&gt;&amp;lt;-   Yes, you have my permission.&lt;/li&gt;
  &lt;li&gt;GET file google.com   -&amp;gt;&lt;/li&gt;
  &lt;li&gt;&amp;lt;-  sends file&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;在computer networking裡，最重要的protocol是&lt;br /&gt;
&lt;strong&gt;format&lt;/strong&gt;和&lt;strong&gt;order&lt;/strong&gt; of massage&lt;br /&gt;
就像是上面的請求順序，&lt;br /&gt;
如果在mac還沒提出request，&lt;br /&gt;
sever就送出網頁，這肯定很怪的吧！&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;protocol有很多種，
但我們先來看以下這個例子。&lt;br /&gt;
這是個網址，&lt;br /&gt;
http:// www.thenewboston.org /index.php&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;http&lt;/strong&gt;: protocol&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;www.thenewboston.org&lt;/strong&gt;: sever name&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;index.php&lt;/strong&gt;: file&lt;/li&gt;
&lt;/ul&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python]Google 翻譯 API 接口 googletrnas</title>
   <link href="http://localhost:4000blog//python/2018/01/15/Python-Google%E7%BF%BB%E8%AD%AFAPI%E6%8E%A5%E5%8F%A3-library-googletrnas/"/>
   <updated>2018-01-15T22:00:00+08:00</updated>
   <id>http://localhost:4000/python/2018/01/15/[Python]Google翻譯API接口-library googletrnas</id>
   <content type="html">&lt;p&gt;使用前，先安裝&lt;a href=&quot;https://py-googletrans.readthedocs.io/en/latest/&quot; target=&quot;_blank&quot;&gt;googletrans&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-cmd&quot;&gt;# windows
pip install googletrans
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# mac
sudo pip install googletrans
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;程式碼&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# -*- coding: utf-8 -*-&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;googletrans&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Translator&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 這兩行很重要，不然會有編碼問題&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;reload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setdefaultencoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;utf-8&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;translator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Translator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# src來源語言，dest要翻譯語言，如果要找其他語言可以參考說明文件&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;translator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;translate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'고마워'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ko&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;zh-TW&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;根據說明文件，這個套件可能會有不穩定的問題
找到有人&lt;a href=&quot;https://hk.saowen.com/a/4c76af2381e3a60e86f7c4b934a21faebad8b2e7b4a4131cb7c2889afcea6479&quot; target=&quot;_blank&quot;&gt;直接爬google翻譯的程式碼&lt;/a&gt;
但其實如果沒有要很大量的爬取我認為這個套件應該很好用了。&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Tutorial]Computer Networking筆記(1-8)</title>
   <link href="http://localhost:4000blog//tutorial/2018/01/09/Tutorial-Computer-Networking%E7%AD%86%E8%A8%98(1-8)/"/>
   <updated>2018-01-09T15:27:00+08:00</updated>
   <id>http://localhost:4000/tutorial/2018/01/09/[Tutorial]Computer Networking筆記(1-8)</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/playlist?list=PL6gx4Cwl9DGBpuvPW0aHa7mKdn_k9SPKO&quot; target=&quot;_blank&quot;&gt;Computer Networking Tutorial&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;1what-is-computer-networking&quot;&gt;&lt;strong&gt;1.What is Computer Networking?&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;各裝置(&lt;em&gt;devices&lt;/em&gt;)之間的連結&lt;br /&gt;
裝置：PC、laptop、printer、rounter等等(不限於電腦)，每一個device都是一個&lt;strong&gt;&lt;em&gt;Node&lt;/em&gt;&lt;/strong&gt;。&lt;br /&gt;
連結：可以使用cable、wireless、copper wire等等，可以稱為&lt;strong&gt;&lt;em&gt;communications media&lt;/em&gt;&lt;/strong&gt;。&lt;br /&gt;
Internet(網路)就是一種computer network&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;computer nework的目的是為了要資料傳輸、資料交換，&lt;br /&gt;
這裡的資料可以是，documents、pictures、videos等等。&lt;/p&gt;

&lt;p&gt;computer newworking的兩個重點就是，&lt;strong&gt;&lt;em&gt;Nodes&lt;/em&gt;&lt;/strong&gt;和&lt;strong&gt;&lt;em&gt;Communications Media&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;2types-of-networks&quot;&gt;&lt;strong&gt;2.Types of Networks&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;LAN&lt;/em&gt;&lt;/strong&gt;(Local Area Network)：一個building的網絡連結，可能是一棟建築、一所學校，小範圍的區域網絡&lt;br /&gt;
&lt;strong&gt;&lt;em&gt;MAN&lt;/em&gt;&lt;/strong&gt;(Metorpolitan Area Network)：多個建築之間的網絡連結，可能是一個城市&lt;br /&gt;
&lt;strong&gt;&lt;em&gt;WAN&lt;/em&gt;&lt;/strong&gt;(Wide Area Network)：&amp;gt;30 miles的網絡連結，整個國家之間、跨國之間的連結&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;3how-the-internet-works&quot;&gt;&lt;strong&gt;3.How the Internet works?&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;以網站為例，假如我今天有一個個人網站，別人是如何透過internet看到我的網站的呢？&lt;br /&gt;
如果以上面computer network的邏輯來看，&lt;br /&gt;
其他電腦可以連結到我的電腦，看到我的個人網站。&lt;br /&gt;
但，如果所有人都可以連到我的個人電腦這樣會有網路安全的疑慮，&lt;br /&gt;
所以實際上，要連到個人網站是透過&lt;strong&gt;&lt;em&gt;server&lt;/em&gt;&lt;/strong&gt;。&lt;br /&gt;
server is a special computer that everyone can access it.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;我將個人網站建置(store)在server，&lt;br /&gt;
其他人要看到我的網站，&lt;br /&gt;
會在browser上打上網址，&lt;br /&gt;
這時候就會向server提出request，&lt;br /&gt;
sever接受到request會回傳data，這些data會是程式碼，&lt;br /&gt;
而browser會將這些程式碼轉成我們看得懂的網站。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;通常建置網頁這樣的server我們稱為，&lt;strong&gt;&lt;em&gt;web server&lt;/em&gt;&lt;/strong&gt;。&lt;br /&gt;
像google這麼大的網站，一次總是要接收非常大量來自世界各地的request，&lt;br /&gt;
所以這個server就必須要有很大的memory，&lt;br /&gt;
才能負荷這樣的使用流量。&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&quot;4client-and-host&quot;&gt;&lt;strong&gt;4.Client and Host&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;根據上面提到的例子，&lt;br /&gt;
使用PC的browser向sever提出request，&lt;br /&gt;
然後server會提供給data給PC的browser。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;PC接收資料，而server提供資料，&lt;br /&gt;
PC就是client，sever就是host。&lt;br /&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python][爬蟲]URL沒有 HTTP/HTTPS 與網址重新導向</title>
   <link href="http://localhost:4000blog//python/%E7%88%AC%E8%9F%B2/2018/01/08/Python-%E7%88%AC%E8%9F%B2-URL%E6%B2%92%E6%9C%89HTTP-HTTPS%E8%88%87%E7%B6%B2%E5%9D%80%E9%87%8D%E6%96%B0%E5%B0%8E%E5%90%91/"/>
   <updated>2018-01-08T15:12:00+08:00</updated>
   <id>http://localhost:4000/python/%E7%88%AC%E8%9F%B2/2018/01/08/[Python][爬蟲]URL沒有HTTP:HTTPS與網址重新導向</id>
   <content type="html">&lt;p&gt;這次要爬的網址長得像這樣&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;hazyfairyland.blogspot.tw&lt;/li&gt;
  &lt;li&gt;cartersoshkosh.tw&lt;/li&gt;
  &lt;li&gt;yungmaun.com.tw&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;沒有www也沒有&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%AE%89%E5%85%A8%E5%8D%8F%E8%AE%AE&quot; target=&quot;_blank&quot;&gt;http/https&lt;/a&gt;，&lt;br /&gt;
如果直接將這樣的網址丟到瀏覽器的網址列它會自動重新導向，&lt;br /&gt;
但如果是使用request就會產生錯誤訊息。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;這時候該怎麼辦呢？&lt;/p&gt;

&lt;p&gt;其實只要在前方加上”http://”就行了，&lt;br /&gt;
若其實該網址是”https//”， request也會自動重新導向。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;假如所有的網址都是沒有www，&lt;br /&gt;
就直接在所有url前方加上”http://”就好了。&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;cartersoshkosh.tw&quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;		
        &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;
			
    &lt;span class=&quot;c&quot;&gt;# catch requests.exceptions.MissingSchema error, add &quot;http://&quot; in the front&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;except&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exceptions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MissingSchema&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;http://&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;
       
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# print the final url&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;history&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# print how many redirections it has gone throgh&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python]Read and Write CSV file</title>
   <link href="http://localhost:4000blog//python/2018/01/08/Python-Read-and-Write-CSV-file/"/>
   <updated>2018-01-08T11:32:00+08:00</updated>
   <id>http://localhost:4000/python/2018/01/08/[Python] Read and Write CSV file</id>
   <content type="html">&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;csv&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# read csv file&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;file.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;rb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;row&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;csv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;
    



&lt;span class=&quot;c&quot;&gt;# write csv file&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;data1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;data2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;data3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;data4&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# list &lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;file.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;wb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;csv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;writer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;writerows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>[Python][爬蟲]如何爬取網頁中js生成的部分</title>
   <link href="http://localhost:4000blog//python/%E7%88%AC%E8%9F%B2/2017/08/18/Python-%E7%88%AC%E8%9F%B2-%E5%A6%82%E4%BD%95%E7%88%AC%E5%8F%96%E7%B6%B2%E9%A0%81%E4%B8%ADjs%E7%94%9F%E6%88%90%E7%9A%84%E9%83%A8%E5%88%86/"/>
   <updated>2017-08-18T11:14:00+08:00</updated>
   <id>http://localhost:4000/python/%E7%88%AC%E8%9F%B2/2017/08/18/[Python][爬蟲]如何爬取網頁中js生成的部分</id>
   <content type="html">&lt;p&gt;這次想要爬取的是&lt;a href=&quot;http://www.automotiveworld.jp/en/To-Visit/Exhibitor/&quot; target=&quot;_blank&quot;&gt;2017年汽車技術展會&lt;/a&gt;的參展廠商名單。&lt;/p&gt;

&lt;p&gt;網頁長得像這樣，
&lt;img src=&quot;http://user-image.logdown.io/user/13067/blog/12306/post/2185818/nYLZLEUgSQKEr6NcE1lI_%E6%93%B7%E5%8F%96.PNG&quot; alt=&quot;擷取.PNG&quot; /&gt;&lt;/p&gt;

&lt;p&gt;在load網頁的時候可以發現，「AUTOMOTIVE WORLD」這個框框會比較慢才跑出來，(可以按重新整裡查看)
這時候就可以猜測網頁的這個部份是js生成的。&lt;/p&gt;

&lt;p&gt;同樣的，使用右鍵「檢查元素」來查看在load這個網頁的過程發生了什麼事。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://user-image.logdown.io/user/13067/blog/12306/post/2185818/larcwggRn6FbWCLYL1rA_%E6%93%B7%E5%8F%96.PNG&quot; alt=&quot;擷取.PNG&quot; /&gt;&lt;/p&gt;

&lt;p&gt;一般來說Network的第一個就會是我們要找的內容，
這裡是「Exhibitor/」，查看Headers的General，
&lt;img src=&quot;http://user-image.logdown.io/user/13067/blog/12306/post/2185818/QUmMTlxTwmt8yAQAVlxb_%E6%93%B7%E5%8F%96.PNG&quot; alt=&quot;擷取.PNG&quot; /&gt;
可以發現就是url就是原本的頁面。&lt;/p&gt;

&lt;p&gt;如果去抓取網頁，&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;http://www.automotiveworld.jp/en/To-Visit/Exhibitor/&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;會發現完全抓不到廠商名單的tag，
這就是因為，
那一個區塊是js另外生成的，
所以要去找另外生成的頁面。&lt;/p&gt;

&lt;p&gt;回到「檢查元素」的Network，
看看有沒有什麼可疑對象，
&lt;img src=&quot;http://user-image.logdown.io/user/13067/blog/12306/post/2185818/YHWc9omST2SYb4hBRXmF_%E6%93%B7%E5%8F%96.PNG&quot; alt=&quot;擷取.PNG&quot; /&gt;&lt;/p&gt;

&lt;p&gt;這時候發現一個type是document的ExhiList，
點進去發現長得像這樣，
&lt;img src=&quot;http://user-image.logdown.io/user/13067/blog/12306/post/2185818/Yg3xAxdQAaq1yslM19XG_%E6%93%B7%E5%8F%96.PNG&quot; alt=&quot;擷取.PNG&quot; /&gt;&lt;/p&gt;

&lt;p&gt;將&lt;a href=&quot;http://jan2017.tems-system.com/ExhiSearch/AUTO/eng/ExhiList&quot;&gt;網址&lt;/a&gt;丟到網址列，
果然，就得到了我們要的部分了！&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/shihs/crawlers/tree/master/2017%E5%B9%B4%E6%B1%BD%E8%BB%8A%E6%8A%80%E8%A1%93%E5%B1%95%E6%9C%83&quot; target=&quot;_blank&quot;&gt;完整程式碼&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Git] 提交一個更新</title>
   <link href="http://localhost:4000blog//git/2017/07/26/Git-%E6%8F%90%E4%BA%A4%E4%B8%80%E5%80%8B%E6%9B%B4%E6%96%B0/"/>
   <updated>2017-07-26T15:25:00+08:00</updated>
   <id>http://localhost:4000/git/2017/07/26/[Git] 提交一個更新</id>
   <content type="html">&lt;p&gt;以下要介紹最基本的同步，
檔案在本機被修改或是增加後push到github。&lt;/p&gt;

&lt;p&gt;&lt;b&gt;1.檢視所有檔案狀態&lt;/b&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-git&quot;&gt;$ git status  #修改或是增加的檔案會呈現紅字
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;2.告知git需要commit的檔案&lt;/b&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-git&quot;&gt;$ git add &amp;lt;file&amp;gt;  #提交一個新增加的檔案
$ git add -A  #stages All
$ git add .  #stages new and modified, without deleted
$ git add -u  #stages modified and deleted, without new
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;add完後用 &lt;code class=&quot;highlighter-rouge&quot;&gt;git status&lt;/code&gt; 會發現原本的紅字變成綠字
&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;3.commit變化&lt;/b&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-git&quot;&gt;$ git commit
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;這時候需要記錄提交的訊息
&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;4.push同步&lt;/b&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-git&quot;&gt;$ git push
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;主要流程，
&lt;code class=&quot;highlighter-rouge&quot;&gt;增加、修改檔案&lt;/code&gt; &amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;git add&lt;/code&gt; &amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;git commit&lt;/code&gt; &amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;git push&lt;/code&gt;
透過&lt;code class=&quot;highlighter-rouge&quot;&gt;git status&lt;/code&gt;可以查看目前的狀態&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://zlargon.gitbooks.io/git-tutorial/content/startup/commit_a_patch.html&quot; target=&quot;_blank&quot;&gt;參考&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python][爬蟲]如何下載 zip 檔</title>
   <link href="http://localhost:4000blog//python/%E7%88%AC%E8%9F%B2/2017/07/25/Python-%E7%88%AC%E8%9F%B2-%E5%A6%82%E4%BD%95%E4%B8%8B%E8%BC%89zip%E6%AA%94/"/>
   <updated>2017-07-25T11:17:00+08:00</updated>
   <id>http://localhost:4000/python/%E7%88%AC%E8%9F%B2/2017/07/25/[Python][爬蟲]如何下載zip檔</id>
   <content type="html">&lt;p&gt;這裡要示範使用三個不同的package下載zip檔。&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib2&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;requests&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'http://www.blog.pythonlibrary.org/wp-content/uploads/2012/06/wxDbViewer.zip'&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;downloading with urllib&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlretrieve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;code.zip&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;downloading with urllib2&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;code2.zip&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;wb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;downloading with requests&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;code3.zip&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;wb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://dzone.com/articles/how-download-file-python&quot; target=&quot;_blank&quot;&gt;參考&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Excel][VBA]寄出內文含圖檔的outlook信件</title>
   <link href="http://localhost:4000blog//excel/vba/2017/07/05/Excel-VBA-outlook%E4%BF%A1%E4%BB%B6%E5%85%A7%E6%96%87%E5%90%AB%E5%9C%96%E6%AA%94/"/>
   <updated>2017-07-05T16:12:00+08:00</updated>
   <id>http://localhost:4000/excel/vba/2017/07/05/[Excel][VBA]outlook信件內文含圖檔</id>
   <content type="html">&lt;p&gt;這裡要介紹如何使用Excel VBA&lt;br /&gt;
在信件內容包含截取sheet中的特定欄位區塊，&lt;br /&gt;
並將此區塊變為圖檔包含在內文中寄出。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;現在要截取一份長這樣的檔案&lt;br /&gt;
&lt;img src=&quot;http://user-image.logdown.io/user/13067/blog/12306/post/2007909/E6x1745kT82DMCqRbLq2_%E6%93%B7%E5%8F%96.PNG&quot; alt=&quot;擷取.PNG&quot; /&gt;
有兩種方法。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;第一種方法是，&lt;br /&gt;
先將截取的區塊存成圖檔後再將此圖檔讀取到郵件內容。&lt;br /&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-VBA&quot;&gt;Sub PrintScreen()

      '複製工作表要存圖檔的範圍
        Sheets(&quot;Sheet1&quot;).Select
        Set rng = Range(&quot;A1:B3&quot;)
        rng.CopyPicture

      ' Excel 存圖檔的精簡程式碼。
        With ActiveSheet.ChartObjects.Add(1, 1, rng.Width, rng.Height)  '新增 圖表
            .Chart.Paste                                                '貼上 圖片
            .Chart.Export Filename:=&quot;test.PNG&quot;, Filtername:=&quot;PNG&quot; '匯出 圖片
            .Delete                                                     '刪除 圖表
        End With

End Sub

Sub SendMail_1()
    
    Dim objOutlook As Object
    Dim objMail As Object
    
    Set objOutlook = CreateObject(&quot;Outlook.Application&quot;)
    Set objMail = objOutlook.CreateItem(0)
    
    With objMail
        .to = &quot;address@email.com&quot;
        .Subject = &quot;Subject&quot;
        .Body = &quot;mail body&quot;
        .HTMLbody = .HTMLbody &amp;amp; &quot;&amp;lt;br&amp;gt;&amp;lt;B&amp;gt;Embedded Image:&amp;lt;/B&amp;gt;&amp;lt;br&amp;gt;&quot; _
                &amp;amp; &quot;&amp;lt;img src='test.PNG'&quot; &amp;amp; &quot;width='250' height='100'&amp;gt;&amp;lt;br&amp;gt;&quot; _
                &amp;amp; &quot;&amp;lt;br&amp;gt;Best Regards, &amp;lt;br&amp;gt;Sumit&amp;lt;/font&amp;gt;&amp;lt;/span&amp;gt;&quot;
       ' objMail.Attachments.Add &quot;test.PNG&quot;       ' 使用附件檔案
       '.Display     ' 可以編輯郵件內容，再按下 傳送 鍵。
       '.Save         ' to save a copy in the drafts folder
        .Send        ' 直接送出郵件
        
    End With       
    
    Set objOutlook = Nothing
    Set objMail = Nothing
    
End Sub

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;第二種方法是，&lt;br /&gt;
直接截取區要的區塊，變成圖檔，然後貼到信件內容。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-VBA&quot;&gt;Sub SendMail_2()

    Set objOutlook = CreateObject(&quot;Outlook.Application&quot;)
    Set objMail = objOutlook.CreateItem(0)

    ' mail body
    strbody = &quot;mail body&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&quot;

    'Copy range of interest
    Dim r As Range
    Set r = Sheets(&quot;Sheet1&quot;).Range(&quot;A1:B3&quot;)
    r.Copy

    'Paste as picture in sheet and cut immediately
    Dim p As Picture
    Set p = ActiveSheet.Pictures.Paste
    p.Cut
        
    With objMail
        .to = &quot;address@email.com&quot;
        '.cc =
        '.bcc = &quot;&quot;
        .Subject = &quot;Subject&quot;
        .HTMLbody = strbody
        '.Display
        
    End With


    'Get its Word editor
    objMail.Display
    Dim wordDoc As Object
    Set wordDoc = objMail.GetInspector.WordEditor

    'Paste picture
    wordDoc.Range(Start:=wordDoc.Range.End - 3).Paste
    
    'send mail
    objMail.Send
    
    Set objOutlook = Nothing
    Set objMail = Nothing

End Sub

&lt;/code&gt;&lt;/pre&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python][爬蟲]不同的 Content-Type (multipart/form-data)</title>
   <link href="http://localhost:4000blog//python/%E7%88%AC%E8%9F%B2/2017/06/30/Python-%E7%88%AC%E8%9F%B2-%E4%B8%8D%E5%90%8C%E7%9A%84Content-Type-multipart-form-data/"/>
   <updated>2017-06-30T10:26:00+08:00</updated>
   <id>http://localhost:4000/python/%E7%88%AC%E8%9F%B2/2017/06/30/[Python][爬蟲]不同的Content-Type-multipart:form-data</id>
   <content type="html">&lt;p&gt;這次要爬的目標是&lt;a href=&quot;http://www.taiwanexcellence.org/index.php/awards/now/cross/1&quot; target=&quot;_blank&quot;&gt;台灣精品獎得獎名單&lt;/a&gt;。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;我想要爬取的條件是，
&lt;img src=&quot;http://user-image.logdown.io/user/13067/blog/12306/post/1985162/Hpw8hdtgR2y2Yr1gIYln_%E6%93%B7%E5%8F%96.PNG&quot; alt=&quot;擷取.PNG&quot; /&gt;&lt;/p&gt;

&lt;p&gt;這時候會猜測這應該是個post的requests。&lt;/p&gt;

&lt;p&gt;果然，在按下查詢後，&lt;br /&gt;
出現了一個cross_list的可疑人物，&lt;br /&gt;
&lt;img src=&quot;http://user-image.logdown.io/user/13067/blog/12306/post/1985162/iJbMP5kdRba31P5IoKG0_%E6%93%B7%E5%8F%96.PNG&quot; alt=&quot;擷取.PNG&quot; /&gt;&lt;/p&gt;

&lt;p&gt;因為是post，&lt;br /&gt;
所以會期望在headers裡找到 “Form Data”，&lt;br /&gt;
這裡面應會藏著post需要的參數。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;但不幸的是，什麼也沒有，&lt;br /&gt;
只找到長得像這樣的”Request Payload”&lt;br /&gt;
&lt;img src=&quot;http://user-image.logdown.io/user/13067/blog/12306/post/1985162/w5DjcxhTR0s2PKSNbQwQ_payload.PNG&quot; alt=&quot;payload.PNG&quot; /&gt;&lt;/p&gt;

&lt;p&gt;然後Content-Type是multipart/form-data&lt;br /&gt;
&lt;img src=&quot;http://user-image.logdown.io/user/13067/blog/12306/post/1985162/SEe7tcApQfCSkEeYEgml_content-type.PNG&quot; alt=&quot;content-type.PNG&quot; /&gt;&lt;/p&gt;

&lt;p&gt;其實，我們平常需要的data form裡的資料就藏在Request Payload裡。&lt;br /&gt;
抓取的方式是，&lt;br /&gt;
&lt;img src=&quot;http://user-image.logdown.io/user/13067/blog/12306/post/1985162/w5DjcxhTR0s2PKSNbQwQ_payload.PNG&quot; alt=&quot;payload.PNG&quot; /&gt;&lt;/p&gt;

&lt;p&gt;以這行為例，&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;------WebKitFormBoundaryTaDJAA82fTd3ug3W
Content-Disposition: form-data; name=&quot;awards[]&quot;

1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;name後的 “award[]” 就會是dictionary的key，
底下的 1 ，就會是value，
所以就會變成&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;&quot;awards[]&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;1&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;所以就把Request Payload所有的資訊寫成&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;keyword&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;awards[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;awards[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;awards[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;years[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;2017&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;years[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;2016&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;A&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;B&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;C&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;D&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;E&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;F&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;G&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;H&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;I&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;J&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;K&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;L&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Z&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;但這樣寫完會覺得非常不合理，&lt;br /&gt;
因為會有一堆同樣的key但給予不同的value，&lt;br /&gt;
也就是說會key會一直被新的value取代。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;我當時的想法是，&lt;br /&gt;
看到 [] 就會很想要在裡面塞數字順位，&lt;br /&gt;
果然，從0開始，將相同的key編號，&lt;br /&gt;
就成功了。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;所以這樣送出requests，&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#爬取台灣精品得獎名單http://www.taiwanexcellence.org/index.php/awards/now/cross_list/1/2017/2/1&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;bs4&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BeautifulSoup&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;requests&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;math&lt;/span&gt;


&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;http://www.taiwanexcellence.org/index.php/awards/now/send_search/1/2017/2/1/cross_list&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;keyword&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;awards[0]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;awards[1]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;awards[2]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;years[0]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;2017&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;years[1]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;2016&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[0]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;A&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[1]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;B&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[2]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;C&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[3]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;D&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[4]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;E&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[5]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;F&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[6]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;G&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[7]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;H&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[8]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;I&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[9]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;J&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[10]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;K&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[11]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;L&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;industry[12]&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Z&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/shihs/crawlers/blob/master/%E5%8F%B0%E7%81%A3%E7%B2%BE%E5%93%81%E7%8D%8E/taiwanexcellence.py&quot; target=&quot;_blank&quot;&gt;完整的程式碼&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[R]顯示完整數字，不顯示科學記號</title>
   <link href="http://localhost:4000blog//r/2017/06/27/R-%E9%A1%AF%E7%A4%BA%E5%AE%8C%E6%95%B4%E6%95%B8%E5%AD%97-%E4%B8%8D%E9%A1%AF%E7%A4%BA%E7%A7%91%E5%AD%B8%E8%A8%98%E8%99%9F/"/>
   <updated>2017-06-27T11:05:00+08:00</updated>
   <id>http://localhost:4000/r/2017/06/27/[R]顯示完整數字，不顯示科學記號</id>
   <content type="html">&lt;p&gt;只要輸入，調整可顯示的位數&lt;/p&gt;
&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scipen&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;999&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;就可以改為顯示完整數字&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[R]Error when saving xlsx workbook with package openxlsx</title>
   <link href="http://localhost:4000blog//r/2017/06/22/R-Error-when-saving-xlsx-workbook-with-package-openxlsx/"/>
   <updated>2017-06-22T11:55:00+08:00</updated>
   <id>http://localhost:4000/r/2017/06/22/[R]Error when saving xlsx workbook with package openxlsx</id>
   <content type="html">&lt;p&gt;如果在windows系統使用saveWorkbook()出現以下錯誤訊息&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Error: zipping up workbook failed. Please make sure Rtools is installed or a zip application is     available to R.
Try installr::install.rtools() on Windows.
installr::install.rtools()
No need to install Rtools - You've got the relevant version of Rtools installed
saveWorkbook(wb, file = &quot;dq&quot;, overwrite = TRUE)
Error: zipping up workbook failed. Please make sure Rtools is installed or a zip application is available to R.
Try installr::install.rtools() on Windows.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;1.&lt;a href=&quot;https://cran.r-project.org/bin/windows/Rtools/&quot; target=&quot;_blank&quot;&gt;安裝Rtools.exe&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;2.找到Rtools底下的zip.exe路徑，
並設定rools的zip.exe路徑即可解決此問題&lt;/p&gt;
&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;Sys.setenv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;R_ZIPCMD&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;C:/Rtools/bin/zip.exe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;## path to zip.exe&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python][爬蟲]利用python下載zip檔並解壓縮</title>
   <link href="http://localhost:4000blog//python/%E7%88%AC%E8%9F%B2/2017/05/18/Python-%E7%88%AC%E8%9F%B2-%E5%88%A9%E7%94%A8python%E4%B8%8B%E8%BC%89zip%E6%AA%94%E4%B8%A6%E8%A7%A3%E5%A3%93%E7%B8%AE/"/>
   <updated>2017-05-18T16:19:00+08:00</updated>
   <id>http://localhost:4000/python/%E7%88%AC%E8%9F%B2/2017/05/18/[Python][爬蟲]利用python下載zip檔並解壓縮</id>
   <content type="html">&lt;p&gt;下載檔案是使用package urllib2&lt;br /&gt;
解壓縮檔案則是使用package zipfile&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 下載與解壓縮 財政部財政資訊中心-全國營業(稅籍)登記資料集 http://data.gov.tw/node/9400&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib2&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#urllib2.urlopen &lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;zipfile&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#zipfile.ZipFile&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;DownloadTWCompany&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
	&lt;span class=&quot;c&quot;&gt;# 檔案下載&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;下載全國營業(稅籍)登記資料集壓縮擋...&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;downloadurl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlopen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'http://www.fia.gov.tw/opendata/bgmopen1.zip'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;zipcontent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;downloadurl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;TWRAW.zip&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'wb'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
	    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zipcontent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;下載完成!&quot;&lt;/span&gt;
	
	&lt;span class=&quot;c&quot;&gt;# 解壓縮檔案&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;資料解壓縮...&quot;&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zipfile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ZipFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'TWRAW.zip'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'rb'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extractall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;1234&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# 解壓縮密碼1234&lt;/span&gt;
	
	&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;解壓縮完成!&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;DownloadTWCompany&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python][爬蟲]如何刪除網頁中的 & nbsp;</title>
   <link href="http://localhost:4000blog//python/%E7%88%AC%E8%9F%B2/2017/05/17/Python-%E7%88%AC%E8%9F%B2-%E5%A6%82%E4%BD%95%E5%88%AA%E9%99%A4%E7%B6%B2%E9%A0%81%E4%B8%AD%E7%9A%84/"/>
   <updated>2017-05-17T15:23:00+08:00</updated>
   <id>http://localhost:4000/python/%E7%88%AC%E8%9F%B2/2017/05/17/[Python][爬蟲]如何刪除網頁中的</id>
   <content type="html">&lt;p&gt;在爬取網頁時偶爾會碰到&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;ni&quot;&gt;&amp;amp;nbsp;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;而且怎麼樣都刪不掉也取代不掉，&lt;br /&gt;
使用strip()仍然會有空白。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;「&amp;amp;nbsp;」 是屬於 HTML 的特殊符號之一「空格符號」，其 nbsp 取自於英文 a non-breaking space 的英文簡稱，其原意是「不會被間斷的空白」
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;假如現在有一個網頁內容包含&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;
	E601010&lt;span class=&quot;ni&quot;&gt;&amp;amp;nbsp;&lt;/span&gt;
	電器承裝業
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;br&amp;gt;&lt;/span&gt;
	E601020&lt;span class=&quot;ni&quot;&gt;&amp;amp;nbsp;&lt;/span&gt;
	電器安裝業
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;br&amp;gt;&lt;/span&gt;													
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;已經抓出td tag，&lt;br /&gt;
接著可以使用&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;td&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;td&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;html&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;這時候td type會變成str，&lt;br /&gt;
再使用replace取代就可以刪除空白了。&lt;br /&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[Python][爬蟲]不同的 Content-Type (application/json)</title>
   <link href="http://localhost:4000blog//python/%E7%88%AC%E8%9F%B2/2017/05/05/Python-%E7%88%AC%E8%9F%B2-%E4%B8%8D%E5%90%8C%E7%9A%84Content-Type-application-json/"/>
   <updated>2017-05-05T15:45:00+08:00</updated>
   <id>http://localhost:4000/python/%E7%88%AC%E8%9F%B2/2017/05/05/[Python][爬蟲]不同的Content-Type-application:json</id>
   <content type="html">&lt;p&gt;目標是爬取 http://waste.epa.gov.tw/WasteConfigure/VocationCode.asp&lt;br /&gt;
所有的行業代碼與中文名稱。&lt;/p&gt;

&lt;p&gt;按下一頁發現會load一個post的網址&lt;br /&gt;
&lt;img src=&quot;http://user-image.logdown.io/user/13067/blog/12306/post/1792968/fSvGMaRQRCfVLL1T7SMz_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202017-05-10%20%E4%B8%8B%E5%8D%883.47.28.png&quot; alt=&quot;螢幕快照 2017-05-10 下午3.47.28.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;接著想要在headers裡找到 “Form Data”，&lt;br /&gt;
這裡面應會藏著post需要的參數。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;可是，這時候卻只有找到 “Requests Payload”，&lt;br /&gt;
這個看起來很像payload的東西，&lt;br /&gt;
它看起來是個json，&lt;br /&gt;
且Response Headers的Content-Type正是application/json。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://user-image.logdown.io/user/13067/blog/12306/post/1792968/qomn6tsmQcaYV27GsYea_content%20type.png&quot; alt=&quot;content type.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;所以我將 “Requests Payload”按下view source後的結果直接複製，&lt;br /&gt;
然後requests結果再用json.loads就可以得到想要的結果了。&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;程式碼如下，&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# -*- coding:utf-8 -*-&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 爬取 http://waste.epa.gov.tw/WasteConfigure/VocationCode.asp 行業代碼(4碼)&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;requests&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;# payload for requests&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'{&quot;Cond&quot;:{&quot;KeyWord&quot;:&quot;&quot;,&quot;Paging&quot;:{&quot;Size&quot;:519,&quot;Current&quot;:1,&quot;Count&quot;:52,&quot;RecordCount&quot;:519,&quot;CanPrev&quot;:false,&quot;CanNext&quot;:true}}}'&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;application/json&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
		  &lt;span class=&quot;s&quot;&gt;&quot;Referer&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://waste.epa.gov.tw/WasteConfigure/VocationCode.asp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;http://waste.epa.gov.tw/NRS40/_ws/JsApI/CodeQuery.asmx/Vocation&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;js&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loads&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;js&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;d&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Result&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Code&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ignore&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>[R]在R中使用system呼叫python-給予參數</title>
   <link href="http://localhost:4000blog//r/2017/04/24/R-%E5%9C%A8R%E4%B8%AD%E4%BD%BF%E7%94%A8system%E5%91%BC%E5%8F%ABpython-%E7%B5%A6%E4%BA%88%E5%8F%83%E6%95%B8/"/>
   <updated>2017-04-24T11:22:00+08:00</updated>
   <id>http://localhost:4000/r/2017/04/24/[R]在R中使用system呼叫python-給予參數</id>
   <content type="html">&lt;p&gt;之前介紹過&lt;a href=&quot;https://shihs.github.io/blog/2016/07/08/R-在R中使用system呼叫python/&quot; target=&quot;_blank&quot;&gt;在R中使用system呼叫python&lt;/a&gt;。&lt;/p&gt;
&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;python python_script.py&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;假如現在我想要帶入參數給python script要怎麼做呢？&lt;/p&gt;

&lt;p&gt;首先，&lt;br /&gt;
在python程式碼的部分，&lt;br /&gt;
要使用 &lt;strong&gt;sys.arg[]&lt;/strong&gt; 讓python程式獲取參數。&lt;/p&gt;

&lt;p&gt;還有，在 &lt;strong&gt;sys.arg[0]&lt;/strong&gt; 表示的是程式名稱，&lt;br /&gt;
所以要使用 &lt;strong&gt;sys.arg[1]&lt;/strong&gt; 才是表示要讀取的第一個參數。&lt;/p&gt;

&lt;p&gt;假如今天有支 &lt;em&gt;python_script.py&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Hello, &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;在cmf中呼叫這支python程式&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python python_script.py world
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;R裡的system()要打的指令就是cmf中打的指令。&lt;br /&gt;
所以在R中就會變成，&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;python python_script.py world&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;結果就會變成&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Hello, world
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;最後，&lt;br /&gt;
在使用system()必須要先setwd將路徑設成python_script.py所在位置。&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[R]設定 R 圖形字體</title>
   <link href="http://localhost:4000blog//r/2016/08/24/R-%E8%A8%AD%E5%AE%9AR%E5%9C%96%E5%BD%A2%E5%AD%97%E9%AB%94/"/>
   <updated>2016-08-24T15:31:00+08:00</updated>
   <id>http://localhost:4000/r/2016/08/24/[R]設定R圖形字體</id>
   <content type="html">&lt;p&gt;一開始碰到需要調整圖形字體是在使用windows的自動排程時字體變成框框，
以下的解法是針對windows方能使用。&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;使用windowsFonts函數將要使用的字體賦予一個值。
    &lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;windowsFonts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BL&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;windowsFont&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;微軟正黑體&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;在圖形中設定family。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;(1)使用par()在最一開始設定。&lt;/p&gt;
&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;par&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;family&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;BL&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sales&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sales&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;RWEPA公司102年1月至6月銷售統計圖&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
     &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlab&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;月份&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylab&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;銷售金額（萬元)&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(2) 在plot中設定&lt;/p&gt;
&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;sales&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sales&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;RWEPA公司102年1月至6月銷售統計圖&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
     &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlab&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;月份&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylab&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;銷售金額（萬元)&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;family&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;BL&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(3) 在ggplot中設定&lt;/p&gt;
&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggplot2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggplot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data.frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rnorm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom_histogram&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;purple&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alpha&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;labs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;取值&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;頻數&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;theme&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;element_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;family&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;BL&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;其實，family後是可以直接放要設定的字體完整名稱，
不需定windowsFonts，
只是假如字體名稱很長，
便不需要一再地打上那麼長的名稱，
如此以來便也適用mac。&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[R]R batch</title>
   <link href="http://localhost:4000blog//r/2016/07/17/R-R-batch/"/>
   <updated>2016-07-17T11:11:00+08:00</updated>
   <id>http://localhost:4000/r/2016/07/17/[R]R batch</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;http://www.statmethods.net/interface/batch.html&quot; target=&quot;_blank&quot;&gt;R batch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;因為.R檔無法點兩下就能執行，
所以儲存一個R batch，再使用工作排程設定時間，
就可以在固定時間自動執行程式。&lt;/p&gt;

&lt;p&gt;以下是在windows中的寫法，
必須要先給R儲存的位置，後面放R script的位置。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-cmd&quot;&gt;C:\Program Files\R\R-3.2.5\bin\R.exe&quot; CMD BATCH &quot;C:\Users\mypc\Desktop\myrscript.R&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;將上面的程式碼貼在記事本(確認R的版本和位置)，
再將記事本副檔名存成.bat 就完成了。&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Windows7 自動排程</title>
   <link href="http://localhost:4000blog//others/2016/07/17/windows7%E8%87%AA%E5%8B%95%E6%8E%92%E7%A8%8B/"/>
   <updated>2016-07-17T11:06:00+08:00</updated>
   <id>http://localhost:4000/others/2016/07/17/windows7自動排程</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;http://isvincent.pixnet.net/blog/post/38936955-windows-7-%E5%96%84%E7%94%A8%E5%B7%A5%E4%BD%9C%E6%8E%92%E7%A8%8B%E5%99%A8&quot; target=&quot;_blank&quot;&gt;工作排程，讓程式自動執行&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;開始 =&amp;gt; 附屬應用程式 =&amp;gt; 系統工具 =&amp;gt; 工作排程器&lt;/p&gt;

&lt;p&gt;建立基本工作 =&amp;gt; 建立基本工作、觸發程序、執行、完成&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>[R]使用 R 發送gmail Email</title>
   <link href="http://localhost:4000blog//r/2016/07/17/R-%E4%BD%BF%E7%94%A8R%E7%99%BC%E9%80%81email/"/>
   <updated>2016-07-17T10:58:00+08:00</updated>
   <id>http://localhost:4000/r/2016/07/17/[R]使用R發送email</id>
   <content type="html">&lt;p&gt;使用mailR package寫一個R的script，自動發信。&lt;/p&gt;

&lt;p&gt;以下幾個步驟，&lt;br /&gt;
1.&lt;a href=&quot;https://www.google.com/settings/security/lesssecureapps&quot; target=&quot;_blank&quot;&gt;啟用安全性較低的應用程式存取&lt;/a&gt;&lt;br /&gt;
2.&lt;a href=&quot;https://github.com/rpremraj/mailR&quot; target=&quot;_blank&quot;&gt;使用mailR package&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mailR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;send.mail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;mymail@gmail.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 寄件者&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#收件者&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;receive1@gmail.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
                 &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;receive2@gmail.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#標題&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subject&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;測試&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#內文&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;這是一個測試&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
          &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encoding&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 編碼&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#夾帶檔案&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;attach.files&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;attach.xlsx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;smtp&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;host.name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;smtp.gmail.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
                      &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;465&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
                      &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user.name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;mymail@gmail.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
                      &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;passwd&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;mypasswd&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
                      &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ssl&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;authenticate&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;另外，
我其實還有查到gmailr這個package，
但它有些bug，
無法同時有信件內文又有夾帶檔案，
所以目前找到最好的方式還是使用mailR。&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>[Python]使用 python 下載 gmail 附件</title>
   <link href="http://localhost:4000blog//python/2016/07/08/Python-%E4%BD%BF%E7%94%A8python%E4%B8%8B%E8%BC%89gmail%E9%99%84%E4%BB%B6/"/>
   <updated>2016-07-08T21:02:00+08:00</updated>
   <id>http://localhost:4000/python/2016/07/08/[Python]使用python下載gmail附件</id>
   <content type="html">&lt;p&gt;每天都會收到信並且要利用信中的附件整理資料，
但這樣我在跑程式前還要手動去下載檔案，
覺得實在太麻煩，
所以找到了這個辦法！&lt;/p&gt;

&lt;p&gt;因為我的mail是gamil，
所以以下的程式碼是針對gmail，
在執行前要先&lt;a href=&quot;http://mobileai.net/2011/03/19/教您如何開啟-gmail-的-imap-功能/&quot; target=&quot;_blank&quot;&gt;打開imap&lt;/a&gt;
我主要是參考&lt;a href=&quot;https://gist.github.com/jasonrdsouza/1674794&quot; target=&quot;_blank&quot;&gt;這裡&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;imaplib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inspect&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;email&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;datetime&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;datetime&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;email.header&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;decode_header&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;inspect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getmro&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imaplib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IMAP4_SSL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#與IMAP4 server連線，gmail要開啟IMAP&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;imap&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;imaplib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IMAP4_SSL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'imap.gmail.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;c&quot;&gt;#登入&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;imap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'mymailaddress@gmail.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'mypasswd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#選擇信箱標籤&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;imap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;label&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#找所有mail&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;resp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mails&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;imap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ALL&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#讀取信件內容，只抓取最新一封信件(len(mails[0].split())-1)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;resp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;imap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'(RFC822)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;emailbody&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mail&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message_from_string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;emailbody&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#找出含有附件的部分&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;part&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mail&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;walk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;part&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_content_maintype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'multipart'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;part&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Content-Disposition'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;

	&lt;span class=&quot;c&quot;&gt;#附件檔名&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;fileName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;part&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;  
	&lt;span class=&quot;c&quot;&gt;#修改檔名編碼&amp;lt;http://stackoverflow.com/questions/11206489/how-to-print-next-year-from-current-year-in-python&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;fileName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;datetime&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;year&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1911&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decode_header&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decode_header&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;C:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Users&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;mypc&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Desktop&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;data&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

		&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;fp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'wb'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;fp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;part&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;fp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;attachement is downloaded!&quot;&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;file is already exist!&quot;&lt;/span&gt;
			
&lt;span class=&quot;c&quot;&gt;#關閉連線與登出&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;imap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;imap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;logout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;


&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>[R]在 R 中使用 system 呼叫 python</title>
   <link href="http://localhost:4000blog//r/2016/07/08/R-%E5%9C%A8R%E4%B8%AD%E4%BD%BF%E7%94%A8system%E5%91%BC%E5%8F%ABpython/"/>
   <updated>2016-07-08T20:36:00+08:00</updated>
   <id>http://localhost:4000/r/2016/07/08/[R]在R中使用system呼叫python</id>
   <content type="html">&lt;p&gt;我個人比較偏好使用R做所有的事情，
但某些時候還是需要使用到python，
所以希望可以在R上呼叫python程式碼。&lt;/p&gt;

&lt;p&gt;一開始我找到了rPython這個library，
但它似乎無法在windows上使用……
所以我又找到了另一個不需要安裝任何套件且可以在windows上執行的辦法！&lt;/p&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;python python_script.py&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;這個辦法是呼叫系統函數，
就像是在cmd上面打的指令一樣，
而且在mac上也可以執行！&lt;/p&gt;

</content>
 </entry>
 

</feed>
