I"m<p>ç›®æ¨™æ˜¯çˆ¬å– http://waste.epa.gov.tw/WasteConfigure/VocationCode.asp<br />
æ‰€æœ‰çš„è¡Œæ¥­ä»£ç¢¼èˆ‡ä¸­æ–‡åç¨±ã€‚</p>

<p>æŒ‰ä¸‹ä¸€é ç™¼ç¾æœƒloadä¸€å€‹postçš„ç¶²å€<br />
<img src="http://user-image.logdown.io/user/13067/blog/12306/post/1792968/fSvGMaRQRCfVLL1T7SMz_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202017-05-10%20%E4%B8%8B%E5%8D%883.47.28.png" alt="è¢å¹•å¿«ç…§ 2017-05-10 ä¸‹åˆ3.47.28.png" /></p>

<p>æ¥è‘—æƒ³è¦åœ¨headersè£¡æ‰¾åˆ° â€œForm Dataâ€ï¼Œ<br />
é€™è£¡é¢æ‡‰æœƒè—è‘—postéœ€è¦çš„åƒæ•¸ã€‚<br /></p>

<p>å¯æ˜¯ï¼Œé€™æ™‚å€™å»åªæœ‰æ‰¾åˆ° â€œRequests Payloadâ€ï¼Œ<br />
é€™å€‹çœ‹èµ·ä¾†å¾ˆåƒpayloadçš„æ±è¥¿ï¼Œ<br />
å®ƒçœ‹èµ·ä¾†æ˜¯å€‹jsonï¼Œ<br />
ä¸”Response Headersçš„Content-Typeæ­£æ˜¯application/jsonã€‚</p>

<p><img src="http://user-image.logdown.io/user/13067/blog/12306/post/1792968/qomn6tsmQcaYV27GsYea_content%20type.png" alt="content type.png" /></p>

<p>æ‰€ä»¥æˆ‘å°‡ â€œRequests Payloadâ€æŒ‰ä¸‹view sourceå¾Œçš„çµæœç›´æ¥è¤‡è£½ï¼Œ<br />
ç„¶å¾Œrequestsçµæœå†ç”¨json.loadså°±å¯ä»¥å¾—åˆ°æƒ³è¦çš„çµæœäº†ã€‚<br /></p>

<p>ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼Œ</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># -*- coding:utf-8 -*-
# çˆ¬å– http://waste.epa.gov.tw/WasteConfigure/VocationCode.asp è¡Œæ¥­ä»£ç¢¼(4ç¢¼)
</span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>


<span class="c1"># payload for requests
</span><span class="n">payload</span> <span class="o">=</span> <span class="s">'{"Cond":{"KeyWord":"","Paging":{"Size":519,"Current":1,"Count":52,"RecordCount":519,"CanPrev":false,"CanNext":true}}}'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Content-Type"</span><span class="p">:</span><span class="s">"application/json"</span><span class="p">,</span> 
		  <span class="s">"Referer"</span><span class="p">:</span><span class="s">"http://waste.epa.gov.tw/WasteConfigure/VocationCode.asp"</span><span class="p">}</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"http://waste.epa.gov.tw/NRS40/_ws/JsApI/CodeQuery.asmx/Vocation"</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="n">js</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">js</span><span class="p">[</span><span class="s">"d"</span><span class="p">][</span><span class="s">"Result"</span><span class="p">]:</span>
	<span class="n">code</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="s">"Code"</span><span class="p">]</span>
	<span class="n">name</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="s">"Name"</span><span class="p">].</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">,</span> <span class="s">"ignore"</span><span class="p">)</span>
	<span class="k">print</span> <span class="n">code</span>

</code></pre></div></div>
:ET